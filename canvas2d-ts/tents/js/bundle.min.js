(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var MyScene=function(){function MyScene(canvasName){var _this=this;this.gridOffsetX=25;this.gridOffsetY=25;this.cellSize=20;this.gridSize=this.cellSize*10;this.tentSize=10;this.topCoords=[0,0,0,0,0,0,0,0,0,0];this.leftCoords=[0,0,0,0,0,0,0,0,0,0];this.field=[];this.tents=[];var canvas=document.getElementById(canvasName);this.ctx=canvas.getContext("2d");this.InitField();this.Draw();canvas.onclick=function(ev){var rect=ev.target.getBoundingClientRect();var x=ev.clientX-Math.round(rect.left)-_this.gridOffsetX;var y=ev.clientY-Math.round(rect.top)-_this.gridOffsetY;if(0<=x&&x<200&&0<=y&&y<200){var row=Math.floor(y/20);var column=Math.floor(x/20);if(_this.field[row][column]==" "){_this.field[row][column]="O"}else if(_this.field[row][column]=="O"){_this.field[row][column]=" ";if(_this.tents[row][column].hasTent){_this.field[_this.tents[row][column].r][_this.tents[row][column].c]=" "}}_this.Draw()}};var btnSetTents=document.getElementById("btnSetTents");btnSetTents.onclick=function(){for(var r=0;r<_this.field.length;r++){for(var c=0;c<_this.field.length;c++){if(_this.field[r][c]==="O"&&!_this.tents[r][c].hasTent){var places=_this.GetPlacesForTent(r,c);if(places.length===0){continue}var index=_this.GetRandInt(0,places.length-1);_this.field[places[index].r][places[index].c]="A";_this.tents[r][c].hasTent=true;_this.tents[r][c].r=places[index].r;_this.tents[r][c].c=places[index].c}}}for(var r=0;r<_this.field.length;r++){var counter=0;for(var c=0;c<_this.field.length;c++){if(_this.field[r][c]==="A"){counter++}}_this.leftCoords[r]=counter}for(var c=0;c<_this.field.length;c++){var counter=0;for(var r=0;r<_this.field.length;r++){if(_this.field[r][c]==="A"){counter++}}_this.topCoords[c]=counter}_this.Draw()};var btnClear=document.getElementById("btnClear");btnClear.onclick=function(){_this.InitField();_this.topCoords=[0,0,0,0,0,0,0,0,0,0];_this.leftCoords=[0,0,0,0,0,0,0,0,0,0];_this.Draw()}}MyScene.prototype.GetRandInt=function(min,max){min=Math.ceil(min);max=Math.floor(max);return Math.floor(Math.random()*(max-min+1))+min};MyScene.prototype.GetPlacesForTent=function(r,c){var places=[];if(this.IsInRange(r+1,c)&&this.field[r+1][c]===" "&&!this.IsTentAroundTent(r+1,c)){places.push({r:r+1,c:c})}if(this.IsInRange(r,c-1)&&this.field[r][c-1]===" "&&!this.IsTentAroundTent(r,c-1)){places.push({r:r,c:c-1})}if(this.IsInRange(r-1,c)&&this.field[r-1][c]===" "&&!this.IsTentAroundTent(r-1,c)){places.push({r:r-1,c:c})}if(this.IsInRange(r,c+1)&&this.field[r][c+1]===" "&&!this.IsTentAroundTent(r,c+1)){places.push({r:r,c:c+1})}return places};MyScene.prototype.IsInRange=function(r,c){return 0<=r&&r<10&&0<=c&&c<10};MyScene.prototype.IsTentAroundTree=function(r,c){if(this.IsInRange(r+1,c)&&this.field[r+1][c]==="A"){return true}if(this.IsInRange(r,c-1)&&this.field[r][c-1]==="A"){return true}if(this.IsInRange(r-1,c)&&this.field[r-1][c]==="A"){return true}if(this.IsInRange(r,c+1)&&this.field[r][c+1]==="A"){return true}return false};MyScene.prototype.IsTentAroundTent=function(r,c){if(0<=r-1&&r-1<10&&0<=c-1&&c-1<10){if(this.field[r-1][c-1]==="A"){return true}}if(0<=r-1&&r-1<10&&0<=c&&c<10){if(this.field[r-1][c]==="A"){return true}}if(0<=r-1&&r-1<10&&0<=c+1&&c+1<10){if(this.field[r-1][c+1]==="A"){return true}}if(0<=r&&r<10&&0<=c+1&&c+1<10){if(this.field[r][c+1]==="A"){return true}}if(0<=r&&r<10&&0<=c-1&&c-1<10){if(this.field[r][c-1]==="A"){return true}}if(0<=r+1&&r+1<10&&0<=c-1&&c-1<10){if(this.field[r+1][c-1]==="A"){return true}}if(0<=r+1&&r+1<10&&0<=c&&c<10){if(this.field[r+1][c]==="A"){return true}}if(0<=r+1&&r+1<10&&0<=c+1&&c+1<10){if(this.field[r+1][c+1]==="A"){return true}}return false};MyScene.prototype.InitField=function(){for(var row=0;row<10;row++){this.field[row]=new Array(10);for(var column=0;column<10;column++){this.field[row][column]=" "}this.tents[row]=new Array(10);for(var column=0;column<10;column++){this.tents[row][column]={hasTent:false,r:0,c:0}}}};MyScene.prototype.Draw=function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);this.DrawCoords(this.topCoords,true);this.DrawCoords(this.leftCoords,false);this.DrawGrid();this.DrawField()};MyScene.prototype.DrawCoords=function(coords,isTop){this.ctx.font="16px serif";this.ctx.fillStyle="blue";for(var i=0;i<coords.length;i++){var t=coords[i].toString();if(isTop){this.ctx.fillText(t,i*this.cellSize+this.gridOffsetX+this.cellSize/2-this.ctx.measureText(t).width/2,this.gridOffsetY-5)}else{this.ctx.fillText(t,this.gridOffsetX-this.ctx.measureText("M").width,i*this.cellSize+this.gridOffsetY+this.cellSize/2+this.ctx.measureText("M").width/2)}}};MyScene.prototype.DrawGrid=function(){for(var i=0;i<=10;i++){this.ctx.beginPath();this.ctx.moveTo(i*this.cellSize+this.gridOffsetX,this.gridOffsetY);this.ctx.lineTo(i*this.cellSize+this.gridOffsetX,this.gridSize+this.gridOffsetY);this.ctx.stroke();this.ctx.beginPath();this.ctx.moveTo(this.gridOffsetX,i*this.cellSize+this.gridOffsetY);this.ctx.lineTo(this.gridSize+this.gridOffsetX,i*this.cellSize+this.gridOffsetY);this.ctx.stroke()}};MyScene.prototype.DrawField=function(){for(var row=0;row<this.field.length;row++){for(var column=0;column<this.field.length;column++){if(this.field[row][column]==="O"){this.ctx.beginPath();this.ctx.arc(column*this.cellSize+this.gridOffsetX+this.cellSize/2,row*this.cellSize+this.gridOffsetY+this.cellSize/2,5,0,2*Math.PI);this.ctx.fillStyle="green";this.ctx.fill()}else if(this.field[row][column]==="A"){this.ctx.translate(this.cellSize/2,this.cellSize/2);this.ctx.beginPath();this.ctx.moveTo(column*this.cellSize+this.gridOffsetX-this.tentSize/2,row*this.cellSize+this.gridOffsetY+this.tentSize/2);this.ctx.lineTo(column*this.cellSize+this.gridOffsetX+this.tentSize/2,row*this.cellSize+this.gridOffsetY+this.tentSize/2);this.ctx.lineTo(column*this.cellSize+this.gridOffsetX,row*this.cellSize+this.gridOffsetY-this.tentSize/2);this.ctx.fillStyle="blue";this.ctx.fill();this.ctx.setTransform(1,0,0,1,0,0)}}}};return MyScene}();exports.default=MyScene},{}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var MyScene_1=require("./MyScene");var Program=function(){function Program(){}Program.Main=function(){new MyScene_1.default("renderCanvas")};return Program}();window.onload=function(){Program.Main()}},{"./MyScene":1}]},{},[2]);