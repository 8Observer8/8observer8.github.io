var gEngine=gEngine||{};gEngine.Input=function(){var kMouseButton={Left:0,Middle:1,Right:2};var mCanvas=null;var mButtonPreviousState=[];var mIsButtonPressed=[];var mIsButtonClicked=[];var mMousePosX=-1;var mMousePosY=-1;var _onMouseMove=function(event){var inside=false;var x=event.clientX;var y=event.clientY;var rect=event.target.getBoundingClientRect();x=(x-rect.left)/insetCanvas.clientWidth*2-1;y=-(y-rect.top)/insetCanvas.clientHeight*2+1;if(-1<x&&x<1&&-1<y&&y<1){mMousePosX=x;mMousePosY=y;inside=true}return inside};var _onMouseDown=function(event){if(_onMouseMove(event)){mIsButtonPressed[event.button]=true}};var _onMouseUp=function(event){_onMouseMove(event);mIsButtonPressed[event.button]=false};var initialize=function(canvasID){for(i=0;i<3;i++){mButtonPreviousState[i]=false;mIsButtonPressed[i]=false;mIsButtonClicked[i]=false}window.addEventListener("mousedown",_onMouseDown);window.addEventListener("mouseup",_onMouseUp);window.addEventListener("mousemove",_onMouseMove);mCanvas=document.getElementById(canvasID)};var update=function(){for(var i=0;i<3;i++){mIsButtonClicked[i]=!mButtonPreviousState[i]&&mIsButtonPressed[i];mButtonPreviousState[i]=mIsButtonPressed[i]}};var isButtonPressed=function(button){return mIsButtonPressed[button]};var isButtonClicked=function(button){return mIsButtonClicked[button]};var getMousePosX=function(){return mMousePosX};var getMousePosY=function(){return mMousePosY};var mPublic={initialize:initialize,update:update,isButtonPressed:isButtonPressed,isButtonClicked:isButtonClicked,getMousePosX:getMousePosX,getMousePosY:getMousePosY,mouseButton:kMouseButton};return mPublic}();