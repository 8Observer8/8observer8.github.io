function t(t,e,i,s){Object.defineProperty(t,e,{get:i,set:s,enumerable:!0,configurable:!0})}var e,i,s,o,n,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},m={},h=r.parcelRequireaec4;null==h&&((h=function(t){if(t in a)return a[t].exports;if(t in m){var e=m[t];delete m[t];var i={id:t,exports:{}};return a[t]=i,e.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){m[t]=e},r.parcelRequireaec4=h),h.register("51SVy",(function(t,e){var i=h("hvlqD"),s=h("8kh7u"),o=h("jrVnt"),n=h("gGjtn"),r=h("eacC4"),a=h("8o39l"),m=h("fki3m"),c=0;function _(t){var e=(t=t||{}).rootClass||i,h=t.preSerialize||function(t){return t},_=t.postSerialize||function(t,e){return t},l=t.preDeserialize||function(t){return t},u=t.postDeserialize||function(t,e){return t},p={World:i,Body:s,Joint:o,Fixture:n,Shape:r},y=Object.assign({Vec2:a,Vec3:m},p);this.toJson=function(t){var e=[],i=[t],s={};function o(t,o){if(t.__sid=t.__sid||++c,!s[t.__sid]){i.push(t);var n={refIndex:e.length+i.length,refType:o};s[t.__sid]=n}return s[t.__sid]}function n(t,e){if("object"!=typeof t||null===t)return t;if("function"==typeof t._serialize){if(t!==e)for(var i in p)if(t instanceof p[i])return o(t,i);r=(s=h(s=t))._serialize(),t=_(r,s)}var s,r;if(Array.isArray(t)){for(var a=[],m=0;m<t.length;m++)a[m]=n(t[m]);t=a}else{a={};for(var m in t)t.hasOwnProperty(m)&&(a[m]=n(t[m]));t=a}return t}for(;i.length;){var r=i.shift(),a=n(r,r);e.push(a)}return e},this.fromJson=function(t){var i={};function s(t,e,i){e=l(e);var s=t._deserialize(e,i,o);return s=u(s,e)}function o(e,o,n){if(!o.refIndex)return e&&e._deserialize&&s(e,o,n);e=y[o.refType]||e;var r=o.refIndex;if(!i[r]){var a=s(e,t[r],n);i[r]=a}return i[r]}return e._deserialize(t[0],null,o)}}t.exports=_;var l=new _;t.exports.toJson=l.toJson,t.exports.fromJson=l.fromJson})),h.register("hvlqD",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=u;var s=h("ecDm3"),o=h("bVyf9"),n=h("8o39l"),r=h("gDbaE"),a=h("byzhY"),m=h("8kh7u"),c=h("jrVnt"),_=h("f6rGq"),l={gravity:n.zero(),allowSleep:!0,warmStarting:!0,continuousPhysics:!0,subStepping:!1,blockSolve:!0,velocityIterations:8,positionIterations:3};function u(t){if(!(this instanceof u))return new u(t);t&&n.isValid(t)&&(t={gravity:t}),t=s(t,l),this.m_solver=new a(this),this.m_broadPhase=new r,this.m_contactList=null,this.m_contactCount=0,this.m_bodyList=null,this.m_bodyCount=0,this.m_jointList=null,this.m_jointCount=0,this.m_stepComplete=!0,this.m_allowSleep=t.allowSleep,this.m_gravity=n.clone(t.gravity),this.m_clearForces=!0,this.m_newFixture=!1,this.m_locked=!1,this.m_warmStarting=t.warmStarting,this.m_continuousPhysics=t.continuousPhysics,this.m_subStepping=t.subStepping,this.m_blockSolve=t.blockSolve,this.m_velocityIterations=t.velocityIterations,this.m_positionIterations=t.positionIterations,this.m_t=0,this.addPair=this.createContact.bind(this)}u.prototype._serialize=function(){for(var t=[],e=[],i=this.getBodyList();i;i=i.getNext())t.push(i);for(var s=this.getJointList();s;s=s.getNext())"function"==typeof s._serialize&&e.push(s);return{gravity:this.m_gravity,bodies:t,joints:e}},u._deserialize=function(t,e,i){if(!t)return new u;var s=new u(t.gravity);if(t.bodies)for(var o=t.bodies.length-1;o>=0;o-=1)s._addBody(i(m,t.bodies[o],s));if(t.joints)for(o=t.joints.length-1;o>=0;o--)s.createJoint(i(c,t.joints[o],s));return s},u.prototype.getBodyList=function(){return this.m_bodyList},u.prototype.getJointList=function(){return this.m_jointList},u.prototype.getContactList=function(){return this.m_contactList},u.prototype.getBodyCount=function(){return this.m_bodyCount},u.prototype.getJointCount=function(){return this.m_jointCount},u.prototype.getContactCount=function(){return this.m_contactCount},u.prototype.setGravity=function(t){this.m_gravity=t},u.prototype.getGravity=function(){return this.m_gravity},u.prototype.isLocked=function(){return this.m_locked},u.prototype.setAllowSleeping=function(t){if(t!=this.m_allowSleep&&(this.m_allowSleep=t,0==this.m_allowSleep))for(var e=this.m_bodyList;e;e=e.m_next)e.setAwake(!0)},u.prototype.getAllowSleeping=function(){return this.m_allowSleep},u.prototype.setWarmStarting=function(t){this.m_warmStarting=t},u.prototype.getWarmStarting=function(){return this.m_warmStarting},u.prototype.setContinuousPhysics=function(t){this.m_continuousPhysics=t},u.prototype.getContinuousPhysics=function(){return this.m_continuousPhysics},u.prototype.setSubStepping=function(t){this.m_subStepping=t},u.prototype.getSubStepping=function(){return this.m_subStepping},u.prototype.setAutoClearForces=function(t){this.m_clearForces=t},u.prototype.getAutoClearForces=function(){return this.m_clearForces},u.prototype.clearForces=function(){for(var t=this.m_bodyList;t;t=t.getNext())t.m_force.setZero(),t.m_torque=0},u.prototype.queryAABB=function(t,e){i&&o.assert("function"==typeof e);var s=this.m_broadPhase;this.m_broadPhase.query(t,(function(t){var i=s.getUserData(t);return e(i.fixture)}))},u.prototype.rayCast=function(t,e,s){i&&o.assert("function"==typeof s);var r=this.m_broadPhase;this.m_broadPhase.rayCast({maxFraction:1,p1:t,p2:e},(function(t,e){var i=r.getUserData(e),o=i.fixture,a=i.childIndex,m={};if(o.rayCast(m,t,a)){var h=m.fraction,c=n.add(n.mul(1-h,t.p1),n.mul(h,t.p2));return s(o,c,m.normal,h)}return t.maxFraction}))},u.prototype.getProxyCount=function(){return this.m_broadPhase.getProxyCount()},u.prototype.getTreeHeight=function(){return this.m_broadPhase.getTreeHeight()},u.prototype.getTreeBalance=function(){return this.m_broadPhase.getTreeBalance()},u.prototype.getTreeQuality=function(){return this.m_broadPhase.getTreeQuality()},u.prototype.shiftOrigin=function(t){if(i&&o.assert(0==this.m_locked),!this.m_locked){for(var e=this.m_bodyList;e;e=e.m_next)e.m_xf.p.sub(t),e.m_sweep.c0.sub(t),e.m_sweep.c.sub(t);for(var s=this.m_jointList;s;s=s.m_next)s.shiftOrigin(t);this.m_broadPhase.shiftOrigin(t)}},u.prototype._addBody=function(t){i&&o.assert(!1===this.isLocked()),this.isLocked()||(t.m_prev=null,t.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=t),this.m_bodyList=t,++this.m_bodyCount)},u.prototype.createBody=function(t,e){if(i&&o.assert(0==this.isLocked()),this.isLocked())return null;t&&n.isValid(t)&&(t={position:t,angle:e});var s=new m(this,t);return this._addBody(s),s},u.prototype.createDynamicBody=function(t,e){return t?n.isValid(t)&&(t={position:t,angle:e}):t={},t.type="dynamic",this.createBody(t)},u.prototype.createKinematicBody=function(t,e){return t?n.isValid(t)&&(t={position:t,angle:e}):t={},t.type="kinematic",this.createBody(t)},u.prototype.destroyBody=function(t){if(i&&o.assert(this.m_bodyCount>0),i&&o.assert(0==this.isLocked()),!this.isLocked()){if(t.m_destroyed)return!1;for(var e=t.m_jointList;e;){var s=e;e=e.next,this.publish("remove-joint",s.joint),this.destroyJoint(s.joint),t.m_jointList=e}t.m_jointList=null;for(var n=t.m_contactList;n;){var r=n;n=n.next,this.destroyContact(r.contact),t.m_contactList=n}t.m_contactList=null;for(var a=t.m_fixtureList;a;){var m=a;a=a.m_next,this.publish("remove-fixture",m),m.destroyProxies(this.m_broadPhase),t.m_fixtureList=a}return t.m_fixtureList=null,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),t.m_destroyed=!0,--this.m_bodyCount,this.publish("remove-body",t),!0}},u.prototype.createJoint=function(t){if(i&&o.assert(!!t.m_bodyA),i&&o.assert(!!t.m_bodyB),i&&o.assert(0==this.isLocked()),this.isLocked())return null;if(t.m_prev=null,t.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=t),this.m_jointList=t,++this.m_jointCount,t.m_edgeA.joint=t,t.m_edgeA.other=t.m_bodyB,t.m_edgeA.prev=null,t.m_edgeA.next=t.m_bodyA.m_jointList,t.m_bodyA.m_jointList&&(t.m_bodyA.m_jointList.prev=t.m_edgeA),t.m_bodyA.m_jointList=t.m_edgeA,t.m_edgeB.joint=t,t.m_edgeB.other=t.m_bodyA,t.m_edgeB.prev=null,t.m_edgeB.next=t.m_bodyB.m_jointList,t.m_bodyB.m_jointList&&(t.m_bodyB.m_jointList.prev=t.m_edgeB),t.m_bodyB.m_jointList=t.m_edgeB,0==t.m_collideConnected)for(var e=t.m_bodyB.getContactList();e;e=e.next)e.other==t.m_bodyA&&e.contact.flagForFiltering();return t},u.prototype.destroyJoint=function(t){if(i&&o.assert(0==this.isLocked()),!this.isLocked()){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var e=t.m_bodyA,s=t.m_bodyB;if(e.setAwake(!0),s.setAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==e.m_jointList&&(e.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==s.m_jointList&&(s.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,i&&o.assert(this.m_jointCount>0),--this.m_jointCount,0==t.m_collideConnected)for(var n=s.getContactList();n;)n.other==e&&n.contact.flagForFiltering(),n=n.next;this.publish("remove-joint",t)}};var p=new a.TimeStep;u.prototype.step=function(t,e,i){if(this.publish("pre-step",t),(0|e)!==e&&(e=0),e=e||this.m_velocityIterations,i=i||this.m_positionIterations,this.m_newFixture&&(this.findNewContacts(),this.m_newFixture=!1),this.m_locked=!0,p.reset(t),p.velocityIterations=e,p.positionIterations=i,p.warmStarting=this.m_warmStarting,p.blockSolve=this.m_blockSolve,this.updateContacts(),this.m_stepComplete&&t>0){this.m_solver.solveWorld(p);for(var s=this.m_bodyList;s;s=s.getNext())0!=s.m_islandFlag&&(s.isStatic()||s.synchronizeFixtures());this.findNewContacts()}this.m_continuousPhysics&&t>0&&this.m_solver.solveWorldTOI(p),this.m_clearForces&&this.clearForces(),this.m_locked=!1,this.publish("post-step",t)},u.prototype.findNewContacts=function(){this.m_broadPhase.updatePairs(this.addPair)},u.prototype.createContact=function(t,e){var i=t.fixture,s=e.fixture,o=t.childIndex,n=e.childIndex,r=i.getBody(),a=s.getBody();if(r!=a){for(var m=a.getContactList();m;){if(m.other==r){var h=m.contact.getFixtureA(),c=m.contact.getFixtureB(),l=m.contact.getChildIndexA(),u=m.contact.getChildIndexB();if(h==i&&c==s&&l==o&&u==n)return;if(h==s&&c==i&&l==n&&u==o)return}m=m.next}if(0!=a.shouldCollide(r)&&0!=s.shouldCollide(i)){var p=_.create(i,o,s,n);null!=p&&(p.m_prev=null,null!=this.m_contactList&&(p.m_next=this.m_contactList,this.m_contactList.m_prev=p),this.m_contactList=p,++this.m_contactCount)}}},u.prototype.updateContacts=function(){for(var t,e=this.m_contactList;t=e;){e=t.getNext();var i=t.getFixtureA(),s=t.getFixtureB(),o=t.getChildIndexA(),n=t.getChildIndexB(),r=i.getBody(),a=s.getBody();if(t.m_filterFlag){if(0==a.shouldCollide(r)){this.destroyContact(t);continue}if(0==s.shouldCollide(i)){this.destroyContact(t);continue}t.m_filterFlag=!1}var m=r.isAwake()&&!r.isStatic(),h=a.isAwake()&&!a.isStatic();if(0!=m||0!=h){var c=i.m_proxies[o].proxyId,_=s.m_proxies[n].proxyId;0!=this.m_broadPhase.testOverlap(c,_)?t.update(this):this.destroyContact(t)}}},u.prototype.destroyContact=function(t){_.destroy(t,this),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_contactList&&(this.m_contactList=t.m_next),--this.m_contactCount},u.prototype._listeners=null,u.prototype.on=function(t,e){return"string"!=typeof t||"function"!=typeof e||(this._listeners||(this._listeners={}),this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)),this},u.prototype.off=function(t,e){if("string"!=typeof t||"function"!=typeof e)return this;var i=this._listeners&&this._listeners[t];if(!i||!i.length)return this;var s=i.indexOf(e);return s>=0&&i.splice(s,1),this},u.prototype.publish=function(t,e,i,s){var o=this._listeners&&this._listeners[t];if(!o||!o.length)return 0;for(var n=0;n<o.length;n++)o[n].call(this,e,i,s);return o.length},u.prototype.beginContact=function(t){this.publish("begin-contact",t)},u.prototype.endContact=function(t){this.publish("end-contact",t)},u.prototype.preSolve=function(t,e){this.publish("pre-solve",t,e)},u.prototype.postSolve=function(t,e){this.publish("post-solve",t,e)}})),h.register("ecDm3",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,Object.prototype.propertyIsEnumerable;t.exports=function(t,e){null==t&&(t={});var i=Object.assign({},t);for(var s in e)e.hasOwnProperty(s)&&void 0===t[s]&&(i[s]=e[s]);if("function"==typeof Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),n=0;n<o.length;n++){var r=o[n];e.propertyIsEnumerable(r)&&void 0===t[s]&&(i[r]=e[r])}return i}})),h.register("bVyf9",(function(e,i){var s,o;t(e.exports,"debug",(()=>s),(t=>s=t)),t(e.exports,"assert",(()=>o),(t=>o=t));var n="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT;s=function(){n&&console.log.apply(console,arguments)},o=function(t,e,i){if(r&&!t)throw i&&console.log(i),new Error(e)}})),h.register("8o39l",(function(t,e){var i="undefined"!=typeof DEBUG&&DEBUG,s="undefined"!=typeof ASSERT&&ASSERT;t.exports=r;var o=h("bVyf9"),n=h("aah62");function r(t,e){if(!(this instanceof r))return new r(t,e);void 0===t?(this.x=0,this.y=0):"object"==typeof t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),s&&r.assert(this)}r.prototype._serialize=function(){return{x:this.x,y:this.y}},r._deserialize=function(t){var e=Object.create(r.prototype);return e.x=t.x,e.y=t.y,e},r.zero=function(){var t=Object.create(r.prototype);return t.x=0,t.y=0,t},r.neo=function(t,e){var i=Object.create(r.prototype);return i.x=t,i.y=e,i},r.clone=function(t){return s&&r.assert(t),r.neo(t.x,t.y)},r.prototype.toString=function(){return JSON.stringify(this)},r.isValid=function(t){return t&&n.isFinite(t.x)&&n.isFinite(t.y)},r.assert=function(t){if(s&&!r.isValid(t))throw i&&o.debug(t),new Error("Invalid Vec2!")},r.prototype.clone=function(){return r.clone(this)},r.prototype.setZero=function(){return this.x=0,this.y=0,this},r.prototype.set=function(t,e){return"object"==typeof t?(s&&r.assert(t),this.x=t.x,this.y=t.y):(s&&n.assert(t),s&&n.assert(e),this.x=t,this.y=e),this},r.prototype.wSet=function(t,e,i,s){return void 0!==i||void 0!==s?this.setCombine(t,e,i,s):this.setMul(t,e)},r.prototype.setCombine=function(t,e,i,o){s&&n.assert(t),s&&r.assert(e),s&&n.assert(i),s&&r.assert(o);var a=t*e.x+i*o.x,m=t*e.y+i*o.y;return this.x=a,this.y=m,this},r.prototype.setMul=function(t,e){s&&n.assert(t),s&&r.assert(e);var i=t*e.x,o=t*e.y;return this.x=i,this.y=o,this},r.prototype.add=function(t){return s&&r.assert(t),this.x+=t.x,this.y+=t.y,this},r.prototype.wAdd=function(t,e,i,s){return void 0!==i||void 0!==s?this.addCombine(t,e,i,s):this.addMul(t,e)},r.prototype.addCombine=function(t,e,i,o){s&&n.assert(t),s&&r.assert(e),s&&n.assert(i),s&&r.assert(o);var a=t*e.x+i*o.x,m=t*e.y+i*o.y;return this.x+=a,this.y+=m,this},r.prototype.addMul=function(t,e){s&&n.assert(t),s&&r.assert(e);var i=t*e.x,o=t*e.y;return this.x+=i,this.y+=o,this},r.prototype.wSub=function(t,e,i,s){return void 0!==i||void 0!==s?this.subCombine(t,e,i,s):this.subMul(t,e)},r.prototype.subCombine=function(t,e,i,o){s&&n.assert(t),s&&r.assert(e),s&&n.assert(i),s&&r.assert(o);var a=t*e.x+i*o.x,m=t*e.y+i*o.y;return this.x-=a,this.y-=m,this},r.prototype.subMul=function(t,e){s&&n.assert(t),s&&r.assert(e);var i=t*e.x,o=t*e.y;return this.x-=i,this.y-=o,this},r.prototype.sub=function(t){return s&&r.assert(t),this.x-=t.x,this.y-=t.y,this},r.prototype.mul=function(t){return s&&n.assert(t),this.x*=t,this.y*=t,this},r.prototype.length=function(){return r.lengthOf(this)},r.prototype.lengthSquared=function(){return r.lengthSquared(this)},r.prototype.normalize=function(){var t=this.length();if(t<n.EPSILON)return 0;var e=1/t;return this.x*=e,this.y*=e,t},r.lengthOf=function(t){return s&&r.assert(t),n.sqrt(t.x*t.x+t.y*t.y)},r.lengthSquared=function(t){return s&&r.assert(t),t.x*t.x+t.y*t.y},r.distance=function(t,e){s&&r.assert(t),s&&r.assert(e);var i=t.x-e.x,o=t.y-e.y;return n.sqrt(i*i+o*o)},r.distanceSquared=function(t,e){s&&r.assert(t),s&&r.assert(e);var i=t.x-e.x,o=t.y-e.y;return i*i+o*o},r.areEqual=function(t,e){return s&&r.assert(t),s&&r.assert(e),t==e||"object"==typeof e&&null!==e&&t.x===e.x&&t.y===e.y},r.skew=function(t){return s&&r.assert(t),r.neo(-t.y,t.x)},r.dot=function(t,e){return s&&r.assert(t),s&&r.assert(e),t.x*e.x+t.y*e.y},r.cross=function(t,e){return"number"==typeof e?(s&&r.assert(t),s&&n.assert(e),r.neo(e*t.y,-e*t.x)):"number"==typeof t?(s&&n.assert(t),s&&r.assert(e),r.neo(-t*e.y,t*e.x)):(s&&r.assert(t),s&&r.assert(e),t.x*e.y-t.y*e.x)},r.addCross=function(t,e,i){return"number"==typeof i?(s&&r.assert(e),s&&n.assert(i),r.neo(i*e.y+t.x,-i*e.x+t.y)):"number"==typeof e?(s&&n.assert(e),s&&r.assert(i),r.neo(-e*i.y+t.x,e*i.x+t.y)):void(s&&o.assert(!1))},r.add=function(t,e){return s&&r.assert(t),s&&r.assert(e),r.neo(t.x+e.x,t.y+e.y)},r.wAdd=function(t,e,i,s){return void 0!==i||void 0!==s?r.combine(t,e,i,s):r.mul(t,e)},r.combine=function(t,e,i,s){return r.zero().setCombine(t,e,i,s)},r.sub=function(t,e){return s&&r.assert(t),s&&r.assert(e),r.neo(t.x-e.x,t.y-e.y)},r.mul=function(t,e){return"object"==typeof t?(s&&r.assert(t),s&&n.assert(e),r.neo(t.x*e,t.y*e)):"object"==typeof e?(s&&n.assert(t),s&&r.assert(e),r.neo(t*e.x,t*e.y)):void 0},r.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},r.neg=function(t){return s&&r.assert(t),r.neo(-t.x,-t.y)},r.abs=function(t){return s&&r.assert(t),r.neo(n.abs(t.x),n.abs(t.y))},r.mid=function(t,e){return s&&r.assert(t),s&&r.assert(e),r.neo(.5*(t.x+e.x),.5*(t.y+e.y))},r.upper=function(t,e){return s&&r.assert(t),s&&r.assert(e),r.neo(n.max(t.x,e.x),n.max(t.y,e.y))},r.lower=function(t,e){return s&&r.assert(t),s&&r.assert(e),r.neo(n.min(t.x,e.x),n.min(t.y,e.y))},r.prototype.clamp=function(t){var e=this.x*this.x+this.y*this.y;if(e>t*t){var i=n.invSqrt(e);this.x*=i*t,this.y*=i*t}return this},r.clamp=function(t,e){return(t=r.neo(t.x,t.y)).clamp(e),t},r.scaleFn=function(t,e){return function(i){return r.neo(i.x*t,i.y*e)}},r.translateFn=function(t,e){return function(i){return r.neo(i.x+t,i.y+e)}}})),h.register("aah62",(function(t,e){var i="undefined"!=typeof DEBUG&&DEBUG,s="undefined"!=typeof ASSERT&&ASSERT,o=h("bVyf9"),n=Math,r=t.exports=Object.create(n);r.EPSILON=1e-9,r.isFinite=function(t){return"number"==typeof t&&isFinite(t)&&!isNaN(t)},r.assert=function(t){if(s&&!r.isFinite(t))throw i&&o.debug(t),new Error("Invalid Number!")},r.invSqrt=function(t){return 1/n.sqrt(t)},r.nextPowerOfTwo=function(t){return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1},r.isPowerOfTwo=function(t){return t>0&&0==(t&t-1)},r.mod=function(t,e,i){return void 0===e?(i=1,e=0):void 0===i&&(i=e,e=0),i>e?(t=(t-e)%(i-e))+(t<0?i:e):(t=(t-i)%(e-i))+(t<=0?e:i)},r.clamp=function(t,e,i){return t<e?e:t>i?i:t},r.random=function(t,e){return void 0===t?(e=1,t=0):void 0===e&&(e=t,t=0),t==e?t:n.random()*(e-t)+t}})),h.register("gDbaE",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;h("9MRkU");var s=h("bVyf9"),o=h("aah62"),n=h("l2alD"),r=h("gs8T1");function a(){this.m_tree=new r,this.m_proxyCount=0,this.m_moveBuffer=[],this.queryCallback=this.queryCallback.bind(this)}t.exports=a,a.prototype.getUserData=function(t){return this.m_tree.getUserData(t)},a.prototype.testOverlap=function(t,e){var i=this.m_tree.getFatAABB(t),s=this.m_tree.getFatAABB(e);return n.testOverlap(i,s)},a.prototype.getFatAABB=function(t){return this.m_tree.getFatAABB(t)},a.prototype.getProxyCount=function(){return this.m_proxyCount},a.prototype.getTreeHeight=function(){return this.m_tree.getHeight()},a.prototype.getTreeBalance=function(){return this.m_tree.getMaxBalance()},a.prototype.getTreeQuality=function(){return this.m_tree.getAreaRatio()},a.prototype.query=function(t,e){this.m_tree.query(t,e)},a.prototype.rayCast=function(t,e){this.m_tree.rayCast(t,e)},a.prototype.shiftOrigin=function(t){this.m_tree.shiftOrigin(t)},a.prototype.createProxy=function(t,e){i&&s.assert(n.isValid(t));var o=this.m_tree.createProxy(t,e);return this.m_proxyCount++,this.bufferMove(o),o},a.prototype.destroyProxy=function(t){this.unbufferMove(t),this.m_proxyCount--,this.m_tree.destroyProxy(t)},a.prototype.moveProxy=function(t,e,o){i&&s.assert(n.isValid(e)),this.m_tree.moveProxy(t,e,o)&&this.bufferMove(t)},a.prototype.touchProxy=function(t){this.bufferMove(t)},a.prototype.bufferMove=function(t){this.m_moveBuffer.push(t)},a.prototype.unbufferMove=function(t){for(var e=0;e<this.m_moveBuffer.length;++e)this.m_moveBuffer[e]==t&&(this.m_moveBuffer[e]=null)},a.prototype.updatePairs=function(t){for(i&&s.assert("function"==typeof t),this.m_callback=t;this.m_moveBuffer.length>0;)if(this.m_queryProxyId=this.m_moveBuffer.pop(),null!==this.m_queryProxyId){var e=this.m_tree.getFatAABB(this.m_queryProxyId);this.m_tree.query(e,this.queryCallback)}},a.prototype.queryCallback=function(t){if(t==this.m_queryProxyId)return!0;var e=o.min(t,this.m_queryProxyId),i=o.max(t,this.m_queryProxyId),s=this.m_tree.getUserData(e),n=this.m_tree.getUserData(i);return this.m_callback(s,n),!0}})),h.register("9MRkU",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var i=t.exports;i.maxManifoldPoints=2,i.maxPolygonVertices=12,i.aabbExtension=.1,i.aabbMultiplier=2,i.linearSlop=.005,i.linearSlopSquared=i.linearSlop*i.linearSlop,i.angularSlop=2/180*Math.PI,i.polygonRadius=2*i.linearSlop,i.maxSubSteps=8,i.maxTOIContacts=32,i.maxTOIIterations=20,i.maxDistnceIterations=20,i.velocityThreshold=1,i.maxLinearCorrection=.2,i.maxAngularCorrection=8/180*Math.PI,i.maxTranslation=2,i.maxTranslationSquared=i.maxTranslation*i.maxTranslation,i.maxRotation=.5*Math.PI,i.maxRotationSquared=i.maxRotation*i.maxRotation,i.baumgarte=.2,i.toiBaugarte=.75,i.timeToSleep=.5,i.linearSleepTolerance=.01,i.linearSleepToleranceSqr=Math.pow(i.linearSleepTolerance,2),i.angularSleepTolerance=2/180*Math.PI,i.angularSleepToleranceSqr=Math.pow(i.angularSleepTolerance,2)})),h.register("l2alD",(function(t,e){var i="undefined"!=typeof DEBUG&&DEBUG,s="undefined"!=typeof ASSERT&&ASSERT;h("9MRkU");var o=h("bVyf9"),n=h("aah62"),r=h("8o39l");function a(t,e){if(!(this instanceof a))return new a(t,e);this.lowerBound=r.zero(),this.upperBound=r.zero(),"object"==typeof t&&this.lowerBound.set(t),"object"==typeof e?this.upperBound.set(e):"object"==typeof t&&this.upperBound.set(t)}t.exports=a,a.prototype.isValid=function(){return a.isValid(this)},a.isValid=function(t){var e=r.sub(t.upperBound,t.lowerBound);return e.x>=0&&e.y>=0&&r.isValid(t.lowerBound)&&r.isValid(t.upperBound)},a.assert=function(t){if(s&&!a.isValid(t))throw i&&o.debug(t),new Error("Invalid AABB!")},a.prototype.getCenter=function(){return r.neo(.5*(this.lowerBound.x+this.upperBound.x),.5*(this.lowerBound.y+this.upperBound.y))},a.prototype.getExtents=function(){return r.neo(.5*(this.upperBound.x-this.lowerBound.x),.5*(this.upperBound.y-this.lowerBound.y))},a.prototype.getPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+this.upperBound.y-this.lowerBound.y)},a.prototype.combine=function(t,e){e=e||this;var i=t.lowerBound,s=t.upperBound,o=e.lowerBound,r=e.upperBound,a=n.min(i.x,o.x),m=n.min(i.y,o.y),h=n.max(r.x,s.x),c=n.max(r.y,s.y);this.lowerBound.set(a,m),this.upperBound.set(h,c)},a.prototype.combinePoints=function(t,e){this.lowerBound.set(n.min(t.x,e.x),n.min(t.y,e.y)),this.upperBound.set(n.max(t.x,e.x),n.max(t.y,e.y))},a.prototype.set=function(t){this.lowerBound.set(t.lowerBound.x,t.lowerBound.y),this.upperBound.set(t.upperBound.x,t.upperBound.y)},a.prototype.contains=function(t){var e=!0;return e=(e=(e=(e=e&&this.lowerBound.x<=t.lowerBound.x)&&this.lowerBound.y<=t.lowerBound.y)&&t.upperBound.x<=this.upperBound.x)&&t.upperBound.y<=this.upperBound.y},a.prototype.extend=function(t){return a.extend(this,t),this},a.extend=function(t,e){t.lowerBound.x-=e,t.lowerBound.y-=e,t.upperBound.x+=e,t.upperBound.y+=e},a.testOverlap=function(t,e){var i=e.lowerBound.x-t.upperBound.x,s=t.lowerBound.x-e.upperBound.x,o=e.lowerBound.y-t.upperBound.y,n=t.lowerBound.y-e.upperBound.y;return!(i>0||o>0||s>0||n>0)},a.areEqual=function(t,e){return r.areEqual(t.lowerBound,e.lowerBound)&&r.areEqual(t.upperBound,e.upperBound)},a.diff=function(t,e){var i=n.max(0,n.min(t.upperBound.x,e.upperBound.x)-n.max(e.lowerBound.x,t.lowerBound.x)),s=n.max(0,n.min(t.upperBound.y,e.upperBound.y)-n.max(e.lowerBound.y,t.lowerBound.y));return(t.upperBound.x-t.lowerBound.x)*(t.upperBound.y-t.lowerBound.y)+(e.upperBound.x-e.lowerBound.x)*(e.upperBound.y-e.lowerBound.y)-i*s},a.prototype.rayCast=function(t,e){for(var i=-1/0,s=1/0,o=e.p1,a=r.sub(e.p2,e.p1),m=r.abs(a),h=r.zero(),c="x";null!==c;c="x"===c?"y":null)if(m.x<n.EPSILON){if(o[c]<this.lowerBound[c]||this.upperBound[c]<o[c])return!1}else{var _=1/a[c],l=(this.lowerBound[c]-o[c])*_,u=(this.upperBound[c]-o[c])*_,p=-1;if(l>u){var y=l;l=u,u=y,p=1}if(l>i&&(h.setZero(),h[c]=p,i=l),i>(s=n.min(s,u)))return!1}return!(i<0||e.maxFraction<i)&&(t.fraction=i,t.normal=h,!0)},a.prototype.toString=function(){return JSON.stringify(this)}})),h.register("gs8T1",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT,s=h("9MRkU"),o=h("bVyf9"),n=h("iynuR"),r=h("8o39l"),a=h("aah62"),m=h("l2alD");function c(t){this.id=t,this.aabb=new m,this.userData=null,this.parent=null,this.child1=null,this.child2=null,this.height=-1,this.toString=function(){return this.id+": "+this.userData}}function _(){this.m_root=null,this.m_nodes={},this.m_lastProxyId=0,this.m_pool=new n({create:function(){return new c}})}t.exports=_,c.prototype.isLeaf=function(){return null==this.child1},_.prototype.getUserData=function(t){var e=this.m_nodes[t];return i&&o.assert(!!e),e.userData},_.prototype.getFatAABB=function(t){var e=this.m_nodes[t];return i&&o.assert(!!e),e.aabb},_.prototype.allocateNode=function(){var t=this.m_pool.allocate();return t.id=++this.m_lastProxyId,t.userData=null,t.parent=null,t.child1=null,t.child2=null,t.height=-1,this.m_nodes[t.id]=t,t},_.prototype.freeNode=function(t){this.m_pool.release(t),t.height=-1,delete this.m_nodes[t.id]},_.prototype.createProxy=function(t,e){i&&o.assert(m.isValid(t));var n=this.allocateNode();return n.aabb.set(t),m.extend(n.aabb,s.aabbExtension),n.userData=e,n.height=0,this.insertLeaf(n),n.id},_.prototype.destroyProxy=function(t){var e=this.m_nodes[t];i&&o.assert(!!e),i&&o.assert(e.isLeaf()),this.removeLeaf(e),this.freeNode(e)},_.prototype.moveProxy=function(t,e,n){i&&o.assert(m.isValid(e)),i&&o.assert(!n||r.isValid(n));var a=this.m_nodes[t];return i&&o.assert(!!a),i&&o.assert(a.isLeaf()),!a.aabb.contains(e)&&(this.removeLeaf(a),a.aabb.set(e),e=a.aabb,m.extend(e,s.aabbExtension),n.x<0?e.lowerBound.x+=n.x*s.aabbMultiplier:e.upperBound.x+=n.x*s.aabbMultiplier,n.y<0?e.lowerBound.y+=n.y*s.aabbMultiplier:e.upperBound.y+=n.y*s.aabbMultiplier,this.insertLeaf(a),!0)},_.prototype.insertLeaf=function(t){if(i&&o.assert(m.isValid(t.aabb)),null==this.m_root)return this.m_root=t,void(this.m_root.parent=null);for(var e=t.aabb,s=this.m_root;0==s.isLeaf();){var n=s.child1,r=s.child2,h=s.aabb.getPerimeter(),c=new m;c.combine(s.aabb,e);var _,l,u=c.getPerimeter(),p=2*u,y=2*(u-h);if(n.isLeaf()){(f=new m).combine(e,n.aabb),_=f.getPerimeter()+y}else{(f=new m).combine(e,n.aabb);var d=n.aabb.getPerimeter();_=f.getPerimeter()-d+y}if(r.isLeaf()){(f=new m).combine(e,r.aabb),l=f.getPerimeter()+y}else{var f;(f=new m).combine(e,r.aabb);d=r.aabb.getPerimeter();l=f.getPerimeter()-d+y}if(p<_&&p<l)break;s=_<l?n:r}var v=s,A=v.parent,x=this.allocateNode();for(x.parent=A,x.userData=null,x.aabb.combine(e,v.aabb),x.height=v.height+1,null!=A?(A.child1==v?A.child1=x:A.child2=x,x.child1=v,x.child2=t,v.parent=x,t.parent=x):(x.child1=v,x.child2=t,v.parent=x,t.parent=x,this.m_root=x),s=t.parent;null!=s;){n=(s=this.balance(s)).child1,r=s.child2;i&&o.assert(null!=n),i&&o.assert(null!=r),s.height=1+a.max(n.height,r.height),s.aabb.combine(n.aabb,r.aabb),s=s.parent}},_.prototype.removeLeaf=function(t){if(t!=this.m_root){var e,i=t.parent,s=i.parent;if(e=i.child1==t?i.child2:i.child1,null!=s){s.child1==i?s.child1=e:s.child2=e,e.parent=s,this.freeNode(i);for(var o=s;null!=o;){var n=(o=this.balance(o)).child1,r=o.child2;o.aabb.combine(n.aabb,r.aabb),o.height=1+a.max(n.height,r.height),o=o.parent}}else this.m_root=e,e.parent=null,this.freeNode(i)}else this.m_root=null},_.prototype.balance=function(t){i&&o.assert(null!=t);var e=t;if(e.isLeaf()||e.height<2)return t;var s=e.child1,n=e.child2,r=n.height-s.height;if(r>1){var m=n.child1,h=n.child2;return n.child1=e,n.parent=e.parent,e.parent=n,null!=n.parent?n.parent.child1==t?n.parent.child1=n:n.parent.child2=n:this.m_root=n,m.height>h.height?(n.child2=m,e.child2=h,h.parent=e,e.aabb.combine(s.aabb,h.aabb),n.aabb.combine(e.aabb,m.aabb),e.height=1+a.max(s.height,h.height),n.height=1+a.max(e.height,m.height)):(n.child2=h,e.child2=m,m.parent=e,e.aabb.combine(s.aabb,m.aabb),n.aabb.combine(e.aabb,h.aabb),e.height=1+a.max(s.height,m.height),n.height=1+a.max(e.height,h.height)),n}if(r<-1){var c=s.child1,_=s.child2;return s.child1=e,s.parent=e.parent,e.parent=s,null!=s.parent?s.parent.child1==e?s.parent.child1=s:s.parent.child2=s:this.m_root=s,c.height>_.height?(s.child2=c,e.child1=_,_.parent=e,e.aabb.combine(n.aabb,_.aabb),s.aabb.combine(e.aabb,c.aabb),e.height=1+a.max(n.height,_.height),s.height=1+a.max(e.height,c.height)):(s.child2=_,e.child1=c,c.parent=e,e.aabb.combine(n.aabb,c.aabb),s.aabb.combine(e.aabb,_.aabb),e.height=1+a.max(n.height,c.height),s.height=1+a.max(e.height,_.height)),s}return e},_.prototype.getHeight=function(){return null==this.m_root?0:this.m_root.height},_.prototype.getAreaRatio=function(){if(null==this.m_root)return 0;for(var t,e=this.m_root.aabb.getPerimeter(),i=0,s=p.allocate().preorder(this.m_root);t=s.next();)t.height<0||(i+=t.aabb.getPerimeter());return p.release(s),i/e},_.prototype.computeHeight=function(t){var e;if((e=void 0!==t?this.m_nodes[t]:this.m_root).isLeaf())return 0;var i=this.computeHeight(e.child1.id),s=this.computeHeight(e.child2.id);return 1+a.max(i,s)},_.prototype.validateStructure=function(t){if(null!=t){t==this.m_root&&i&&o.assert(null==t.parent);var e=t.child1,s=t.child2;if(t.isLeaf())return i&&o.assert(null==e),i&&o.assert(null==s),void(i&&o.assert(0==t.height));i&&o.assert(e.parent==t),i&&o.assert(s.parent==t),this.validateStructure(e),this.validateStructure(s)}},_.prototype.validateMetrics=function(t){if(null!=t){var e=t.child1,s=t.child2;if(t.isLeaf())return i&&o.assert(null==e),i&&o.assert(null==s),void(i&&o.assert(0==t.height));var n=e.height,r=s.height,h=1+a.max(n,r);i&&o.assert(t.height==h);var c=new m;c.combine(e.aabb,s.aabb),i&&o.assert(m.areEqual(c,t.aabb)),this.validateMetrics(e),this.validateMetrics(s)}},_.prototype.validate=function(){this.validateStructure(this.m_root),this.validateMetrics(this.m_root),i&&o.assert(this.getHeight()==this.computeHeight())},_.prototype.getMaxBalance=function(){for(var t,e=0,s=p.allocate().preorder(this.m_root);t=s.next();)if(!(t.height<=1)){i&&o.assert(0==t.isLeaf());var n=a.abs(t.child2.height-t.child1.height);e=a.max(e,n)}return p.release(s),e},_.prototype.rebuildBottomUp=function(){for(var t,e=[],i=0,s=p.allocate().preorder(this.m_root);t=s.next();)t.height<0||(t.isLeaf()?(t.parent=null,e[i]=t,++i):this.freeNode(t));for(p.release(s);i>1;){for(var o=1/0,n=-1,r=-1,h=0;h<i;++h)for(var c=e[h].aabb,_=h+1;_<i;++_){var l=e[_].aabb,u=new m;u.combine(c,l);var y=u.getPerimeter();y<o&&(n=h,r=_,o=y)}var d=e[n],f=e[r],v=this.allocateNode();v.child1=d,v.child2=f,v.height=1+a.max(d.height,f.height),v.aabb.combine(d.aabb,f.aabb),v.parent=null,d.parent=v,f.parent=v,e[r]=e[i-1],e[n]=v,--i}this.m_root=e[0],this.validate()},_.prototype.shiftOrigin=function(t){for(var e,i=p.allocate().preorder(this.m_root);e=i.next();){var s=e.aabb;s.lowerBound.x-=t.x,s.lowerBound.y-=t.y,s.upperBound.x-=t.x,s.upperBound.y-=t.y}p.release(i)},_.prototype.query=function(t,e){i&&o.assert("function"==typeof e);var s=u.allocate();for(s.push(this.m_root);s.length>0;){var n=s.pop();if(null!=n)if(m.testOverlap(n.aabb,t))if(n.isLeaf()){if(0==e(n.id))return}else s.push(n.child1),s.push(n.child2)}u.release(s)},_.prototype.rayCast=function(t,e){i&&o.assert("function"==typeof e);var s=t.p1,n=t.p2,h=r.sub(n,s);i&&o.assert(h.lengthSquared()>0),h.normalize();var c=r.cross(1,h),_=r.abs(c),p=t.maxFraction,y=new m,d=r.combine(1-p,s,p,n);y.combinePoints(s,d);var f=u.allocate(),v=l.allocate();for(f.push(this.m_root);f.length>0;){var A=f.pop();if(null!=A&&0!=m.testOverlap(A.aabb,y)){var x=A.aabb.getCenter(),b=A.aabb.getExtents();if(!(a.abs(r.dot(c,r.sub(s,x)))-r.dot(_,b)>0))if(A.isLeaf()){v.p1=r.clone(t.p1),v.p2=r.clone(t.p2),v.maxFraction=p;var g=e(v,A.id);if(0==g)return;g>0&&(p=g,d=r.combine(1-p,s,p,n),y.combinePoints(s,d))}else f.push(A.child1),f.push(A.child2)}}u.release(f),l.release(v)};var l=new n({create:function(){return{}},release:function(t){}}),u=new n({create:function(){return[]},release:function(t){t.length=0}}),p=new n({create:function(){return new y},release:function(t){t.close()}});function y(){var t=[],e=[];return{preorder:function(i){return t.length=0,t.push(i),e.length=0,e.push(0),this},next:function(){for(;t.length>0;){var i=t.length-1,s=t[i];if(0===e[i])return e[i]=1,s;if(1===e[i]&&(e[i]=2,s.child1))return t.push(s.child1),e.push(1),s.child1;if(2===e[i]&&(e[i]=3,s.child2))return t.push(s.child2),e.push(1),s.child2;t.pop(),e.pop()}},close:function(){t.length=0}}}})),h.register("iynuR",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=function(t){var e=[],i=t.max||1/0,s=t.create,o=t.allocate,n=t.release,r=t.discard,a=0,m=0,h=0,c=0;this.max=function(t){return"number"==typeof t?(i=t,this):i},this.size=function(){return e.length},this.allocate=function(){var t;return e.length>0?t=e.shift():(a++,t="function"==typeof s?s():{}),m++,"function"==typeof o&&o(t),t},this.release=function(t){e.length<i?(h++,"function"==typeof n&&n(t),e.push(t)):(c++,"function"==typeof r&&(t=r(t)))},this.toString=function(){return" +"+a+" >"+m+" <"+h+" -"+c+" ="+e.length+"/"+i}}})),h.register("byzhY",(function(t,e){var i="undefined"!=typeof DEBUG&&DEBUG,s="undefined"!=typeof ASSERT&&ASSERT;t.exports=f,t.exports.TimeStep=d;var o=h("9MRkU"),n=h("bVyf9"),r=h("8o39l"),a=h("aah62"),m=h("8kh7u"),c=h("f6rGq"),_=h("jrVnt"),l=h("hYw2e"),u=l.Input,p=l.Output,y=h("6KczB");y.Input,y.Output,y.Proxy,y.Cache;function d(t){this.dt=0,this.inv_dt=0,this.velocityIterations=0,this.positionIterations=0,this.warmStarting=!1,this.blockSolve=!0,this.inv_dt0=0,this.dtRatio=1}function f(t){this.m_world=t,this.m_stack=[],this.m_bodies=[],this.m_contacts=[],this.m_joints=[]}d.prototype.reset=function(t){this.dt>0&&(this.inv_dt0=this.inv_dt),this.dt=t,this.inv_dt=0==t?0:1/t,this.dtRatio=t*this.inv_dt0},f.prototype.clear=function(){this.m_stack.length=0,this.m_bodies.length=0,this.m_contacts.length=0,this.m_joints.length=0},f.prototype.addBody=function(t){s&&n.assert(t instanceof m,"Not a Body!",t),this.m_bodies.push(t)},f.prototype.addContact=function(t){s&&n.assert(t instanceof c,"Not a Contact!",t),this.m_contacts.push(t)},f.prototype.addJoint=function(t){s&&n.assert(t instanceof _,"Not a Joint!",t),this.m_joints.push(t)},f.prototype.solveWorld=function(t){for(var e=this.m_world,i=e.m_bodyList;i;i=i.m_next)i.m_islandFlag=!1;for(var o=e.m_contactList;o;o=o.m_next)o.m_islandFlag=!1;for(var r=e.m_jointList;r;r=r.m_next)r.m_islandFlag=!1;for(var a=this.m_stack,m=e.m_bodyList;m;m=m.m_next)if(!m.m_islandFlag&&0!=m.isAwake()&&0!=m.isActive()&&!m.isStatic()){for(this.clear(),a.push(m),m.m_islandFlag=!0;a.length>0;){i=a.pop();if(s&&n.assert(1==i.isActive()),this.addBody(i),i.setAwake(!0),!i.isStatic()){for(var h=i.m_contactList;h;h=h.next){var c=h.contact;if(!c.m_islandFlag&&(0!=c.isEnabled()&&0!=c.isTouching())){var _=c.m_fixtureA.m_isSensor,l=c.m_fixtureB.m_isSensor;if(!_&&!l)this.addContact(c),c.m_islandFlag=!0,(p=h.other).m_islandFlag||(a.push(p),p.m_islandFlag=!0)}}for(var u=i.m_jointList;u;u=u.next){var p;if(1!=u.joint.m_islandFlag)0!=(p=u.other).isActive()&&(this.addJoint(u.joint),u.joint.m_islandFlag=!0,p.m_islandFlag||(a.push(p),p.m_islandFlag=!0))}}}this.solveIsland(t);for(var y=0;y<this.m_bodies.length;++y){(i=this.m_bodies[y]).isStatic()&&(i.m_islandFlag=!1)}}},f.prototype.solveIsland=function(t){for(var e=this.m_world,s=e.m_gravity,n=e.m_allowSleep,m=t.dt,h=0;h<this.m_bodies.length;++h){var c=this.m_bodies[h],_=r.clone(c.m_sweep.c),l=c.m_sweep.a,u=r.clone(c.m_linearVelocity),p=c.m_angularVelocity;c.m_sweep.c0.set(c.m_sweep.c),c.m_sweep.a0=c.m_sweep.a,c.isDynamic()&&(u.addMul(m*c.m_gravityScale,s),u.addMul(m*c.m_invMass,c.m_force),p+=m*c.m_invI*c.m_torque,u.mul(1/(1+m*c.m_linearDamping)),p*=1/(1+m*c.m_angularDamping)),c.c_position.c=_,c.c_position.a=l,c.c_velocity.v=u,c.c_velocity.w=p}for(h=0;h<this.m_contacts.length;++h){this.m_contacts[h].initConstraint(t)}i&&this.printBodies("M: ");for(h=0;h<this.m_contacts.length;++h){this.m_contacts[h].initVelocityConstraint(t)}if(i&&this.printBodies("R: "),t.warmStarting)for(h=0;h<this.m_contacts.length;++h){this.m_contacts[h].warmStartConstraint(t)}i&&this.printBodies("Q: ");for(h=0;h<this.m_joints.length;++h){this.m_joints[h].initVelocityConstraints(t)}i&&this.printBodies("E: ");for(h=0;h<t.velocityIterations;++h){for(var y=0;y<this.m_joints.length;++y){this.m_joints[y].solveVelocityConstraints(t)}for(y=0;y<this.m_contacts.length;++y){this.m_contacts[y].solveVelocityConstraint(t)}}i&&this.printBodies("D: ");for(h=0;h<this.m_contacts.length;++h){this.m_contacts[h].storeConstraintImpulses(t)}i&&this.printBodies("C: ");for(h=0;h<this.m_bodies.length;++h){c=this.m_bodies[h],_=r.clone(c.c_position.c),l=c.c_position.a,u=r.clone(c.c_velocity.v),p=c.c_velocity.w;var d=r.mul(m,u);if(r.lengthSquared(d)>o.maxTranslationSquared){var f=o.maxTranslation/d.length();u.mul(f)}var v=m*p;if(v*v>o.maxRotationSquared)p*=f=o.maxRotation/a.abs(v);_.addMul(m,u),l+=m*p,c.c_position.c.set(_),c.c_position.a=l,c.c_velocity.v.set(u),c.c_velocity.w=p}i&&this.printBodies("B: ");var A=!1;for(h=0;h<t.positionIterations;++h){var x=0;for(y=0;y<this.m_contacts.length;++y){var b=this.m_contacts[y].solvePositionConstraint(t);x=a.min(x,b)}var g=x>=-3*o.linearSlop,B=!0;for(y=0;y<this.m_joints.length;++y){var w=this.m_joints[y].solvePositionConstraints(t);B=B&&w}if(g&&B){A=!0;break}}i&&this.printBodies("L: ");for(h=0;h<this.m_bodies.length;++h){(c=this.m_bodies[h]).m_sweep.c.set(c.c_position.c),c.m_sweep.a=c.c_position.a,c.m_linearVelocity.set(c.c_velocity.v),c.m_angularVelocity=c.c_velocity.w,c.synchronizeTransform()}if(this.postSolveIsland(),n){var M=1/0,S=o.linearSleepToleranceSqr,C=o.angularSleepToleranceSqr;for(h=0;h<this.m_bodies.length;++h){(c=this.m_bodies[h]).isStatic()||(0==c.m_autoSleepFlag||c.m_angularVelocity*c.m_angularVelocity>C||r.lengthSquared(c.m_linearVelocity)>S?(c.m_sleepTime=0,M=0):(c.m_sleepTime+=m,M=a.min(M,c.m_sleepTime)))}if(M>=o.timeToSleep&&A)for(h=0;h<this.m_bodies.length;++h){(c=this.m_bodies[h]).setAwake(!1)}}},f.prototype.printBodies=function(t){for(var e=0;e<this.m_bodies.length;++e){var i=this.m_bodies[e];n.debug(t,i.c_position.a,i.c_position.c.x,i.c_position.c.y,i.c_velocity.w,i.c_velocity.v.x,i.c_velocity.v.y)}};var v=new d;function A(){this.normalImpulses=[],this.tangentImpulses=[]}f.prototype.solveWorldTOI=function(t){var e=this.m_world;if(e.m_stepComplete){for(var r=e.m_bodyList;r;r=r.m_next)r.m_islandFlag=!1,r.m_sweep.alpha0=0;for(var m=e.m_contactList;m;m=m.m_next)m.m_toiFlag=!1,m.m_islandFlag=!1,m.m_toiCount=0,m.m_toi=1}for(;;){var h=null,c=1;for(m=e.m_contactList;m;m=m.m_next)if(0!=m.isEnabled()&&!(m.m_toiCount>o.maxSubSteps)){var _=1;if(m.m_toiFlag)_=m.m_toi;else{var y=m.getFixtureA(),d=m.getFixtureB();if(y.isSensor()||d.isSensor())continue;var f=y.getBody(),A=d.getBody();s&&n.assert(f.isDynamic()||A.isDynamic());var x=f.isAwake()&&!f.isStatic(),b=A.isAwake()&&!A.isStatic();if(0==x&&0==b)continue;var g=f.isBullet()||!f.isDynamic(),B=A.isBullet()||!A.isDynamic();if(0==g&&0==B)continue;var w=f.m_sweep.alpha0;f.m_sweep.alpha0<A.m_sweep.alpha0?(w=A.m_sweep.alpha0,f.m_sweep.advance(w)):A.m_sweep.alpha0<f.m_sweep.alpha0&&(w=f.m_sweep.alpha0,A.m_sweep.advance(w)),s&&n.assert(w<1);var M=m.getChildIndexA(),S=m.getChildIndexB(),C=(f.m_sweep,A.m_sweep,new u);C.proxyA.set(y.getShape(),M),C.proxyB.set(d.getShape(),S),C.sweepA.set(f.m_sweep),C.sweepB.set(A.m_sweep),C.tMax=1;var I=new p;l(I,C);var V=I.t;_=I.state==p.e_touching?a.min(w+(1-w)*V,1):1,m.m_toi=_,m.m_toiFlag=!0}_<c&&(h=m,c=_)}if(null==h||1-10*a.EPSILON<c){e.m_stepComplete=!0;break}y=h.getFixtureA(),d=h.getFixtureB(),f=y.getBody(),A=d.getBody();var T=f.m_sweep.clone(),P=A.m_sweep.clone();if(f.advance(c),A.advance(c),h.update(e),h.m_toiFlag=!1,++h.m_toiCount,0!=h.isEnabled()&&0!=h.isTouching()){f.setAwake(!0),A.setAwake(!0),this.clear(),this.addBody(f),this.addBody(A),this.addContact(h),f.m_islandFlag=!0,A.m_islandFlag=!0,h.m_islandFlag=!0;for(var z=[f,A],E=0;E<z.length;++E){if((j=z[E]).isDynamic())for(var F=j.m_contactList;F;F=F.next){var q=F.contact;if(!q.m_islandFlag){var L=F.other;if(!L.isDynamic()||j.isBullet()||L.isBullet()){var D=q.m_fixtureA.m_isSensor,R=q.m_fixtureB.m_isSensor;if(!D&&!R){var k=L.m_sweep.clone();0==L.m_islandFlag&&L.advance(c),q.update(e),0!=q.isEnabled()&&0!=q.isTouching()?(q.m_islandFlag=!0,this.addContact(q),L.m_islandFlag||(L.m_islandFlag=!0,L.isStatic()||L.setAwake(!0),this.addBody(L))):(L.m_sweep.set(k),L.synchronizeTransform())}}}}}v.reset((1-c)*t.dt),v.dtRatio=1,v.positionIterations=20,v.velocityIterations=t.velocityIterations,v.warmStarting=!1,this.solveIslandTOI(v,f,A);for(E=0;E<this.m_bodies.length;++E){var j;if((j=this.m_bodies[E]).m_islandFlag=!1,j.isDynamic()){j.synchronizeFixtures();for(F=j.m_contactList;F;F=F.next)F.contact.m_toiFlag=!1,F.contact.m_islandFlag=!1}}if(e.findNewContacts(),e.m_subStepping){e.m_stepComplete=!1;break}}else h.setEnabled(!1),f.m_sweep.set(T),A.m_sweep.set(P),f.synchronizeTransform(),A.synchronizeTransform()}if(i)for(r=e.m_bodyList;r;r=r.m_next)m=r.m_sweep.c,r.m_sweep.a,r.m_linearVelocity,r.m_angularVelocity},f.prototype.solveIslandTOI=function(t,e,i){this.m_world;for(var s=0;s<this.m_bodies.length;++s){(_=this.m_bodies[s]).c_position.c.set(_.m_sweep.c),_.c_position.a=_.m_sweep.a,_.c_velocity.v.set(_.m_linearVelocity),_.c_velocity.w=_.m_angularVelocity}for(var s=0;s<this.m_contacts.length;++s){this.m_contacts[s].initConstraint(t)}for(s=0;s<t.positionIterations;++s){for(var n=0,m=0;m<this.m_contacts.length;++m){var h=this.m_contacts[m].solvePositionConstraintTOI(t,e,i);n=a.min(n,h)}if(n>=-1.5*o.linearSlop)break}e.m_sweep.c0.set(e.c_position.c),e.m_sweep.a0=e.c_position.a,i.m_sweep.c0.set(i.c_position.c),i.m_sweep.a0=i.c_position.a;for(s=0;s<this.m_contacts.length;++s){this.m_contacts[s].initVelocityConstraint(t)}for(s=0;s<t.velocityIterations;++s)for(m=0;m<this.m_contacts.length;++m){this.m_contacts[m].solveVelocityConstraint(t)}var c=t.dt;for(s=0;s<this.m_bodies.length;++s){var _=this.m_bodies[s],l=r.clone(_.c_position.c),u=_.c_position.a,p=r.clone(_.c_velocity.v),y=_.c_velocity.w,d=r.mul(c,p);if(r.dot(d,d)>o.maxTranslationSquared){var f=o.maxTranslation/d.length();p.mul(f)}var v=c*y;if(v*v>o.maxRotationSquared)y*=f=o.maxRotation/a.abs(v);l.addMul(c,p),u+=c*y,_.c_position.c=l,_.c_position.a=u,_.c_velocity.v=p,_.c_velocity.w=y,_.m_sweep.c=l,_.m_sweep.a=u,_.m_linearVelocity=p,_.m_angularVelocity=y,_.synchronizeTransform()}this.postSolveIsland()},f.prototype.postSolveIsland=function(){for(var t=new A,e=0;e<this.m_contacts.length;++e){for(var i=this.m_contacts[e],s=0;s<i.v_points.length;++s)t.normalImpulses.push(i.v_points[s].normalImpulse),t.tangentImpulses.push(i.v_points[s].tangentImpulse);this.m_world.postSolve(i,t)}}})),h.register("8kh7u",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=v;var s=h("bVyf9"),o=h("ecDm3"),n=h("8o39l"),r=h("aVWN5"),a=h("aah62"),m=h("8gqWb"),c=h("6a2BC"),_=h("fpvSw"),l=h("e8qxR"),u=h("gGjtn");h("eacC4");var p=v.STATIC="static",y=v.KINEMATIC="kinematic",d=v.DYNAMIC="dynamic",f={type:p,position:n.zero(),angle:0,linearVelocity:n.zero(),angularVelocity:0,linearDamping:0,angularDamping:0,fixedRotation:!1,bullet:!1,gravityScale:1,allowSleep:!0,awake:!0,active:!0,userData:null};function v(t,e){e=o(e,f),i&&s.assert(n.isValid(e.position)),i&&s.assert(n.isValid(e.linearVelocity)),i&&s.assert(a.isFinite(e.angle)),i&&s.assert(a.isFinite(e.angularVelocity)),i&&s.assert(a.isFinite(e.angularDamping)&&e.angularDamping>=0),i&&s.assert(a.isFinite(e.linearDamping)&&e.linearDamping>=0),this.m_world=t,this.m_awakeFlag=e.awake,this.m_autoSleepFlag=e.allowSleep,this.m_bulletFlag=e.bullet,this.m_fixedRotationFlag=e.fixedRotation,this.m_activeFlag=e.active,this.m_islandFlag=!1,this.m_toiFlag=!1,this.m_userData=e.userData,this.m_type=e.type,this.m_type==d?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_xf=c.identity(),this.m_xf.p=n.clone(e.position),this.m_xf.q.setAngle(e.angle),this.m_sweep=new m,this.m_sweep.setTransform(this.m_xf),this.c_velocity=new _,this.c_position=new l,this.m_force=n.zero(),this.m_torque=0,this.m_linearVelocity=n.clone(e.linearVelocity),this.m_angularVelocity=e.angularVelocity,this.m_linearDamping=e.linearDamping,this.m_angularDamping=e.angularDamping,this.m_gravityScale=e.gravityScale,this.m_sleepTime=0,this.m_jointList=null,this.m_contactList=null,this.m_fixtureList=null,this.m_prev=null,this.m_next=null,this.m_destroyed=!1}function A(){this.mass=0,this.center=n.zero(),this.I=0}v.prototype._serialize=function(){for(var t=[],e=this.m_fixtureList;e;e=e.m_next)t.push(e);return{type:this.m_type,bullet:this.m_bulletFlag,position:this.m_xf.p,angle:this.m_xf.q.getAngle(),linearVelocity:this.m_linearVelocity,angularVelocity:this.m_angularVelocity,fixtures:t}},v._deserialize=function(t,e,i){var s=new v(e,t);if(t.fixtures)for(var o=t.fixtures.length-1;o>=0;o--){var n=i(u,t.fixtures[o],s);s._addFixture(n)}return s},v.prototype.isWorldLocked=function(){return!(!this.m_world||!this.m_world.isLocked())},v.prototype.getWorld=function(){return this.m_world},v.prototype.getNext=function(){return this.m_next},v.prototype.setUserData=function(t){this.m_userData=t},v.prototype.getUserData=function(){return this.m_userData},v.prototype.getFixtureList=function(){return this.m_fixtureList},v.prototype.getJointList=function(){return this.m_jointList},v.prototype.getContactList=function(){return this.m_contactList},v.prototype.isStatic=function(){return this.m_type==p},v.prototype.isDynamic=function(){return this.m_type==d},v.prototype.isKinematic=function(){return this.m_type==y},v.prototype.setStatic=function(){return this.setType(p),this},v.prototype.setDynamic=function(){return this.setType(d),this},v.prototype.setKinematic=function(){return this.setType(y),this},v.prototype.getType=function(){return this.m_type},v.prototype.setType=function(t){if(i&&s.assert(t===p||t===y||t===d),i&&s.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type!=t){this.m_type=t,this.resetMassData(),this.m_type==p&&(this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_sweep.forward(),this.synchronizeFixtures()),this.setAwake(!0),this.m_force.setZero(),this.m_torque=0;for(var e=this.m_contactList;e;){var o=e;e=e.next,this.m_world.destroyContact(o.contact)}this.m_contactList=null;for(var n=this.m_world.m_broadPhase,r=this.m_fixtureList;r;r=r.m_next)for(var a=r.m_proxyCount,m=0;m<a;++m)n.touchProxy(r.m_proxies[m].proxyId)}},v.prototype.isBullet=function(){return this.m_bulletFlag},v.prototype.setBullet=function(t){this.m_bulletFlag=!!t},v.prototype.isSleepingAllowed=function(){return this.m_autoSleepFlag},v.prototype.setSleepingAllowed=function(t){this.m_autoSleepFlag=!!t,0==this.m_autoSleepFlag&&this.setAwake(!0)},v.prototype.isAwake=function(){return this.m_awakeFlag},v.prototype.setAwake=function(t){t?0==this.m_awakeFlag&&(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_force.setZero(),this.m_torque=0)},v.prototype.isActive=function(){return this.m_activeFlag},v.prototype.setActive=function(t){if(i&&s.assert(0==this.isWorldLocked()),t!=this.m_activeFlag)if(this.m_activeFlag=!!t,this.m_activeFlag)for(var e=this.m_world.m_broadPhase,o=this.m_fixtureList;o;o=o.m_next)o.createProxies(e,this.m_xf);else{for(e=this.m_world.m_broadPhase,o=this.m_fixtureList;o;o=o.m_next)o.destroyProxies(e);for(var n=this.m_contactList;n;){var r=n;n=n.next,this.m_world.destroyContact(r.contact)}this.m_contactList=null}},v.prototype.isFixedRotation=function(){return this.m_fixedRotationFlag},v.prototype.setFixedRotation=function(t){this.m_fixedRotationFlag!=t&&(this.m_fixedRotationFlag=!!t,this.m_angularVelocity=0,this.resetMassData())},v.prototype.getTransform=function(){return this.m_xf},v.prototype.setTransform=function(t,e){if(i&&s.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){this.m_xf.set(t,e),this.m_sweep.setTransform(this.m_xf);for(var o=this.m_world.m_broadPhase,n=this.m_fixtureList;n;n=n.m_next)n.synchronize(o,this.m_xf,this.m_xf)}},v.prototype.synchronizeTransform=function(){this.m_sweep.getTransform(this.m_xf,1)},v.prototype.synchronizeFixtures=function(){var t=c.identity();this.m_sweep.getTransform(t,0);for(var e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.synchronize(e,t,this.m_xf)},v.prototype.advance=function(t){this.m_sweep.advance(t),this.m_sweep.c.set(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_sweep.getTransform(this.m_xf,1)},v.prototype.getPosition=function(){return this.m_xf.p},v.prototype.setPosition=function(t){this.setTransform(t,this.m_sweep.a)},v.prototype.getAngle=function(){return this.m_sweep.a},v.prototype.setAngle=function(t){this.setTransform(this.m_xf.p,t)},v.prototype.getWorldCenter=function(){return this.m_sweep.c},v.prototype.getLocalCenter=function(){return this.m_sweep.localCenter},v.prototype.getLinearVelocity=function(){return this.m_linearVelocity},v.prototype.getLinearVelocityFromWorldPoint=function(t){var e=n.sub(t,this.m_sweep.c);return n.add(this.m_linearVelocity,n.cross(this.m_angularVelocity,e))},v.prototype.getLinearVelocityFromLocalPoint=function(t){return this.getLinearVelocityFromWorldPoint(this.getWorldPoint(t))},v.prototype.setLinearVelocity=function(t){this.m_type!=p&&(n.dot(t,t)>0&&this.setAwake(!0),this.m_linearVelocity.set(t))},v.prototype.getAngularVelocity=function(){return this.m_angularVelocity},v.prototype.setAngularVelocity=function(t){this.m_type!=p&&(t*t>0&&this.setAwake(!0),this.m_angularVelocity=t)},v.prototype.getLinearDamping=function(){return this.m_linearDamping},v.prototype.setLinearDamping=function(t){this.m_linearDamping=t},v.prototype.getAngularDamping=function(){return this.m_angularDamping},v.prototype.setAngularDamping=function(t){this.m_angularDamping=t},v.prototype.getGravityScale=function(){return this.m_gravityScale},v.prototype.setGravityScale=function(t){this.m_gravityScale=t},v.prototype.getMass=function(){return this.m_mass},v.prototype.getInertia=function(){return this.m_I+this.m_mass*n.dot(this.m_sweep.localCenter,this.m_sweep.localCenter)},v.prototype.getMassData=function(t){t.mass=this.m_mass,t.I=this.getInertia(),t.center.set(this.m_sweep.localCenter)},v.prototype.resetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.setZero(),this.isStatic()||this.isKinematic())return this.m_sweep.c0.set(this.m_xf.p),this.m_sweep.c.set(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);i&&s.assert(this.isDynamic());for(var t=n.zero(),e=this.m_fixtureList;e;e=e.m_next)if(0!=e.m_density){var o=new A;e.getMassData(o),this.m_mass+=o.mass,t.addMul(o.mass,o.center),this.m_I+=o.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,t.mul(this.m_invMass)):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&0==this.m_fixedRotationFlag?(this.m_I-=this.m_mass*n.dot(t,t),i&&s.assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var r=n.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t,this.m_xf),this.m_linearVelocity.add(n.cross(this.m_angularVelocity,n.sub(this.m_sweep.c,r)))},v.prototype.setMassData=function(t){if(i&&s.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type==d){this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,t.I>0&&0==this.m_fixedRotationFlag&&(this.m_I=t.I-this.m_mass*n.dot(t.center,t.center),i&&s.assert(this.m_I>0),this.m_invI=1/this.m_I);var e=n.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t.center,this.m_xf),this.m_linearVelocity.add(n.cross(this.m_angularVelocity,n.sub(this.m_sweep.c,e)))}},v.prototype.applyForce=function(t,e,i){this.m_type==d&&(i&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_force.add(t),this.m_torque+=n.cross(n.sub(e,this.m_sweep.c),t)))},v.prototype.applyForceToCenter=function(t,e){this.m_type==d&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&this.m_force.add(t))},v.prototype.applyTorque=function(t,e){this.m_type==d&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_torque+=t))},v.prototype.applyLinearImpulse=function(t,e,i){this.m_type==d&&(i&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.addMul(this.m_invMass,t),this.m_angularVelocity+=this.m_invI*n.cross(n.sub(e,this.m_sweep.c),t)))},v.prototype.applyAngularImpulse=function(t,e){this.m_type==d&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*t))},v.prototype.shouldCollide=function(t){if(this.m_type!=d&&t.m_type!=d)return!1;for(var e=this.m_jointList;e;e=e.next)if(e.other==t&&0==e.joint.m_collideConnected)return!1;return!0},v.prototype._addFixture=function(t){if(i&&s.assert(0==this.isWorldLocked()),1==this.isWorldLocked())return null;if(this.m_activeFlag){var e=this.m_world.m_broadPhase;t.createProxies(e,this.m_xf)}return t.m_next=this.m_fixtureList,this.m_fixtureList=t,t.m_density>0&&this.resetMassData(),this.m_world.m_newFixture=!0,t},v.prototype.createFixture=function(t,e){if(i&&s.assert(0==this.isWorldLocked()),1==this.isWorldLocked())return null;var o=new u(this,t,e);return this._addFixture(o),o},v.prototype.destroyFixture=function(t){if(i&&s.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){i&&s.assert(t.m_body==this);var e=!1;if(this.m_fixtureList===t)this.m_fixtureList=t.m_next,e=!0;else for(var o=this.m_fixtureList;null!=o;){if(o.m_next===t){o.m_next=t.m_next,e=!0;break}o=o.m_next}i&&s.assert(e);for(var n=this.m_contactList;n;){var r=n.contact;n=n.next;var a=r.getFixtureA(),m=r.getFixtureB();t!=a&&t!=m||this.m_world.destroyContact(r)}if(this.m_activeFlag){var h=this.m_world.m_broadPhase;t.destroyProxies(h)}t.m_body=null,t.m_next=null,this.m_world.publish("remove-fixture",t),this.resetMassData()}},v.prototype.getWorldPoint=function(t){return c.mulVec2(this.m_xf,t)},v.prototype.getWorldVector=function(t){return r.mulVec2(this.m_xf.q,t)},v.prototype.getLocalPoint=function(t){return c.mulTVec2(this.m_xf,t)},v.prototype.getLocalVector=function(t){return r.mulTVec2(this.m_xf.q,t)}})),h.register("aVWN5",(function(t,e){var i="undefined"!=typeof DEBUG&&DEBUG,s="undefined"!=typeof ASSERT&&ASSERT;t.exports=a;var o=h("bVyf9"),n=h("8o39l"),r=h("aah62");function a(t){if(!(this instanceof a))return new a(t);"number"==typeof t?this.setAngle(t):"object"==typeof t?this.set(t):this.setIdentity()}a.neo=function(t){var e=Object.create(a.prototype);return e.setAngle(t),e},a.clone=function(t){s&&a.assert(t);var e=Object.create(a.prototype);return e.s=t.s,e.c=t.c,e},a.identity=function(){var t=Object.create(a.prototype);return t.s=0,t.c=1,t},a.isValid=function(t){return t&&r.isFinite(t.s)&&r.isFinite(t.c)},a.assert=function(t){if(s&&!a.isValid(t))throw i&&o.debug(t),new Error("Invalid Rot!")},a.prototype.setIdentity=function(){this.s=0,this.c=1},a.prototype.set=function(t){"object"==typeof t?(s&&a.assert(t),this.s=t.s,this.c=t.c):(s&&r.assert(t),this.s=r.sin(t),this.c=r.cos(t))},a.prototype.setAngle=function(t){s&&r.assert(t),this.s=r.sin(t),this.c=r.cos(t)},a.prototype.getAngle=function(){return r.atan2(this.s,this.c)},a.prototype.getXAxis=function(){return n.neo(this.c,this.s)},a.prototype.getYAxis=function(){return n.neo(-this.s,this.c)},a.mul=function(t,e){if(s&&a.assert(t),"c"in e&&"s"in e){s&&a.assert(e);var i=a.identity();return i.s=t.s*e.c+t.c*e.s,i.c=t.c*e.c-t.s*e.s,i}if("x"in e&&"y"in e)return s&&n.assert(e),n.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},a.mulRot=function(t,e){s&&a.assert(t),s&&a.assert(e);var i=a.identity();return i.s=t.s*e.c+t.c*e.s,i.c=t.c*e.c-t.s*e.s,i},a.mulVec2=function(t,e){return s&&a.assert(t),s&&n.assert(e),n.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},a.mulSub=function(t,e,i){var s=t.c*(e.x-i.x)-t.s*(e.y-i.y),o=t.s*(e.x-i.x)+t.c*(e.y-i.y);return n.neo(s,o)},a.mulT=function(t,e){if("c"in e&&"s"in e){s&&a.assert(e);var i=a.identity();return i.s=t.c*e.s-t.s*e.c,i.c=t.c*e.c+t.s*e.s,i}if("x"in e&&"y"in e)return s&&n.assert(e),n.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)},a.mulTRot=function(t,e){s&&a.assert(e);var i=a.identity();return i.s=t.c*e.s-t.s*e.c,i.c=t.c*e.c+t.s*e.s,i},a.mulTVec2=function(t,e){return s&&n.assert(e),n.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)}})),h.register("8gqWb",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=m;var s=h("bVyf9"),o=h("aah62"),n=h("8o39l"),r=h("aVWN5"),a=h("6a2BC");function m(t,e){i&&s.assert(void 0===t),i&&s.assert(void 0===e),this.localCenter=n.zero(),this.c=n.zero(),this.a=0,this.alpha0=0,this.c0=n.zero(),this.a0=0}m.prototype.setTransform=function(t){var e=a.mulVec2(t,this.localCenter);this.c.set(e),this.c0.set(e),this.a=t.q.getAngle(),this.a0=t.q.getAngle()},m.prototype.setLocalCenter=function(t,e){this.localCenter.set(t);var i=a.mulVec2(e,this.localCenter);this.c.set(i),this.c0.set(i)},m.prototype.getTransform=function(t,e){e=void 0===e?0:e,t.q.setAngle((1-e)*this.a0+e*this.a),t.p.setCombine(1-e,this.c0,e,this.c),t.p.sub(r.mulVec2(t.q,this.localCenter))},m.prototype.advance=function(t){i&&s.assert(this.alpha0<1);var e=(t-this.alpha0)/(1-this.alpha0);this.c0.setCombine(e,this.c,1-e,this.c0),this.a0=e*this.a+(1-e)*this.a0,this.alpha0=t},m.prototype.forward=function(){this.a0=this.a,this.c0.set(this.c)},m.prototype.normalize=function(){var t=o.mod(this.a0,-o.PI,+o.PI);this.a-=this.a0-t,this.a0=t},m.prototype.clone=function(){var t=new m;return t.localCenter.set(this.localCenter),t.alpha0=this.alpha0,t.a0=this.a0,t.a=this.a,t.c0.set(this.c0),t.c.set(this.c),t},m.prototype.set=function(t){this.localCenter.set(t.localCenter),this.alpha0=t.alpha0,this.a0=t.a0,this.a=t.a,this.c0.set(t.c0),this.c.set(t.c)}})),h.register("6a2BC",(function(t,e){var i="undefined"!=typeof DEBUG&&DEBUG,s="undefined"!=typeof ASSERT&&ASSERT;t.exports=a;var o=h("bVyf9"),n=h("8o39l"),r=h("aVWN5");function a(t,e){if(!(this instanceof a))return new a(t,e);this.p=n.zero(),this.q=r.identity(),void 0!==t&&this.p.set(t),void 0!==e&&this.q.set(e)}a.clone=function(t){var e=Object.create(a.prototype);return e.p=n.clone(t.p),e.q=r.clone(t.q),e},a.neo=function(t,e){var i=Object.create(a.prototype);return i.p=n.clone(t),i.q=r.clone(e),i},a.identity=function(){var t=Object.create(a.prototype);return t.p=n.zero(),t.q=r.identity(),t},a.prototype.setIdentity=function(){this.p.setZero(),this.q.setIdentity()},a.prototype.set=function(t,e){void 0===e?(this.p.set(t.p),this.q.set(t.q)):(this.p.set(t),this.q.set(e))},a.isValid=function(t){return t&&n.isValid(t.p)&&r.isValid(t.q)},a.assert=function(t){if(s&&!a.isValid(t))throw i&&o.debug(t),new Error("Invalid Transform!")},a.mul=function(t,e){if(s&&a.assert(t),Array.isArray(e)){for(var i=[],o=0;o<e.length;o++)i[o]=a.mul(t,e[o]);return i}if("x"in e&&"y"in e){s&&n.assert(e);var m=t.q.c*e.x-t.q.s*e.y+t.p.x,h=t.q.s*e.x+t.q.c*e.y+t.p.y;return n.neo(m,h)}if("p"in e&&"q"in e){s&&a.assert(e);var c=a.identity();return c.q=r.mulRot(t.q,e.q),c.p=n.add(r.mulVec2(t.q,e.p),t.p),c}},a.mulAll=function(t,e){s&&a.assert(t);for(var i=[],o=0;o<e.length;o++)i[o]=a.mul(t,e[o]);return i},a.mulFn=function(t){return s&&a.assert(t),function(e){return a.mul(t,e)}},a.mulVec2=function(t,e){s&&a.assert(t),s&&n.assert(e);var i=t.q.c*e.x-t.q.s*e.y+t.p.x,o=t.q.s*e.x+t.q.c*e.y+t.p.y;return n.neo(i,o)},a.mulXf=function(t,e){s&&a.assert(t),s&&a.assert(e);var i=a.identity();return i.q=r.mulRot(t.q,e.q),i.p=n.add(r.mulVec2(t.q,e.p),t.p),i},a.mulT=function(t,e){if(s&&a.assert(t),"x"in e&&"y"in e){s&&n.assert(e);var i=e.x-t.p.x,o=e.y-t.p.y,m=t.q.c*i+t.q.s*o,h=-t.q.s*i+t.q.c*o;return n.neo(m,h)}if("p"in e&&"q"in e){s&&a.assert(e);var c=a.identity();return c.q.set(r.mulTRot(t.q,e.q)),c.p.set(r.mulTVec2(t.q,n.sub(e.p,t.p))),c}},a.mulTVec2=function(t,e){s&&a.assert(t),s&&n.assert(e);var i=e.x-t.p.x,o=e.y-t.p.y,r=t.q.c*i+t.q.s*o,m=-t.q.s*i+t.q.c*o;return n.neo(r,m)},a.mulTXf=function(t,e){s&&a.assert(t),s&&a.assert(e);var i=a.identity();return i.q.set(r.mulTRot(t.q,e.q)),i.p.set(r.mulTVec2(t.q,n.sub(e.p,t.p))),i}})),h.register("fpvSw",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=function(){this.v=i.zero(),this.w=0};var i=h("8o39l")})),h.register("e8qxR",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=o;var i=h("8o39l"),s=h("aVWN5");function o(){this.c=i.zero(),this.a=0}o.prototype.getTransform=function(t,e){return t.q.set(this.a),t.p.set(i.sub(this.c,s.mulVec2(t.q,e))),t}})),h.register("gGjtn",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=l;var s=h("bVyf9"),o=h("ecDm3"),n=h("aah62"),r=h("8o39l"),a=h("l2alD"),m=h("eacC4"),c={userData:null,friction:.2,restitution:0,density:0,isSensor:!1,filterGroupIndex:0,filterCategoryBits:1,filterMaskBits:65535};function _(t,e){this.aabb=new a,this.fixture=t,this.childIndex=e,this.proxyId}function l(t,e,i){e.shape?(i=e,e=e.shape):"number"==typeof i&&(i={density:i}),i=o(i,c),this.m_body=t,this.m_friction=i.friction,this.m_restitution=i.restitution,this.m_density=i.density,this.m_isSensor=i.isSensor,this.m_filterGroupIndex=i.filterGroupIndex,this.m_filterCategoryBits=i.filterCategoryBits,this.m_filterMaskBits=i.filterMaskBits,this.m_shape=e,this.m_next=null,this.m_proxies=[],this.m_proxyCount=0;for(var s=this.m_shape.getChildCount(),n=0;n<s;++n)this.m_proxies[n]=new _(this,n);this.m_userData=i.userData}l.prototype._reset=function(){var t=this.getBody(),e=t.m_world.m_broadPhase;this.destroyProxies(e),this.m_shape._reset&&this.m_shape._reset();for(var i=this.m_shape.getChildCount(),s=0;s<i;++s)this.m_proxies[s]=new _(this,s);this.createProxies(e,t.m_xf),t.resetMassData()},l.prototype._serialize=function(){return{friction:this.m_friction,restitution:this.m_restitution,density:this.m_density,isSensor:this.m_isSensor,filterGroupIndex:this.m_filterGroupIndex,filterCategoryBits:this.m_filterCategoryBits,filterMaskBits:this.m_filterMaskBits,shape:this.m_shape}},l._deserialize=function(t,e,i){var s=i(m,t.shape);return s&&new l(e,s,t)},l.prototype.getType=function(){return this.m_shape.getType()},l.prototype.getShape=function(){return this.m_shape},l.prototype.isSensor=function(){return this.m_isSensor},l.prototype.setSensor=function(t){t!=this.m_isSensor&&(this.m_body.setAwake(!0),this.m_isSensor=t)},l.prototype.getUserData=function(){return this.m_userData},l.prototype.setUserData=function(t){this.m_userData=t},l.prototype.getBody=function(){return this.m_body},l.prototype.getNext=function(){return this.m_next},l.prototype.getDensity=function(){return this.m_density},l.prototype.setDensity=function(t){i&&s.assert(n.isFinite(t)&&t>=0),this.m_density=t},l.prototype.getFriction=function(){return this.m_friction},l.prototype.setFriction=function(t){this.m_friction=t},l.prototype.getRestitution=function(){return this.m_restitution},l.prototype.setRestitution=function(t){this.m_restitution=t},l.prototype.testPoint=function(t){return this.m_shape.testPoint(this.m_body.getTransform(),t)},l.prototype.rayCast=function(t,e,i){return this.m_shape.rayCast(t,e,this.m_body.getTransform(),i)},l.prototype.getMassData=function(t){this.m_shape.computeMass(t,this.m_density)},l.prototype.getAABB=function(t){return i&&s.assert(0<=t&&t<this.m_proxyCount),this.m_proxies[t].aabb},l.prototype.createProxies=function(t,e){i&&s.assert(0==this.m_proxyCount),this.m_proxyCount=this.m_shape.getChildCount();for(var o=0;o<this.m_proxyCount;++o){var n=this.m_proxies[o];this.m_shape.computeAABB(n.aabb,e,o),n.proxyId=t.createProxy(n.aabb,n)}},l.prototype.destroyProxies=function(t){for(var e=0;e<this.m_proxyCount;++e){var i=this.m_proxies[e];t.destroyProxy(i.proxyId),i.proxyId=null}this.m_proxyCount=0},l.prototype.synchronize=function(t,e,i){for(var s=0;s<this.m_proxyCount;++s){var o=this.m_proxies[s],n=new a,m=new a;this.m_shape.computeAABB(n,e,o.childIndex),this.m_shape.computeAABB(m,i,o.childIndex),o.aabb.combine(n,m);var h=r.sub(i.p,e.p);t.moveProxy(o.proxyId,o.aabb,h)}},l.prototype.setFilterData=function(t){this.m_filterGroupIndex=t.groupIndex,this.m_filterCategoryBits=t.categoryBits,this.m_filterMaskBits=t.maskBits,this.refilter()},l.prototype.getFilterGroupIndex=function(){return this.m_filterGroupIndex},l.prototype.setFilterGroupIndex=function(t){return this.m_filterGroupIndex=t},l.prototype.getFilterCategoryBits=function(){return this.m_filterCategoryBits},l.prototype.setFilterCategoryBits=function(t){this.m_filterCategoryBits=t},l.prototype.getFilterMaskBits=function(){return this.m_filterMaskBits},l.prototype.setFilterMaskBits=function(t){this.m_filterMaskBits=t},l.prototype.refilter=function(){if(null!=this.m_body){for(var t=this.m_body.getContactList();t;){var e=t.contact,i=e.getFixtureA(),s=e.getFixtureB();i!=this&&s!=this||e.flagForFiltering(),t=t.next}var o=this.m_body.getWorld();if(null!=o)for(var n=o.m_broadPhase,r=0;r<this.m_proxyCount;++r)n.touchProxy(this.m_proxies[r].proxyId)}},l.prototype.shouldCollide=function(t){if(t.m_filterGroupIndex===this.m_filterGroupIndex&&0!==t.m_filterGroupIndex)return t.m_filterGroupIndex>0;var e=0!=(t.m_filterMaskBits&this.m_filterCategoryBits),i=0!=(t.m_filterCategoryBits&this.m_filterMaskBits);return e&&i}})),h.register("eacC4",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;function i(){this.m_type,this.m_radius}t.exports=i,h("aah62"),i.prototype._reset=function(){},i.prototype._serialize=function(){return{}},i.TYPES={},i._deserialize=function(t,e,s){var o=i.TYPES[t.type];return o&&s(o,t)},i.isValid=function(t){return!!t},i.prototype.getRadius=function(){return this.m_radius},i.prototype.getType=function(){return this.m_type},i.prototype._clone=function(){},i.prototype.getChildCount=function(){},i.prototype.testPoint=function(t,e){},i.prototype.rayCast=function(t,e,i,s){},i.prototype.computeAABB=function(t,e,i){},i.prototype.computeMass=function(t,e){},i.prototype.computeDistanceProxy=function(t){}})),h.register("f6rGq",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT,s=h("bVyf9"),o=h("aah62"),n=h("8o39l"),r=h("6a2BC"),a=h("5MFA1"),m=h("aVWN5"),c=h("9MRkU"),_=h("hyFEM"),l=h("6KczB");function u(t){this.contact=t,this.prev,this.next,this.other}function p(t,e,i,s,o){this.m_nodeA=new u(this),this.m_nodeB=new u(this),this.m_fixtureA=t,this.m_fixtureB=i,this.m_indexA=e,this.m_indexB=s,this.m_evaluateFcn=o,this.m_manifold=new _,this.m_prev=null,this.m_next=null,this.m_toi=1,this.m_toiCount=0,this.m_toiFlag=!1,this.m_friction=d(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=f(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution),this.m_tangentSpeed=0,this.m_enabledFlag=!0,this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.v_points=[],this.v_normal=n.zero(),this.v_normalMass=new a,this.v_K=new a,this.v_pointCount,this.v_tangentSpeed,this.v_friction,this.v_restitution,this.v_invMassA,this.v_invMassB,this.v_invIA,this.v_invIB,this.p_localPoints=[],this.p_localNormal=n.zero(),this.p_localPoint=n.zero(),this.p_localCenterA=n.zero(),this.p_localCenterB=n.zero(),this.p_type,this.p_radiusA,this.p_radiusB,this.p_pointCount,this.p_invMassA,this.p_invMassB,this.p_invIA,this.p_invIB}function y(){this.rA=n.zero(),this.rB=n.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}function d(t,e){return o.sqrt(t*e)}function f(t,e){return t>e?t:e}t.exports=p,p.prototype.initConstraint=function(t){var e=this.m_fixtureA,o=this.m_fixtureB,r=e.getShape(),a=o.getShape(),m=e.getBody(),h=o.getBody(),c=this.getManifold(),_=c.pointCount;i&&s.assert(_>0),this.v_invMassA=m.m_invMass,this.v_invMassB=h.m_invMass,this.v_invIA=m.m_invI,this.v_invIB=h.m_invI,this.v_friction=this.m_friction,this.v_restitution=this.m_restitution,this.v_tangentSpeed=this.m_tangentSpeed,this.v_pointCount=_,this.v_K.setZero(),this.v_normalMass.setZero(),this.p_invMassA=m.m_invMass,this.p_invMassB=h.m_invMass,this.p_invIA=m.m_invI,this.p_invIB=h.m_invI,this.p_localCenterA=n.clone(m.m_sweep.localCenter),this.p_localCenterB=n.clone(h.m_sweep.localCenter),this.p_radiusA=r.m_radius,this.p_radiusB=a.m_radius,this.p_type=c.type,this.p_localNormal=n.clone(c.localNormal),this.p_localPoint=n.clone(c.localPoint),this.p_pointCount=_;for(var l=0;l<_;++l){var u=c.points[l],p=this.v_points[l]=new y;t.warmStarting?(p.normalImpulse=t.dtRatio*u.normalImpulse,p.tangentImpulse=t.dtRatio*u.tangentImpulse):(p.normalImpulse=0,p.tangentImpulse=0),p.rA.setZero(),p.rB.setZero(),p.normalMass=0,p.tangentMass=0,p.velocityBias=0,this.p_localPoints[l]=n.clone(u.localPoint)}},p.prototype.getManifold=function(){return this.m_manifold},p.prototype.getWorldManifold=function(t){var e=this.m_fixtureA.getBody(),i=this.m_fixtureB.getBody(),s=this.m_fixtureA.getShape(),o=this.m_fixtureB.getShape();return this.m_manifold.getWorldManifold(t,e.getTransform(),s.m_radius,i.getTransform(),o.m_radius)},p.prototype.setEnabled=function(t){this.m_enabledFlag=!!t},p.prototype.isEnabled=function(){return this.m_enabledFlag},p.prototype.isTouching=function(){return this.m_touchingFlag},p.prototype.getNext=function(){return this.m_next},p.prototype.getFixtureA=function(){return this.m_fixtureA},p.prototype.getFixtureB=function(){return this.m_fixtureB},p.prototype.getChildIndexA=function(){return this.m_indexA},p.prototype.getChildIndexB=function(){return this.m_indexB},p.prototype.flagForFiltering=function(){this.m_filterFlag=!0},p.prototype.setFriction=function(t){this.m_friction=t},p.prototype.getFriction=function(){return this.m_friction},p.prototype.resetFriction=function(){this.m_friction=d(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)},p.prototype.setRestitution=function(t){this.m_restitution=t},p.prototype.getRestitution=function(){return this.m_restitution},p.prototype.resetRestitution=function(){this.m_restitution=f(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},p.prototype.setTangentSpeed=function(t){this.m_tangentSpeed=t},p.prototype.getTangentSpeed=function(){return this.m_tangentSpeed},p.prototype.evaluate=function(t,e,i){this.m_evaluateFcn(t,e,this.m_fixtureA,this.m_indexA,i,this.m_fixtureB,this.m_indexB)},p.prototype.update=function(t){this.m_enabledFlag=!0;var e=!1,i=this.m_touchingFlag,s=this.m_fixtureA.isSensor(),o=this.m_fixtureB.isSensor(),n=s||o,r=this.m_fixtureA.getBody(),a=this.m_fixtureB.getBody(),m=r.getTransform(),h=a.getTransform();if(n){var c=this.m_fixtureA.getShape(),u=this.m_fixtureB.getShape();e=l.testOverlap(c,this.m_indexA,u,this.m_indexB,m,h),this.m_manifold.pointCount=0}else{var p=this.m_manifold;this.m_manifold=new _,this.evaluate(this.m_manifold,m,h),e=this.m_manifold.pointCount>0;for(var y=0;y<this.m_manifold.pointCount;++y){var d=this.m_manifold.points[y];d.normalImpulse=0,d.tangentImpulse=0;for(var f=0;f<p.pointCount;++f){var v=p.points[f];if(v.id.key==d.id.key){d.normalImpulse=v.normalImpulse,d.tangentImpulse=v.tangentImpulse;break}}}e!=i&&(r.setAwake(!0),a.setAwake(!0))}this.m_touchingFlag=e,0==i&&1==e&&t&&t.beginContact(this),1==i&&0==e&&t&&t.endContact(this),0==n&&e&&t&&t.preSolve(this,p)},p.prototype.solvePositionConstraint=function(t){return this._solvePositionConstraint(t,!1)},p.prototype.solvePositionConstraintTOI=function(t,e,i){return this._solvePositionConstraint(t,!0,e,i)},p.prototype._solvePositionConstraint=function(t,e,i,s){var a=this.m_fixtureA,h=this.m_fixtureB,l=a.getBody(),u=h.getBody(),p=(l.c_velocity,u.c_velocity,l.c_position),y=u.c_position,d=n.clone(this.p_localCenterA),f=n.clone(this.p_localCenterB),v=0,A=0;e&&l!=i&&l!=s||(v=this.p_invMassA,A=this.p_invIA);var x=0,b=0;e&&u!=i&&u!=s||(x=this.p_invMassB,b=this.p_invIB);for(var g=n.clone(p.c),B=p.a,w=n.clone(y.c),M=y.a,S=0,C=0;C<this.p_pointCount;++C){var I,V,T,P=r.identity(),z=r.identity();switch(P.q.set(B),z.q.set(M),P.p=n.sub(g,m.mulVec2(P.q,d)),z.p=n.sub(w,m.mulVec2(z.q,f)),this.p_type){case _.e_circles:var E=r.mulVec2(P,this.p_localPoint),F=r.mulVec2(z,this.p_localPoints[0]);(I=n.sub(F,E)).normalize(),V=n.combine(.5,E,.5,F),T=n.dot(n.sub(F,E),I)-this.p_radiusA-this.p_radiusB;break;case _.e_faceA:I=m.mulVec2(P.q,this.p_localNormal);var q=r.mulVec2(P,this.p_localPoint),L=r.mulVec2(z,this.p_localPoints[C]);T=n.dot(n.sub(L,q),I)-this.p_radiusA-this.p_radiusB,V=L;break;case _.e_faceB:I=m.mulVec2(z.q,this.p_localNormal);q=r.mulVec2(z,this.p_localPoint),L=r.mulVec2(P,this.p_localPoints[C]);T=n.dot(n.sub(L,q),I)-this.p_radiusA-this.p_radiusB,V=L,I.mul(-1)}var D=n.sub(V,g),R=n.sub(V,w);S=o.min(S,T);var k=e?c.toiBaugarte:c.baumgarte,j=c.linearSlop,O=c.maxLinearCorrection,U=o.clamp(k*(T+j),-O,0),G=n.cross(D,I),N=n.cross(R,I),Y=v+x+A*G*G+b*N*N,W=Y>0?-U/Y:0,J=n.mul(W,I);g.subMul(v,J),B-=A*n.cross(D,J),w.addMul(x,J),M+=b*n.cross(R,J)}return p.c.set(g),p.a=B,y.c.set(w),y.a=M,S},p.prototype.initVelocityConstraint=function(t){var e=this.m_fixtureA,o=this.m_fixtureB,a=e.getBody(),h=o.getBody(),_=a.c_velocity,l=h.c_velocity,u=a.c_position,p=h.c_position,y=this.p_radiusA,d=this.p_radiusB,f=this.getManifold(),v=this.v_invMassA,A=this.v_invMassB,x=this.v_invIA,b=this.v_invIB,g=n.clone(this.p_localCenterA),B=n.clone(this.p_localCenterB),w=n.clone(u.c),M=u.a,S=n.clone(_.v),C=_.w,I=n.clone(p.c),V=p.a,T=n.clone(l.v),P=l.w;i&&s.assert(f.pointCount>0);var z=r.identity(),E=r.identity();z.q.set(M),E.q.set(V),z.p.setCombine(1,w,-1,m.mulVec2(z.q,g)),E.p.setCombine(1,I,-1,m.mulVec2(E.q,B));var F=f.getWorldManifold(null,z,y,E,d);this.v_normal.set(F.normal);for(var q=0;q<this.v_pointCount;++q){var L=this.v_points[q];L.rA.set(n.sub(F.points[q],w)),L.rB.set(n.sub(F.points[q],I));var D=n.cross(L.rA,this.v_normal),R=n.cross(L.rB,this.v_normal),k=v+A+x*D*D+b*R*R;L.normalMass=k>0?1/k:0;var j=n.cross(this.v_normal,1),O=n.cross(L.rA,j),U=n.cross(L.rB,j),G=v+A+x*O*O+b*U*U;L.tangentMass=G>0?1/G:0,L.velocityBias=0;var N=n.dot(this.v_normal,T)+n.dot(this.v_normal,n.cross(P,L.rB))-n.dot(this.v_normal,S)-n.dot(this.v_normal,n.cross(C,L.rA));N<-c.velocityThreshold&&(L.velocityBias=-this.v_restitution*N)}if(2==this.v_pointCount&&t.blockSolve){var Y=this.v_points[0],W=this.v_points[1],J=n.cross(Y.rA,this.v_normal),H=n.cross(Y.rB,this.v_normal),Z=n.cross(W.rA,this.v_normal),K=n.cross(W.rB,this.v_normal),X=v+A+x*J*J+b*H*H,Q=v+A+x*Z*Z+b*K*K,$=v+A+x*J*Z+b*H*K;X*X<1e3*(X*Q-$*$)?(this.v_K.ex.set(X,$),this.v_K.ey.set($,Q),this.v_normalMass.set(this.v_K.getInverse())):this.v_pointCount=1}u.c.set(w),u.a=M,_.v.set(S),_.w=C,p.c.set(I),p.a=V,l.v.set(T),l.w=P},p.prototype.warmStartConstraint=function(t){for(var e=this.m_fixtureA,i=this.m_fixtureB,s=e.getBody(),o=i.getBody(),r=s.c_velocity,a=o.c_velocity,m=(s.c_position,o.c_position,this.v_invMassA),h=this.v_invIA,c=this.v_invMassB,_=this.v_invIB,l=n.clone(r.v),u=r.w,p=n.clone(a.v),y=a.w,d=this.v_normal,f=n.cross(d,1),v=0;v<this.v_pointCount;++v){var A=this.v_points[v],x=n.combine(A.normalImpulse,d,A.tangentImpulse,f);u-=h*n.cross(A.rA,x),l.subMul(m,x),y+=_*n.cross(A.rB,x),p.addMul(c,x)}r.v.set(l),r.w=u,a.v.set(p),a.w=y},p.prototype.storeConstraintImpulses=function(t){for(var e=this.m_manifold,i=0;i<this.v_pointCount;++i)e.points[i].normalImpulse=this.v_points[i].normalImpulse,e.points[i].tangentImpulse=this.v_points[i].tangentImpulse},p.prototype.solveVelocityConstraint=function(t){var e=this.m_fixtureA.m_body,r=this.m_fixtureB.m_body,m=e.c_velocity,h=(e.c_position,r.c_velocity),c=(r.c_position,this.v_invMassA),_=this.v_invIA,l=this.v_invMassB,u=this.v_invIB,p=n.clone(m.v),y=m.w,d=n.clone(h.v),f=h.w,v=this.v_normal,A=n.cross(v,1),x=this.v_friction;i&&s.assert(1==this.v_pointCount||2==this.v_pointCount);for(var b=0;b<this.v_pointCount;++b){var g=this.v_points[b];(I=n.zero()).addCombine(1,d,1,n.cross(f,g.rB)),I.subCombine(1,p,1,n.cross(y,g.rA));var B=n.dot(I,A)-this.v_tangentSpeed,w=g.tangentMass*-B,M=x*g.normalImpulse;w=(V=o.clamp(g.tangentImpulse+w,-M,M))-g.tangentImpulse,g.tangentImpulse=V;var S=n.mul(w,A);p.subMul(c,S),y-=_*n.cross(g.rA,S),d.addMul(l,S),f+=u*n.cross(g.rB,S)}if(1==this.v_pointCount||0==t.blockSolve)for(var C=0;C<this.v_pointCount;++C){var I;g=this.v_points[C];(I=n.zero()).addCombine(1,d,1,n.cross(f,g.rB)),I.subCombine(1,p,1,n.cross(y,g.rA));var V,T=n.dot(I,v);w=-g.normalMass*(T-g.velocityBias);w=(V=o.max(g.normalImpulse+w,0))-g.normalImpulse,g.normalImpulse=V;S=n.mul(w,v);p.subMul(c,S),y-=_*n.cross(g.rA,S),d.addMul(l,S),f+=u*n.cross(g.rB,S)}else{var P=this.v_points[0],z=this.v_points[1],E=n.neo(P.normalImpulse,z.normalImpulse);i&&s.assert(E.x>=0&&E.y>=0);var F=n.zero().add(d).add(n.cross(f,P.rB)).sub(p).sub(n.cross(y,P.rA)),q=n.zero().add(d).add(n.cross(f,z.rB)).sub(p).sub(n.cross(y,z.rA)),L=n.dot(F,v),D=n.dot(q,v),R=n.neo(L-P.velocityBias,D-z.velocityBias);R.sub(a.mulVec2(this.v_K,E));for(;;){var k=a.mulVec2(this.v_normalMass,R).neg();if(k.x>=0&&k.y>=0){var j=n.sub(k,E),O=n.mul(j.x,v),U=n.mul(j.y,v);p.subCombine(c,O,c,U),y-=_*(n.cross(P.rA,O)+n.cross(z.rA,U)),d.addCombine(l,O,l,U),f+=u*(n.cross(P.rB,O)+n.cross(z.rB,U)),P.normalImpulse=k.x,z.normalImpulse=k.y;break}if(k.x=-P.normalMass*R.x,k.y=0,L=0,D=this.v_K.ex.y*k.x+R.y,k.x>=0&&D>=0){j=n.sub(k,E),O=n.mul(j.x,v),U=n.mul(j.y,v);p.subCombine(c,O,c,U),y-=_*(n.cross(P.rA,O)+n.cross(z.rA,U)),d.addCombine(l,O,l,U),f+=u*(n.cross(P.rB,O)+n.cross(z.rB,U)),P.normalImpulse=k.x,z.normalImpulse=k.y;break}if(k.x=0,k.y=-z.normalMass*R.y,L=this.v_K.ey.x*k.y+R.x,D=0,k.y>=0&&L>=0){j=n.sub(k,E),O=n.mul(j.x,v),U=n.mul(j.y,v);p.subCombine(c,O,c,U),y-=_*(n.cross(P.rA,O)+n.cross(z.rA,U)),d.addCombine(l,O,l,U),f+=u*(n.cross(P.rB,O)+n.cross(z.rB,U)),P.normalImpulse=k.x,z.normalImpulse=k.y;break}if(k.x=0,k.y=0,L=R.x,D=R.y,L>=0&&D>=0){j=n.sub(k,E),O=n.mul(j.x,v),U=n.mul(j.y,v);p.subCombine(c,O,c,U),y-=_*(n.cross(P.rA,O)+n.cross(z.rA,U)),d.addCombine(l,O,l,U),f+=u*(n.cross(P.rB,O)+n.cross(z.rB,U)),P.normalImpulse=k.x,z.normalImpulse=k.y;break}break}}m.v.set(p),m.w=y,h.v.set(d),h.w=f};var v=[];p.addType=function(t,e,i){v[t]=v[t]||{},v[t][e]=i},p.create=function(t,e,i,s){var o,n,r=t.getType(),a=i.getType();if(n=v[r]&&v[r][a])o=new p(t,e,i,s,n);else{if(!(n=v[a]&&v[a][r]))return null;o=new p(i,s,t,e,n)}t=o.getFixtureA(),i=o.getFixtureB(),e=o.getChildIndexA(),s=o.getChildIndexB();var m=t.getBody(),h=i.getBody();return o.m_nodeA.contact=o,o.m_nodeA.other=h,o.m_nodeA.prev=null,o.m_nodeA.next=m.m_contactList,null!=m.m_contactList&&(m.m_contactList.prev=o.m_nodeA),m.m_contactList=o.m_nodeA,o.m_nodeB.contact=o,o.m_nodeB.other=m,o.m_nodeB.prev=null,o.m_nodeB.next=h.m_contactList,null!=h.m_contactList&&(h.m_contactList.prev=o.m_nodeB),h.m_contactList=o.m_nodeB,0==t.isSensor()&&0==i.isSensor()&&(m.setAwake(!0),h.setAwake(!0)),o},p.destroy=function(t,e){var i=t.m_fixtureA,s=t.m_fixtureB,o=i.getBody(),n=s.getBody();t.isTouching()&&e.endContact(t),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==o.m_contactList&&(o.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==n.m_contactList&&(n.m_contactList=t.m_nodeB.next),t.m_manifold.pointCount>0&&0==i.isSensor()&&0==s.isSensor()&&(o.setAwake(!0),n.setAwake(!0));var r=i.getType(),a=s.getType(),m=v[r][a].destroyFcn;"function"==typeof m&&m(t)}})),h.register("5MFA1",(function(t,e){var i="undefined"!=typeof DEBUG&&DEBUG,s="undefined"!=typeof ASSERT&&ASSERT;t.exports=r;var o=h("bVyf9");h("aah62");var n=h("8o39l");function r(t,e,i,s){"object"==typeof t&&null!==t?(this.ex=n.clone(t),this.ey=n.clone(e)):"number"==typeof t?(this.ex=n.neo(t,i),this.ey=n.neo(e,s)):(this.ex=n.zero(),this.ey=n.zero())}r.prototype.toString=function(){return JSON.stringify(this)},r.isValid=function(t){return t&&n.isValid(t.ex)&&n.isValid(t.ey)},r.assert=function(t){if(s&&!r.isValid(t))throw i&&o.debug(t),new Error("Invalid Mat22!")},r.prototype.set=function(t,e,i,n){"number"==typeof t&&"number"==typeof e&&"number"==typeof i&&"number"==typeof n?(this.ex.set(t,i),this.ey.set(e,n)):"object"==typeof t&&"object"==typeof e?(this.ex.set(t),this.ey.set(e)):"object"==typeof t?(s&&r.assert(t),this.ex.set(t.ex),this.ey.set(t.ey)):s&&o.assert(!1)},r.prototype.setIdentity=function(){this.ex.x=1,this.ey.x=0,this.ex.y=0,this.ey.y=1},r.prototype.setZero=function(){this.ex.x=0,this.ey.x=0,this.ex.y=0,this.ey.y=0},r.prototype.getInverse=function(){var t=this.ex.x,e=this.ey.x,i=this.ex.y,s=this.ey.y,o=t*s-e*i;0!=o&&(o=1/o);var n=new r;return n.ex.x=o*s,n.ey.x=-o*e,n.ex.y=-o*i,n.ey.y=o*t,n},r.prototype.solve=function(t){s&&n.assert(t);var e=this.ex.x,i=this.ey.x,o=this.ex.y,r=this.ey.y,a=e*r-i*o;0!=a&&(a=1/a);var m=n.zero();return m.x=a*(r*t.x-i*t.y),m.y=a*(e*t.y-o*t.x),m},r.mul=function(t,e){if(e&&"x"in e&&"y"in e){s&&n.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y,a=t.ex.y*e.x+t.ey.y*e.y;return n.neo(i,a)}if(e&&"ex"in e&&"ey"in e)return s&&r.assert(e),new r(t.ex.x*e.ex.x+t.ey.x*e.ex.y,t.ex.x*e.ey.x+t.ey.x*e.ey.y,t.ex.y*e.ex.x+t.ey.y*e.ex.y,t.ex.y*e.ey.x+t.ey.y*e.ey.y);s&&o.assert(!1)},r.mulVec2=function(t,e){s&&n.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y,o=t.ex.y*e.x+t.ey.y*e.y;return n.neo(i,o)},r.mulMat22=function(t,e){return s&&r.assert(e),new r(t.ex.x*e.ex.x+t.ey.x*e.ex.y,t.ex.x*e.ey.x+t.ey.x*e.ey.y,t.ex.y*e.ex.x+t.ey.y*e.ex.y,t.ex.y*e.ey.x+t.ey.y*e.ey.y)},r.mulT=function(t,e){return e&&"x"in e&&"y"in e?(s&&n.assert(e),n.neo(n.dot(e,t.ex),n.dot(e,t.ey))):e&&"ex"in e&&"ey"in e?(s&&r.assert(e),new r(n.neo(n.dot(t.ex,e.ex),n.dot(t.ey,e.ex)),n.neo(n.dot(t.ex,e.ey),n.dot(t.ey,e.ey)))):void(s&&o.assert(!1))},r.mulTVec2=function(t,e){return s&&r.assert(t),s&&n.assert(e),n.neo(n.dot(e,t.ex),n.dot(e,t.ey))},r.mulTMat22=function(t,e){return s&&r.assert(t),s&&r.assert(e),new r(n.neo(n.dot(t.ex,e.ex),n.dot(t.ey,e.ex)),n.neo(n.dot(t.ex,e.ey),n.dot(t.ey,e.ey)))},r.abs=function(t){return s&&r.assert(t),new r(n.abs(t.ex),n.abs(t.ey))},r.add=function(t,e){return s&&r.assert(t),s&&r.assert(e),new r(n.add(t.ex,e.ex),n.add(t.ey,e.ey))}})),h.register("hyFEM",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;h("bVyf9");var i=h("8o39l"),s=h("6a2BC"),o=h("aah62"),n=h("aVWN5");function r(){this.type,this.localNormal=i.zero(),this.localPoint=i.zero(),this.points=[new a,new a],this.pointCount=0}function a(){this.localPoint=i.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.id=new m}function m(){this.cf=new c}function c(){this.indexA,this.indexB,this.typeA,this.typeB}function _(){this.normal,this.points=[],this.separations=[]}t.exports=r,t.exports.clipSegmentToLine=function(t,e,s,o,n){var a=0,m=i.dot(s,e[0].v)-o,h=i.dot(s,e[1].v)-o;m<=0&&t[a++].set(e[0]);h<=0&&t[a++].set(e[1]);if(m*h<0){var c=m/(m-h);t[a].v.setCombine(1-c,e[0].v,c,e[1].v),t[a].id.cf.indexA=n,t[a].id.cf.indexB=e[0].id.cf.indexB,t[a].id.cf.typeA=r.e_vertex,t[a].id.cf.typeB=r.e_face,++a}return a},t.exports.clipVertex=u,t.exports.getPointStates=function(t,e,i,s){for(var o=0;o<i.pointCount;++o){var n=i.points[o].id;t[o]=l.removeState;for(var r=0;r<s.pointCount;++r)if(s.points[r].id.key==n.key){t[o]=l.persistState;break}}for(o=0;o<s.pointCount;++o){n=s.points[o].id;e[o]=l.addState;for(r=0;r<i.pointCount;++r)if(i.points[r].id.key==n.key){e[o]=l.persistState;break}}},t.exports.PointState=l,r.e_circles=0,r.e_faceA=1,r.e_faceB=2,r.e_vertex=0,r.e_face=1,Object.defineProperty(m.prototype,"key",{get:function(){return this.cf.indexA+4*this.cf.indexB+16*this.cf.typeA+64*this.cf.typeB},enumerable:!0,configurable:!0}),m.prototype.set=function(t){this.cf.set(t.cf)},c.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.typeA=t.typeA,this.typeB=t.typeB},r.prototype.getWorldManifold=function(t,e,a,m,h){if(0!=this.pointCount){var c=(t=t||new _).normal,l=t.points,u=t.separations;switch(this.type){case r.e_circles:c=i.neo(1,0);var p=s.mulVec2(e,this.localPoint),y=s.mulVec2(m,this.points[0].localPoint),d=i.sub(y,p);i.lengthSquared(d)>o.EPSILON*o.EPSILON&&(c.set(d),c.normalize());var f=p.clone().addMul(a,c),v=y.clone().addMul(-h,c);l[0]=i.mid(f,v),u[0]=i.dot(i.sub(v,f),c),l.length=1,u.length=1;break;case r.e_faceA:c=n.mulVec2(e.q,this.localNormal);for(var A=s.mulVec2(e,this.localPoint),x=0;x<this.pointCount;++x){var b=s.mulVec2(m,this.points[x].localPoint);f=i.clone(b).addMul(a-i.dot(i.sub(b,A),c),c),v=i.clone(b).subMul(h,c);l[x]=i.mid(f,v),u[x]=i.dot(i.sub(v,f),c)}l.length=this.pointCount,u.length=this.pointCount;break;case r.e_faceB:c=n.mulVec2(m.q,this.localNormal);for(A=s.mulVec2(m,this.localPoint),x=0;x<this.pointCount;++x){b=s.mulVec2(e,this.points[x].localPoint),v=i.combine(1,b,h-i.dot(i.sub(b,A),c),c),f=i.combine(1,b,-a,c);l[x]=i.mid(f,v),u[x]=i.dot(i.sub(f,v),c)}l.length=this.pointCount,u.length=this.pointCount,c.mul(-1)}return t.normal=c,t.points=l,t.separations=u,t}};var l={nullState:0,addState:1,persistState:2,removeState:3};function u(){this.v=i.zero(),this.id=new m}u.prototype.set=function(t){this.v.set(t.v),this.id.set(t.id)}})),h.register("6KczB",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=p,t.exports.Input=_,t.exports.Output=l,t.exports.Proxy=y,t.exports.Cache=u;var s=h("9MRkU"),o=h("bVyf9"),n=h("enKkk"),r=h("aah62"),a=h("8o39l");h("fki3m"),h("5MFA1"),h("hMh4F");var m=h("aVWN5");h("8gqWb");var c=h("6a2BC");function _(){this.proxyA=new y,this.proxyB=new y,this.transformA=null,this.transformB=null,this.useRadii=!1}function l(){this.pointA=a.zero(),this.pointB=a.zero(),this.distance,this.iterations}function u(){this.metric=0,this.indexA=[],this.indexB=[],this.count=0}function p(t,e,i){++n.gjkCalls;var o=i.proxyA,h=i.proxyB,_=i.transformA,l=i.transformB,u=new f;u.readCache(e,o,_,h,l);for(var p=u.m_v,y=s.maxDistnceIterations,d=[],v=[],A=0,x=0;x<y;){A=u.m_count;for(var b=0;b<A;++b)d[b]=p[b].indexA,v[b]=p[b].indexB;if(u.solve(),3==u.m_count)break;(I=u.getClosestPoint()).lengthSquared();var g=u.getSearchDirection();if(g.lengthSquared()<r.EPSILON*r.EPSILON)break;var B=p[u.m_count];B.indexA=o.getSupport(m.mulTVec2(_.q,a.neg(g))),B.wA=c.mulVec2(_,o.getVertex(B.indexA)),B.indexB=h.getSupport(m.mulTVec2(l.q,g)),B.wB=c.mulVec2(l,h.getVertex(B.indexB)),B.w=a.sub(B.wB,B.wA),++x,++n.gjkIters;var w=!1;for(b=0;b<A;++b)if(B.indexA==d[b]&&B.indexB==v[b]){w=!0;break}if(w)break;++u.m_count}if(n.gjkMaxIters=r.max(n.gjkMaxIters,x),u.getWitnessPoints(t.pointA,t.pointB),t.distance=a.distance(t.pointA,t.pointB),t.iterations=x,u.writeCache(e),i.useRadii){var M=o.m_radius,S=h.m_radius;if(t.distance>M+S&&t.distance>r.EPSILON){t.distance-=M+S;var C=a.sub(t.pointB,t.pointA);C.normalize(),t.pointA.addMul(M,C),t.pointB.subMul(S,C)}else{var I=a.mid(t.pointA,t.pointB);t.pointA.set(I),t.pointB.set(I),t.distance=0}}}function y(){this.m_buffer=[],this.m_vertices=[],this.m_count=0,this.m_radius=0}function d(){this.indexA,this.indexB,this.wA=a.zero(),this.wB=a.zero(),this.w=a.zero(),this.a}function f(){this.m_v1=new d,this.m_v2=new d,this.m_v3=new d,this.m_v=[this.m_v1,this.m_v2,this.m_v3],this.m_count}h("fpvSw"),h("e8qxR"),n.gjkCalls=0,n.gjkIters=0,n.gjkMaxIters=0,y.prototype.getVertexCount=function(){return this.m_count},y.prototype.getVertex=function(t){return i&&o.assert(0<=t&&t<this.m_count),this.m_vertices[t]},y.prototype.getSupport=function(t){for(var e=0,i=a.dot(this.m_vertices[0],t),s=0;s<this.m_count;++s){var o=a.dot(this.m_vertices[s],t);o>i&&(e=s,i=o)}return e},y.prototype.getSupportVertex=function(t){return this.m_vertices[this.getSupport(t)]},y.prototype.set=function(t,e){i&&o.assert("function"==typeof t.computeDistanceProxy),t.computeDistanceProxy(this,e)},d.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.wA=a.clone(t.wA),this.wB=a.clone(t.wB),this.w=a.clone(t.w),this.a=t.a},f.prototype.print=function(){return 3==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y,this.m_v3.a,this.m_v3.wA.x,this.m_v3.wA.y,this.m_v3.wB.x,this.m_v3.wB.y].toString():2==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y].toString():1==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y].toString():"+"+this.m_count},f.prototype.readCache=function(t,e,s,n,m){i&&o.assert(t.count<=3),this.m_count=t.count;for(var h=0;h<this.m_count;++h){(y=this.m_v[h]).indexA=t.indexA[h],y.indexB=t.indexB[h];var _=e.getVertex(y.indexA),l=n.getVertex(y.indexB);y.wA=c.mulVec2(s,_),y.wB=c.mulVec2(m,l),y.w=a.sub(y.wB,y.wA),y.a=0}if(this.m_count>1){var u=t.metric,p=this.getMetric();(p<.5*u||2*u<p||p<r.EPSILON)&&(this.m_count=0)}if(0==this.m_count){var y;(y=this.m_v[0]).indexA=0,y.indexB=0;_=e.getVertex(0),l=n.getVertex(0);y.wA=c.mulVec2(s,_),y.wB=c.mulVec2(m,l),y.w=a.sub(y.wB,y.wA),y.a=1,this.m_count=1}},f.prototype.writeCache=function(t){t.metric=this.getMetric(),t.count=this.m_count;for(var e=0;e<this.m_count;++e)t.indexA[e]=this.m_v[e].indexA,t.indexB[e]=this.m_v[e].indexB},f.prototype.getSearchDirection=function(){switch(this.m_count){case 1:return a.neg(this.m_v1.w);case 2:var t=a.sub(this.m_v2.w,this.m_v1.w);return a.cross(t,a.neg(this.m_v1.w))>0?a.cross(1,t):a.cross(t,1);default:return i&&o.assert(!1),a.zero()}},f.prototype.getClosestPoint=function(){switch(this.m_count){case 0:default:return i&&o.assert(!1),a.zero();case 1:return a.clone(this.m_v1.w);case 2:return a.combine(this.m_v1.a,this.m_v1.w,this.m_v2.a,this.m_v2.w);case 3:return a.zero()}},f.prototype.getWitnessPoints=function(t,e){switch(this.m_count){case 0:default:i&&o.assert(!1);break;case 1:t.set(this.m_v1.wA),e.set(this.m_v1.wB);break;case 2:t.setCombine(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),e.setCombine(this.m_v1.a,this.m_v1.wB,this.m_v2.a,this.m_v2.wB);break;case 3:t.setCombine(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),t.addMul(this.m_v3.a,this.m_v3.wA),e.set(t)}},f.prototype.getMetric=function(){switch(this.m_count){case 0:default:return i&&o.assert(!1),0;case 1:return 0;case 2:return a.distance(this.m_v1.w,this.m_v2.w);case 3:return a.cross(a.sub(this.m_v2.w,this.m_v1.w),a.sub(this.m_v3.w,this.m_v1.w))}},f.prototype.solve=function(){switch(this.m_count){case 1:break;case 2:this.solve2();break;case 3:this.solve3();break;default:i&&o.assert(!1)}},f.prototype.solve2=function(){var t=this.m_v1.w,e=this.m_v2.w,i=a.sub(e,t),s=-a.dot(t,i);if(s<=0)return this.m_v1.a=1,void(this.m_count=1);var o=a.dot(e,i);if(o<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);var n=1/(o+s);this.m_v1.a=o*n,this.m_v2.a=s*n,this.m_count=2},f.prototype.solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,i=this.m_v3.w,s=a.sub(e,t),o=a.dot(t,s),n=a.dot(e,s),r=-o,m=a.sub(i,t),h=a.dot(t,m),c=a.dot(i,m),_=-h,l=a.sub(i,e),u=a.dot(e,l),p=a.dot(i,l),y=-u,d=a.cross(s,m),f=d*a.cross(e,i),v=d*a.cross(i,t),A=d*a.cross(t,e);if(r<=0&&_<=0)return this.m_v1.a=1,void(this.m_count=1);if(n>0&&r>0&&A<=0){var x=1/(n+r);return this.m_v1.a=n*x,this.m_v2.a=r*x,void(this.m_count=2)}if(c>0&&_>0&&v<=0){var b=1/(c+_);return this.m_v1.a=c*b,this.m_v3.a=_*b,this.m_count=2,void this.m_v2.set(this.m_v3)}if(n<=0&&y<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);if(c<=0&&p<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.set(this.m_v3);if(p>0&&y>0&&f<=0){var g=1/(p+y);return this.m_v2.a=p*g,this.m_v3.a=y*g,this.m_count=2,void this.m_v1.set(this.m_v3)}var B=1/(f+v+A);this.m_v1.a=f*B,this.m_v2.a=v*B,this.m_v3.a=A*B,this.m_count=3},p.testOverlap=function(t,e,i,s,o,n){var a=new _;a.proxyA.set(t,e),a.proxyB.set(i,s),a.transformA=o,a.transformB=n,a.useRadii=!0;var m=new u,h=new l;return p(h,m,a),h.distance<10*r.EPSILON}})),h.register("enKkk",(function(e,i){var s;t(e.exports,"toString",(()=>s),(t=>s=t));"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;s=function(t){t="string"==typeof t?t:"\n";var e="";for(var i in this)"function"!=typeof this[i]&&"object"!=typeof this[i]&&(e+=i+": "+this[i]+t);return e}})),h.register("fki3m",(function(t,e){var i="undefined"!=typeof DEBUG&&DEBUG,s="undefined"!=typeof ASSERT&&ASSERT;t.exports=r;var o=h("bVyf9"),n=h("aah62");function r(t,e,i){if(!(this instanceof r))return new r(t,e,i);void 0===t?(this.x=0,this.y=0,this.z=0):"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t,this.y=e,this.z=i),s&&r.assert(this)}r.prototype._serialize=function(){return{x:this.x,y:this.y,z:this.z}},r._deserialize=function(t){var e=Object.create(r.prototype);return e.x=t.x,e.y=t.y,e.z=t.z,e},r.neo=function(t,e,i){var s=Object.create(r.prototype);return s.x=t,s.y=e,s.z=i,s},r.clone=function(t){return s&&r.assert(t),r.neo(t.x,t.y,t.z)},r.prototype.toString=function(){return JSON.stringify(this)},r.isValid=function(t){return t&&n.isFinite(t.x)&&n.isFinite(t.y)&&n.isFinite(t.z)},r.assert=function(t){if(s&&!r.isValid(t))throw i&&o.debug(t),new Error("Invalid Vec3!")},r.prototype.setZero=function(){return this.x=0,this.y=0,this.z=0,this},r.prototype.set=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},r.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},r.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},r.prototype.mul=function(t){return this.x*=t,this.y*=t,this.z*=t,this},r.areEqual=function(t,e){return s&&r.assert(t),s&&r.assert(e),t==e||"object"==typeof t&&null!==t&&"object"==typeof e&&null!==e&&t.x===e.x&&t.y===e.y&&t.z===e.z},r.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},r.cross=function(t,e){return new r(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)},r.add=function(t,e){return new r(t.x+e.x,t.y+e.y,t.z+e.z)},r.sub=function(t,e){return new r(t.x-e.x,t.y-e.y,t.z-e.z)},r.mul=function(t,e){return new r(e*t.x,e*t.y,e*t.z)},r.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},r.neg=function(t){return new r(-t.x,-t.y,-t.z)}})),h.register("hMh4F",(function(t,e){var i="undefined"!=typeof DEBUG&&DEBUG,s="undefined"!=typeof ASSERT&&ASSERT;t.exports=a;var o=h("bVyf9");h("aah62");var n=h("8o39l"),r=h("fki3m");function a(t,e,i){"object"==typeof t&&null!==t?(this.ex=r.clone(t),this.ey=r.clone(e),this.ez=r.clone(i)):(this.ex=r(),this.ey=r(),this.ez=r())}a.prototype.toString=function(){return JSON.stringify(this)},a.isValid=function(t){return t&&r.isValid(t.ex)&&r.isValid(t.ey)&&r.isValid(t.ez)},a.assert=function(t){if(s&&!a.isValid(t))throw i&&o.debug(t),new Error("Invalid Mat33!")},a.prototype.setZero=function(){return this.ex.setZero(),this.ey.setZero(),this.ez.setZero(),this},a.prototype.solve33=function(t){var e=r.dot(this.ex,r.cross(this.ey,this.ez));0!=e&&(e=1/e);var i=new r;return i.x=e*r.dot(t,r.cross(this.ey,this.ez)),i.y=e*r.dot(this.ex,r.cross(t,this.ez)),i.z=e*r.dot(this.ex,r.cross(this.ey,t)),i},a.prototype.solve22=function(t){var e=this.ex.x,i=this.ey.x,s=this.ex.y,o=this.ey.y,r=e*o-i*s;0!=r&&(r=1/r);var a=n.zero();return a.x=r*(o*t.x-i*t.y),a.y=r*(e*t.y-s*t.x),a},a.prototype.getInverse22=function(t){var e=this.ex.x,i=this.ey.x,s=this.ex.y,o=this.ey.y,n=e*o-i*s;0!=n&&(n=1/n),t.ex.x=n*o,t.ey.x=-n*i,t.ex.z=0,t.ex.y=-n*s,t.ey.y=n*e,t.ey.z=0,t.ez.x=0,t.ez.y=0,t.ez.z=0},a.prototype.getSymInverse33=function(t){var e=r.dot(this.ex,r.cross(this.ey,this.ez));0!=e&&(e=1/e);var i=this.ex.x,s=this.ey.x,o=this.ez.x,n=this.ey.y,a=this.ez.y,m=this.ez.z;t.ex.x=e*(n*m-a*a),t.ex.y=e*(o*a-s*m),t.ex.z=e*(s*a-o*n),t.ey.x=t.ex.y,t.ey.y=e*(i*m-o*o),t.ey.z=e*(o*s-i*a),t.ez.x=t.ex.z,t.ez.y=t.ey.z,t.ez.z=e*(i*n-s*s)},a.mul=function(t,e){if(s&&a.assert(t),e&&"z"in e&&"y"in e&&"x"in e){s&&r.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,m=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,h=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new r(i,m,h)}if(e&&"y"in e&&"x"in e){s&&n.assert(e);i=t.ex.x*e.x+t.ey.x*e.y,m=t.ex.y*e.x+t.ey.y*e.y;return n.neo(i,m)}s&&o.assert(!1)},a.mulVec3=function(t,e){s&&a.assert(t),s&&r.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,o=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,n=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new r(i,o,n)},a.mulVec2=function(t,e){s&&a.assert(t),s&&n.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y,o=t.ex.y*e.x+t.ey.y*e.y;return n.neo(i,o)},a.add=function(t,e){return s&&a.assert(t),s&&a.assert(e),new a(r.add(t.ex,e.ex),r.add(t.ey,e.ey),r.add(t.ez,e.ez))}})),h.register("jrVnt",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=n;var s=h("bVyf9");function o(){this.other=null,this.joint=null,this.prev=null,this.next=null}function n(t,e,n){e=t.bodyA||e,n=t.bodyB||n,i&&s.assert(e),i&&s.assert(n),i&&s.assert(e!=n),this.m_type="unknown-joint",this.m_bodyA=e,this.m_bodyB=n,this.m_index=0,this.m_collideConnected=!!t.collideConnected,this.m_prev=null,this.m_next=null,this.m_edgeA=new o,this.m_edgeB=new o,this.m_islandFlag=!1,this.m_userData=t.userData}n.TYPES={},n._deserialize=function(t,e,i){var s=n.TYPES[t.type];return s&&i(s,t)},n.prototype.isActive=function(){return this.m_bodyA.isActive()&&this.m_bodyB.isActive()},n.prototype.getType=function(){return this.m_type},n.prototype.getBodyA=function(){return this.m_bodyA},n.prototype.getBodyB=function(){return this.m_bodyB},n.prototype.getNext=function(){return this.m_next},n.prototype.getUserData=function(){return this.m_userData},n.prototype.setUserData=function(t){this.m_userData=t},n.prototype.getCollideConnected=function(){return this.m_collideConnected},n.prototype.getAnchorA=function(){},n.prototype.getAnchorB=function(){},n.prototype.getReactionForce=function(t){},n.prototype.getReactionTorque=function(t){},n.prototype.shiftOrigin=function(t){},n.prototype.initVelocityConstraints=function(t){},n.prototype.solveVelocityConstraints=function(t){},n.prototype.solvePositionConstraints=function(t){}})),h.register("hYw2e",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=function(t,e){var m=n.now();++r.toiCalls,t.state=v.e_unknown,t.t=e.tMax;var h=e.proxyA,c=e.proxyB,_=e.sweepA,d=e.sweepB;_.normalize(),d.normalize();var x=e.tMax,b=h.m_radius+c.m_radius,g=a.max(s.linearSlop,b-3*s.linearSlop),B=.25*s.linearSlop;i&&o.assert(g>B);var w=0,M=s.maxTOIIterations,S=0,C=new f,I=new p;for(I.proxyA=e.proxyA,I.proxyB=e.proxyB,I.useRadii=!1;;){var V=l.identity(),T=l.identity();_.getTransform(V,w),d.getTransform(T,w),I.transformA=V,I.transformB=T;var P=new y;if(u(P,C,I),P.distance<=0){t.state=v.e_overlapped,t.t=0;break}if(P.distance<g+B){t.state=v.e_touching,t.t=w;break}var z=new A;z.initialize(C,h,_,c,d,w);for(var E=!1,F=x,q=0;;){var L=z.findMinSeparation(F);z.indexA,z.indexB;if(L>g+B){t.state=v.e_separated,t.t=x,E=!0;break}if(L>g-B){w=F;break}var D=z.evaluate(w);z.indexA,z.indexB;if(D<g-B){t.state=v.e_failed,t.t=w,E=!0;break}if(D<=g+B){t.state=v.e_touching,t.t=w,E=!0;break}for(var R=0,k=w,j=F;;){var O;O=1&R?k+(g-D)*(j-k)/(L-D):.5*(k+j),++R,++r.toiRootIters;var U=z.evaluate(O);z.indexA,z.indexB;if(a.abs(U-g)<B){F=O;break}if(U>g?(k=O,D=U):(j=O,L=U),50==R)break}if(r.toiMaxRootIters=a.max(r.toiMaxRootIters,R),++q==s.maxPolygonVertices)break}if(++S,++r.toiIters,E)break;if(S==M){t.state=v.e_failed,t.t=w;break}}r.toiMaxIters=a.max(r.toiMaxIters,S);var G=n.diff(m);r.toiMaxTime=a.max(r.toiMaxTime,G),r.toiTime+=G},t.exports.Input=function(){this.proxyA=new d,this.proxyB=new d,this.sweepA=new _,this.sweepB=new _,this.tMax},t.exports.Output=v;var s=h("9MRkU"),o=h("bVyf9"),n=h("6CGaB"),r=h("enKkk"),a=h("aah62"),m=h("8o39l");h("fki3m"),h("5MFA1"),h("hMh4F");var c=h("aVWN5"),_=h("8gqWb"),l=h("6a2BC");h("fpvSw"),h("e8qxR");var u=h("6KczB"),p=u.Input,y=u.Output,d=u.Proxy,f=u.Cache;function v(){this.state,this.t}v.e_unknown=0,v.e_failed=1,v.e_overlapped=2,v.e_touching=3,v.e_separated=4,r.toiTime=0,r.toiMaxTime=0,r.toiCalls=0,r.toiIters=0,r.toiMaxIters=0,r.toiRootIters=0,r.toiMaxRootIters=0;function A(){this.m_proxyA=new d,this.m_proxyB=new d,this.m_sweepA,this.m_sweepB,this.indexA,this.indexB,this.m_type,this.m_localPoint=m.zero(),this.m_axis=m.zero()}A.prototype.initialize=function(t,e,s,n,r,a){this.m_proxyA=e,this.m_proxyB=n;var h=t.count;i&&o.assert(0<h&&h<3),this.m_sweepA=s,this.m_sweepB=r;var _=l.identity(),u=l.identity();if(this.m_sweepA.getTransform(_,a),this.m_sweepB.getTransform(u,a),1==h){this.m_type=1;var p=this.m_proxyA.getVertex(t.indexA[0]),y=this.m_proxyB.getVertex(t.indexB[0]),d=l.mulVec2(_,p),f=l.mulVec2(u,y);return this.m_axis.setCombine(1,f,-1,d),B=this.m_axis.normalize()}if(t.indexA[0]==t.indexA[1]){this.m_type=3;var v=n.getVertex(t.indexB[0]),A=n.getVertex(t.indexB[1]);this.m_axis=m.cross(m.sub(A,v),1),this.m_axis.normalize();var x=c.mulVec2(u.q,this.m_axis);this.m_localPoint=m.mid(v,A);f=l.mulVec2(u,this.m_localPoint),p=e.getVertex(t.indexA[0]),d=l.mulVec2(_,p);return(B=m.dot(d,x)-m.dot(f,x))<0&&(this.m_axis=m.neg(this.m_axis),B=-B),B}this.m_type=2;var b=this.m_proxyA.getVertex(t.indexA[0]),g=this.m_proxyA.getVertex(t.indexA[1]);this.m_axis=m.cross(m.sub(g,b),1),this.m_axis.normalize();x=c.mulVec2(_.q,this.m_axis);this.m_localPoint=m.mid(b,g);var B;d=l.mulVec2(_,this.m_localPoint),y=this.m_proxyB.getVertex(t.indexB[0]),f=l.mulVec2(u,y);return(B=m.dot(f,x)-m.dot(d,x))<0&&(this.m_axis=m.neg(this.m_axis),B=-B),B},A.prototype.compute=function(t,e){var s=l.identity(),n=l.identity();switch(this.m_sweepA.getTransform(s,e),this.m_sweepB.getTransform(n,e),this.m_type){case 1:if(t){var r=c.mulTVec2(s.q,this.m_axis),a=c.mulTVec2(n.q,m.neg(this.m_axis));this.indexA=this.m_proxyA.getSupport(r),this.indexB=this.m_proxyB.getSupport(a)}var h=this.m_proxyA.getVertex(this.indexA),_=this.m_proxyB.getVertex(this.indexB),u=l.mulVec2(s,h),p=l.mulVec2(n,_);return m.dot(p,this.m_axis)-m.dot(u,this.m_axis);case 2:var y=c.mulVec2(s.q,this.m_axis);u=l.mulVec2(s,this.m_localPoint);if(t){a=c.mulTVec2(n.q,m.neg(y));this.indexA=-1,this.indexB=this.m_proxyB.getSupport(a)}_=this.m_proxyB.getVertex(this.indexB),p=l.mulVec2(n,_);return m.dot(p,y)-m.dot(u,y);case 3:y=c.mulVec2(n.q,this.m_axis),p=l.mulVec2(n,this.m_localPoint);if(t){r=c.mulTVec2(s.q,m.neg(y));this.indexB=-1,this.indexA=this.m_proxyA.getSupport(r)}h=this.m_proxyA.getVertex(this.indexA),u=l.mulVec2(s,h);return m.dot(u,y)-m.dot(p,y);default:return i&&o.assert(!1),t&&(this.indexA=-1,this.indexB=-1),0}},A.prototype.findMinSeparation=function(t){return this.compute(!0,t)},A.prototype.evaluate=function(t){return this.compute(!1,t)}})),h.register("6CGaB",(function(e,i){var s,o;t(e.exports,"now",(()=>s),(t=>s=t)),t(e.exports,"diff",(()=>o),(t=>o=t));"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;s=function(){return Date.now()},o=function(t){return Date.now()-t}})),h.register("jYuki",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=m;var s=h("bVyf9");h("ecDm3");var o=h("aah62");h("6a2BC");var n=h("aVWN5"),r=h("8o39l");h("l2alD"),h("9MRkU");var a=h("eacC4");function m(t,e){if(!(this instanceof m))return new m(t,e);m._super.call(this),this.m_type=m.TYPE,this.m_p=r.zero(),this.m_radius=1,"object"==typeof t&&r.isValid(t)?(this.m_p.set(t),"number"==typeof e&&(this.m_radius=e)):"number"==typeof t&&(this.m_radius=t)}m._super=a,m.prototype=Object.create(m._super.prototype),m.TYPE="circle",a.TYPES[m.TYPE]=m,m.prototype._serialize=function(){return{type:this.m_type,p:this.m_p,radius:this.m_radius}},m._deserialize=function(t){return new m(t.p,t.radius)},m.prototype.getRadius=function(){return this.m_radius},m.prototype.getCenter=function(){return this.m_p},m.prototype.getVertex=function(t){return i&&s.assert(0==t),this.m_p},m.prototype.getVertexCount=function(t){return 1},m.prototype._clone=function(){var t=new m;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_p=this.m_p.clone(),t},m.prototype.getChildCount=function(){return 1},m.prototype.testPoint=function(t,e){var i=r.add(t.p,n.mulVec2(t.q,this.m_p)),s=r.sub(e,i);return r.dot(s,s)<=this.m_radius*this.m_radius},m.prototype.rayCast=function(t,e,i,s){var a=r.add(i.p,n.mulVec2(i.q,this.m_p)),m=r.sub(e.p1,a),h=r.dot(m,m)-this.m_radius*this.m_radius,c=r.sub(e.p2,e.p1),_=r.dot(m,c),l=r.dot(c,c),u=_*_-l*h;if(u<0||l<o.EPSILON)return!1;var p=-(_+o.sqrt(u));return 0<=p&&p<=e.maxFraction*l&&(p/=l,t.fraction=p,t.normal=r.add(m,r.mul(p,c)),t.normal.normalize(),!0)},m.prototype.computeAABB=function(t,e,i){var s=r.add(e.p,n.mulVec2(e.q,this.m_p));t.lowerBound.set(s.x-this.m_radius,s.y-this.m_radius),t.upperBound.set(s.x+this.m_radius,s.y+this.m_radius)},m.prototype.computeMass=function(t,e){t.mass=e*o.PI*this.m_radius*this.m_radius,t.center=this.m_p,t.I=t.mass*(.5*this.m_radius*this.m_radius+r.dot(this.m_p,this.m_p))},m.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_p),t.m_count=1,t.m_radius=this.m_radius}})),h.register("h0PS0",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=a,h("ecDm3");var i=h("9MRkU"),s=h("eacC4");h("aah62");var o=h("6a2BC"),n=h("aVWN5"),r=h("8o39l");function a(t,e){if(!(this instanceof a))return new a(t,e);a._super.call(this),this.m_type=a.TYPE,this.m_radius=i.polygonRadius,this.m_vertex1=t?r.clone(t):r.zero(),this.m_vertex2=e?r.clone(e):r.zero(),this.m_vertex0=r.zero(),this.m_vertex3=r.zero(),this.m_hasVertex0=!1,this.m_hasVertex3=!1}h("l2alD"),a._super=s,a.prototype=Object.create(a._super.prototype),a.TYPE="edge",s.TYPES[a.TYPE]=a,a.prototype._serialize=function(){return{type:this.m_type,vertex1:this.m_vertex1,vertex2:this.m_vertex2,vertex0:this.m_vertex0,vertex3:this.m_vertex3,hasVertex0:this.m_hasVertex0,hasVertex3:this.m_hasVertex3}},a._deserialize=function(t){var e=new a(t.vertex1,t.vertex2);return e.hasVertex0&&e.setPrev(t.vertex0),e.hasVertex3&&e.setNext(t.vertex3),e},a.prototype.setNext=function(t){return t?(this.m_vertex3.set(t),this.m_hasVertex3=!0):(this.m_vertex3.setZero(),this.m_hasVertex3=!1),this},a.prototype.setPrev=function(t){return t?(this.m_vertex0.set(t),this.m_hasVertex0=!0):(this.m_vertex0.setZero(),this.m_hasVertex0=!1),this},a.prototype._set=function(t,e){return this.m_vertex1.set(t),this.m_vertex2.set(e),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this},a.prototype._clone=function(){var t=new a;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_vertex1.set(this.m_vertex1),t.m_vertex2.set(this.m_vertex2),t.m_vertex0.set(this.m_vertex0),t.m_vertex3.set(this.m_vertex3),t.m_hasVertex0=this.m_hasVertex0,t.m_hasVertex3=this.m_hasVertex3,t},a.prototype.getChildCount=function(){return 1},a.prototype.testPoint=function(t,e){return!1},a.prototype.rayCast=function(t,e,i,s){var o=n.mulTVec2(i.q,r.sub(e.p1,i.p)),a=n.mulTVec2(i.q,r.sub(e.p2,i.p)),m=r.sub(a,o),h=this.m_vertex1,c=this.m_vertex2,_=r.sub(c,h),l=r.neo(_.y,-_.x);l.normalize();var u=r.dot(l,r.sub(h,o)),p=r.dot(l,m);if(0==p)return!1;var y=u/p;if(y<0||e.maxFraction<y)return!1;var d=r.add(o,r.mul(y,m)),f=r.sub(c,h),v=r.dot(f,f);if(0==v)return!1;var A=r.dot(r.sub(d,h),f)/v;return!(A<0||1<A)&&(t.fraction=y,t.normal=u>0?n.mulVec2(i.q,l).neg():n.mulVec2(i.q,l),!0)},a.prototype.computeAABB=function(t,e,i){var s=o.mulVec2(e,this.m_vertex1),n=o.mulVec2(e,this.m_vertex2);t.combinePoints(s,n),t.extend(this.m_radius)},a.prototype.computeMass=function(t,e){t.mass=0,t.center.setCombine(.5,this.m_vertex1,.5,this.m_vertex2),t.I=0},a.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_vertex1),t.m_vertices.push(this.m_vertex2),t.m_count=2,t.m_radius=this.m_radius}})),h.register("hg1KF",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=_;var s=h("bVyf9");h("ecDm3");var o=h("aah62"),n=h("6a2BC"),r=h("aVWN5"),a=h("8o39l");h("l2alD");var m=h("9MRkU"),c=h("eacC4");function _(t){if(!(this instanceof _))return new _(t);_._super.call(this),this.m_type=_.TYPE,this.m_radius=m.polygonRadius,this.m_centroid=a.zero(),this.m_vertices=[],this.m_normals=[],this.m_count=0,t&&t.length&&this._set(t)}_._super=c,_.prototype=Object.create(_._super.prototype),_.TYPE="polygon",c.TYPES[_.TYPE]=_,_.prototype._serialize=function(){return{type:this.m_type,vertices:this.m_vertices}},_._deserialize=function(t,e,i){var s=[];if(t.vertices)for(var o=0;o<t.vertices.length;o++)s.push(i(a,t.vertices[o]));return new _(s)},_.prototype.getVertex=function(t){return i&&s.assert(0<=t&&t<this.m_count),this.m_vertices[t]},_.prototype._clone=function(){var t=new _;t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_count=this.m_count,t.m_centroid.set(this.m_centroid);for(var e=0;e<this.m_count;e++)t.m_vertices.push(this.m_vertices[e].clone());for(e=0;e<this.m_normals.length;e++)t.m_normals.push(this.m_normals[e].clone());return t},_.prototype.getChildCount=function(){return 1},_.prototype._reset=function(){this._set(this.m_vertices)},_.prototype._set=function(t){if(i&&s.assert(3<=t.length&&t.length<=m.maxPolygonVertices),t.length<3)this._setAsBox(1,1);else{for(var e=o.min(t.length,m.maxPolygonVertices),n=[],r=0;r<e;++r){for(var h=t[r],c=!0,_=0;_<n.length;++_)if(a.distanceSquared(h,n[_])<.25*m.linearSlopSquared){c=!1;break}c&&n.push(h)}if((e=n.length)<3)return i&&s.assert(!1),void this._setAsBox(1,1);var l=0,u=n[0].x;for(r=1;r<e;++r){var p=n[r].x;(p>u||p===u&&n[r].y<n[l].y)&&(l=r,u=p)}for(var y=[],d=0,f=l;;){y[d]=f;var v=0;for(_=1;_<e;++_)if(v!==f){var A=a.sub(n[v],n[y[d]]),x=(h=a.sub(n[_],n[y[d]]),a.cross(A,h));x<0&&(v=_),0===x&&h.lengthSquared()>A.lengthSquared()&&(v=_)}else v=_;if(++d,f=v,v===l)break}if(d<3)return i&&s.assert(!1),void this._setAsBox(1,1);this.m_count=d,this.m_vertices=[];for(r=0;r<d;++r)this.m_vertices[r]=n[y[r]];for(r=0;r<d;++r){var b=r,g=r+1<d?r+1:0,B=a.sub(this.m_vertices[g],this.m_vertices[b]);i&&s.assert(B.lengthSquared()>o.EPSILON*o.EPSILON),this.m_normals[r]=a.cross(B,1),this.m_normals[r].normalize()}this.m_centroid=function(t,e){i&&s.assert(e>=3);for(var n=a.zero(),r=0,m=a.zero(),h=1/3,c=0;c<e;++c){var _=m,l=t[c],u=c+1<e?t[c+1]:t[0],p=a.sub(l,_),y=a.sub(u,_),d=.5*a.cross(p,y);r+=d,n.addMul(d*h,_),n.addMul(d*h,l),n.addMul(d*h,u)}return i&&s.assert(r>o.EPSILON),n.mul(1/r),n}(this.m_vertices,d)}},_.prototype._setAsBox=function(t,e,i,s){if(this.m_vertices[0]=a.neo(t,-e),this.m_vertices[1]=a.neo(t,e),this.m_vertices[2]=a.neo(-t,e),this.m_vertices[3]=a.neo(-t,-e),this.m_normals[0]=a.neo(1,0),this.m_normals[1]=a.neo(0,1),this.m_normals[2]=a.neo(-1,0),this.m_normals[3]=a.neo(0,-1),this.m_count=4,a.isValid(i)){s=s||0,this.m_centroid.set(i);var o=n.identity();o.p.set(i),o.q.set(s);for(var m=0;m<this.m_count;++m)this.m_vertices[m]=n.mulVec2(o,this.m_vertices[m]),this.m_normals[m]=r.mulVec2(o.q,this.m_normals[m])}},_.prototype.testPoint=function(t,e){for(var i=r.mulTVec2(t.q,a.sub(e,t.p)),s=0;s<this.m_count;++s){if(a.dot(this.m_normals[s],a.sub(i,this.m_vertices[s]))>0)return!1}return!0},_.prototype.rayCast=function(t,e,o,n){for(var m=r.mulTVec2(o.q,a.sub(e.p1,o.p)),h=r.mulTVec2(o.q,a.sub(e.p2,o.p)),c=a.sub(h,m),_=0,l=e.maxFraction,u=-1,p=0;p<this.m_count;++p){var y=a.dot(this.m_normals[p],a.sub(this.m_vertices[p],m)),d=a.dot(this.m_normals[p],c);if(0==d){if(y<0)return!1}else d<0&&y<_*d?(_=y/d,u=p):d>0&&y<l*d&&(l=y/d);if(l<_)return!1}return i&&s.assert(0<=_&&_<=e.maxFraction),u>=0&&(t.fraction=_,t.normal=r.mulVec2(o.q,this.m_normals[u]),!0)},_.prototype.computeAABB=function(t,e,i){for(var s=1/0,r=1/0,a=-1/0,m=-1/0,h=0;h<this.m_count;++h){var c=n.mulVec2(e,this.m_vertices[h]);s=o.min(s,c.x),a=o.max(a,c.x),r=o.min(r,c.y),m=o.max(m,c.y)}t.lowerBound.set(s,r),t.upperBound.set(a,m),t.extend(this.m_radius)},_.prototype.computeMass=function(t,e){i&&s.assert(this.m_count>=3);for(var n=a.zero(),r=0,m=0,h=a.zero(),c=0;c<this.m_count;++c)h.add(this.m_vertices[c]);h.mul(1/this.m_count);var _=1/3;for(c=0;c<this.m_count;++c){var l=a.sub(this.m_vertices[c],h),u=c+1<this.m_count?a.sub(this.m_vertices[c+1],h):a.sub(this.m_vertices[0],h),p=a.cross(l,u),y=.5*p;r+=y,n.addCombine(y*_,l,y*_,u);var d=l.x,f=l.y,v=u.x,A=u.y;m+=.25*_*p*(d*d+v*d+v*v+(f*f+A*f+A*A))}t.mass=e*r,i&&s.assert(r>o.EPSILON),n.mul(1/r),t.center.setCombine(1,n,1,h),t.I=e*m,t.I+=t.mass*(a.dot(t.center,t.center)-a.dot(n,n))},_.prototype.validate=function(){for(var t=0;t<this.m_count;++t)for(var e=t,i=t<this.m_count-1?e+1:0,s=this.m_vertices[e],o=a.sub(this.m_vertices[i],s),n=0;n<this.m_count;++n)if(n!=e&&n!=i){var r=a.sub(this.m_vertices[n],s);if(a.cross(o,r)<0)return!1}return!0},_.prototype.computeDistanceProxy=function(t){t.m_vertices=this.m_vertices,t.m_count=this.m_count,t.m_radius=this.m_radius}})),h.register("gv5vF",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=c;var s=h("bVyf9");h("ecDm3"),h("aah62");var o=h("6a2BC");h("aVWN5");var n=h("8o39l");h("l2alD");var r=h("9MRkU"),a=h("eacC4"),m=h("h0PS0");function c(t,e){if(!(this instanceof c))return new c(t,e);c._super.call(this),this.m_type=c.TYPE,this.m_radius=r.polygonRadius,this.m_vertices=[],this.m_count=0,this.m_prevVertex=null,this.m_nextVertex=null,this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_isLoop=e,t&&t.length&&(e?this._createLoop(t):this._createChain(t))}c._super=a,c.prototype=Object.create(c._super.prototype),c.TYPE="chain",a.TYPES[c.TYPE]=c,c.prototype._serialize=function(){const t={type:this.m_type,vertices:this.m_vertices,isLoop:this.m_isLoop,hasPrevVertex:this.m_hasPrevVertex,hasNextVertex:this.m_hasNextVertex};return this.m_prevVertex&&(t.prevVertex=this.m_prevVertex),this.m_nextVertex&&(t.nextVertex=this.m_nextVertex),t},c._deserialize=function(t,e,i){var s=[];if(t.vertices)for(var o=0;o<t.vertices.length;o++)s.push(i(n,t.vertices[o]));var r=new c(s,t.isLoop);return t.prevVertex&&r.setPrevVertex(t.prevVertex),t.nextVertex&&r.setNextVertex(t.nextVertex),r},c.prototype._createLoop=function(t){i&&s.assert(0==this.m_vertices.length&&0==this.m_count),i&&s.assert(t.length>=3);for(var e=1;e<t.length;++e){var o=t[e-1],a=t[e];i&&s.assert(n.distanceSquared(o,a)>r.linearSlopSquared)}this.m_vertices=[],this.m_count=t.length+1;for(e=0;e<t.length;++e)this.m_vertices[e]=n.clone(t[e]);return this.m_vertices[t.length]=n.clone(t[0]),this.m_prevVertex=this.m_vertices[this.m_count-2],this.m_nextVertex=this.m_vertices[1],this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this},c.prototype._createChain=function(t){i&&s.assert(0==this.m_vertices.length&&0==this.m_count),i&&s.assert(t.length>=2);for(var e=1;e<t.length;++e){var o=t[e-1],a=t[e];i&&s.assert(n.distanceSquared(o,a)>r.linearSlopSquared)}this.m_count=t.length;for(e=0;e<t.length;++e)this.m_vertices[e]=n.clone(t[e]);return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex=null,this.m_nextVertex=null,this},c.prototype._reset=function(){this.m_isLoop?this._createLoop(this.m_vertices):this._createChain(this.m_vertices)},c.prototype.setPrevVertex=function(t){this.m_prevVertex=t,this.m_hasPrevVertex=!0},c.prototype.setNextVertex=function(t){this.m_nextVertex=t,this.m_hasNextVertex=!0},c.prototype._clone=function(){var t=new c;return t.createChain(this.m_vertices),t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_prevVertex=this.m_prevVertex,t.m_nextVertex=this.m_nextVertex,t.m_hasPrevVertex=this.m_hasPrevVertex,t.m_hasNextVertex=this.m_hasNextVertex,t},c.prototype.getChildCount=function(){return this.m_count-1},c.prototype.getChildEdge=function(t,e){i&&s.assert(0<=e&&e<this.m_count-1),t.m_type=m.TYPE,t.m_radius=this.m_radius,t.m_vertex1=this.m_vertices[e],t.m_vertex2=this.m_vertices[e+1],e>0?(t.m_vertex0=this.m_vertices[e-1],t.m_hasVertex0=!0):(t.m_vertex0=this.m_prevVertex,t.m_hasVertex0=this.m_hasPrevVertex),e<this.m_count-2?(t.m_vertex3=this.m_vertices[e+2],t.m_hasVertex3=!0):(t.m_vertex3=this.m_nextVertex,t.m_hasVertex3=this.m_hasNextVertex)},c.prototype.getVertex=function(t){return i&&s.assert(0<=t&&t<=this.m_count),t<this.m_count?this.m_vertices[t]:this.m_vertices[0]},c.prototype.testPoint=function(t,e){return!1},c.prototype.rayCast=function(t,e,o,n){return i&&s.assert(0<=n&&n<this.m_count),new m(this.getVertex(n),this.getVertex(n+1)).rayCast(t,e,o,0)},c.prototype.computeAABB=function(t,e,n){i&&s.assert(0<=n&&n<this.m_count);var r=o.mulVec2(e,this.getVertex(n)),a=o.mulVec2(e,this.getVertex(n+1));t.combinePoints(r,a)},c.prototype.computeMass=function(t,e){t.mass=0,t.center=n.neo(),t.I=0},c.prototype.computeDistanceProxy=function(t,e){i&&s.assert(0<=e&&e<this.m_count),t.m_buffer[0]=this.getVertex(e),t.m_buffer[1]=this.getVertex(e+1),t.m_vertices=t.m_buffer,t.m_count=2,t.m_radius=this.m_radius}})),h.register("80gHp",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=s,h("bVyf9");var i=h("hg1KF");function s(t,e,i,o){if(!(this instanceof s))return new s(t,e,i,o);s._super.call(this),this._setAsBox(t,e,i,o)}s._super=i,s.prototype=Object.create(s._super.prototype),s.TYPE="polygon"})),h.register("4XiWY",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT,s=h("bVyf9");h("aah62");var o=h("6a2BC"),n=h("aVWN5"),r=h("8o39l");h("l2alD");var a=h("9MRkU"),m=h("hyFEM"),c=h("f6rGq");h("eacC4");var _=h("hg1KF");function l(t,e,i,s){for(var a=t.m_count,m=i.m_count,h=t.m_normals,c=t.m_vertices,_=i.m_vertices,u=o.mulTXf(s,e),p=0,y=-1/0,d=0;d<a;++d){for(var f=n.mulVec2(u.q,h[d]),v=o.mulVec2(u,c[d]),A=1/0,x=0;x<m;++x){var b=r.dot(f,_[x])-r.dot(f,v);b<A&&(A=b)}A>y&&(y=A,p=d)}l._maxSeparation=y,l._bestIndex=p}function u(t,e,h,c,_){t.pointCount=0;var u=e.m_radius+c.m_radius;l(e,h,c,_);var p=l._bestIndex,y=l._maxSeparation;if(!(y>u)){l(c,_,e,h);var d=l._bestIndex,f=l._maxSeparation;if(!(f>u)){var v,A,x,b,g,B;f>y+.1*a.linearSlop?(v=c,A=e,x=_,b=h,g=d,t.type=m.e_faceB,B=1):(v=e,A=c,x=h,b=_,g=p,t.type=m.e_faceA,B=0);var w=[new m.clipVertex,new m.clipVertex];!function(t,e,a,h,c,_){var l=e.m_normals,u=c.m_count,p=c.m_vertices,y=c.m_normals;i&&s.assert(0<=h&&h<e.m_count);for(var d=n.mulT(_.q,n.mulVec2(a.q,l[h])),f=0,v=1/0,A=0;A<u;++A){var x=r.dot(d,y[A]);x<v&&(v=x,f=A)}var b=f,g=b+1<u?b+1:0;t[0].v=o.mulVec2(_,p[b]),t[0].id.cf.indexA=h,t[0].id.cf.indexB=b,t[0].id.cf.typeA=m.e_face,t[0].id.cf.typeB=m.e_vertex,t[1].v=o.mulVec2(_,p[g]),t[1].id.cf.indexA=h,t[1].id.cf.indexB=g,t[1].id.cf.typeA=m.e_face,t[1].id.cf.typeB=m.e_vertex}(w,v,x,g,A,b);var M=v.m_count,S=v.m_vertices,C=g,I=g+1<M?g+1:0,V=S[C],T=S[I],P=r.sub(T,V);P.normalize();var z=r.cross(P,1),E=r.combine(.5,V,.5,T),F=n.mulVec2(x.q,P),q=r.cross(F,1);V=o.mulVec2(x,V),T=o.mulVec2(x,T);var L=r.dot(q,V),D=-r.dot(F,V)+u,R=r.dot(F,T)+u,k=[new m.clipVertex,new m.clipVertex],j=[new m.clipVertex,new m.clipVertex];if(!(m.clipSegmentToLine(k,w,r.neg(F),D,C)<2||m.clipSegmentToLine(j,k,F,R,I)<2)){t.localNormal=z,t.localPoint=E;for(var O=0,U=0;U<j.length;++U){if(r.dot(q,j[U].v)-L<=u){var G=t.points[O];if(G.localPoint.set(o.mulTVec2(b,j[U].v)),G.id=j[U].id,B){var N=G.id.cf,Y=N.indexA,W=N.indexB,J=N.typeA,H=N.typeB;N.indexA=W,N.indexB=Y,N.typeA=H,N.typeB=J}++O}}t.pointCount=O}}}}t.exports=u,c.addType(_.TYPE,_.TYPE,(function(t,e,o,n,r,a,m){i&&s.assert(o.getType()==_.TYPE),i&&s.assert(a.getType()==_.TYPE),u(t,o.getShape(),e,a.getShape(),r)}))})),h.register("3GiIT",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=_;var i=h("ecDm3"),s=h("9MRkU"),o=h("aah62"),n=h("8o39l");h("fki3m"),h("5MFA1"),h("hMh4F");var r=h("aVWN5");h("8gqWb"),h("6a2BC"),h("fpvSw"),h("e8qxR");var a=h("jrVnt"),m=h("8kh7u");_.TYPE="distance-joint",a.TYPES[_.TYPE]=_,_._super=a,_.prototype=Object.create(_._super.prototype);var c={frequencyHz:0,dampingRatio:0};function _(t,e,s,r,m){if(!(this instanceof _))return new _(t,e,s,r,m);if(s&&r&&"m_type"in r&&"x"in s&&"y"in s){var h=s;s=r,r=h}t=i(t,c),a.call(this,t,e,s),e=this.m_bodyA,s=this.m_bodyB,this.m_type=_.TYPE,this.m_localAnchorA=n.clone(r?e.getLocalPoint(r):t.localAnchorA||n.zero()),this.m_localAnchorB=n.clone(m?s.getLocalPoint(m):t.localAnchorB||n.zero()),this.m_length=o.isFinite(t.length)?t.length:n.distance(e.getWorldPoint(this.m_localAnchorA),s.getWorldPoint(this.m_localAnchorB)),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=0,this.m_gamma=0,this.m_bias=0,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}_.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,length:this.m_length,impulse:this.m_impulse,gamma:this.m_gamma,bias:this.m_bias}},_._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(m,t.bodyA,e),t.bodyB=i(m,t.bodyB,e),new _(t)},_.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB),t.length>0?this.m_length=+t.length:t.length<0||(t.anchorA||t.anchorA||t.anchorA||t.anchorA)&&(this.m_length=n.distance(this.m_bodyA.getWorldPoint(this.m_localAnchorA),this.m_bodyB.getWorldPoint(this.m_localAnchorB)))},_.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},_.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},_.prototype.setLength=function(t){this.m_length=t},_.prototype.getLength=function(){return this.m_length},_.prototype.setFrequency=function(t){this.m_frequencyHz=t},_.prototype.getFrequency=function(){return this.m_frequencyHz},_.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},_.prototype.getDampingRatio=function(){return this.m_dampingRatio},_.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},_.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},_.prototype.getReactionForce=function(t){return n.mul(this.m_impulse,this.m_u).mul(t)},_.prototype.getReactionTorque=function(t){return 0},_.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,a=this.m_bodyA.c_velocity.v,m=this.m_bodyA.c_velocity.w,h=this.m_bodyB.c_position.c,c=this.m_bodyB.c_position.a,_=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,u=r.neo(i),p=r.neo(c);this.m_rA=r.mulVec2(u,n.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=r.mulVec2(p,n.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_u=n.sub(n.add(h,this.m_rB),n.add(e,this.m_rA));var y=this.m_u.length();y>s.linearSlop?this.m_u.mul(1/y):this.m_u.set(0,0);var d=n.cross(this.m_rA,this.m_u),f=n.cross(this.m_rB,this.m_u),v=this.m_invMassA+this.m_invIA*d*d+this.m_invMassB+this.m_invIB*f*f;if(this.m_mass=0!=v?1/v:0,this.m_frequencyHz>0){var A=y-this.m_length,x=2*o.PI*this.m_frequencyHz,b=2*this.m_mass*this.m_dampingRatio*x,g=this.m_mass*x*x,B=t.dt;this.m_gamma=B*(b+B*g),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=A*B*g*this.m_gamma,v+=this.m_gamma,this.m_mass=0!=v?1/v:0}else this.m_gamma=0,this.m_bias=0;if(t.warmStarting){this.m_impulse*=t.dtRatio;var w=n.mul(this.m_impulse,this.m_u);a.subMul(this.m_invMassA,w),m-=this.m_invIA*n.cross(this.m_rA,w),_.addMul(this.m_invMassB,w),l+=this.m_invIB*n.cross(this.m_rB,w)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(a),this.m_bodyA.c_velocity.w=m,this.m_bodyB.c_velocity.v.set(_),this.m_bodyB.c_velocity.w=l},_.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,s=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,r=n.add(e,n.cross(i,this.m_rA)),a=n.add(s,n.cross(o,this.m_rB)),m=n.dot(this.m_u,a)-n.dot(this.m_u,r),h=-this.m_mass*(m+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=h;var c=n.mul(h,this.m_u);e.subMul(this.m_invMassA,c),i-=this.m_invIA*n.cross(this.m_rA,c),s.addMul(this.m_invMassB,c),o+=this.m_invIB*n.cross(this.m_rB,c),this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v.set(s),this.m_bodyB.c_velocity.w=o},_.prototype.solvePositionConstraints=function(t){if(this.m_frequencyHz>0)return!0;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,a=this.m_bodyB.c_position.c,m=this.m_bodyB.c_position.a,h=r.neo(i),c=r.neo(m),_=r.mulSub(h,this.m_localAnchorA,this.m_localCenterA),l=r.mulSub(c,this.m_localAnchorB,this.m_localCenterB),u=n.sub(n.add(a,l),n.add(e,_)),p=u.normalize()-this.m_length;p=o.clamp(p,-s.maxLinearCorrection,s.maxLinearCorrection);var y=-this.m_mass*p,d=n.mul(y,u);return e.subMul(this.m_invMassA,d),i-=this.m_invIA*n.cross(_,d),a.addMul(this.m_invMassB,d),m+=this.m_invIB*n.cross(l,d),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(a),this.m_bodyB.c_position.a=m,o.abs(p)<s.linearSlop}})),h.register("ch2Tm",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=u;var s=h("bVyf9"),o=h("ecDm3");h("9MRkU");var n=h("aah62"),r=h("8o39l");h("fki3m");var a=h("5MFA1");h("hMh4F");var m=h("aVWN5");h("8gqWb"),h("6a2BC"),h("fpvSw"),h("e8qxR");var c=h("jrVnt"),_=h("8kh7u");u.TYPE="friction-joint",c.TYPES[u.TYPE]=u,u._super=c,u.prototype=Object.create(u._super.prototype);var l={maxForce:0,maxTorque:0};function u(t,e,i,s){if(!(this instanceof u))return new u(t,e,i,s);t=o(t,l),c.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=u.TYPE,this.m_localAnchorA=r.clone(s?e.getLocalPoint(s):t.localAnchorA||r.zero()),this.m_localAnchorB=r.clone(s?i.getLocalPoint(s):t.localAnchorB||r.zero()),this.m_linearImpulse=r.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}u.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,maxForce:this.m_maxForce,maxTorque:this.m_maxTorque,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB}},u._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(_,t.bodyA,e),t.bodyB=i(_,t.bodyB,e),new u(t)},u.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},u.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},u.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},u.prototype.setMaxForce=function(t){i&&s.assert(n.isFinite(t)&&t>=0),this.m_maxForce=t},u.prototype.getMaxForce=function(){return this.m_maxForce},u.prototype.setMaxTorque=function(t){i&&s.assert(n.isFinite(t)&&t>=0),this.m_maxTorque=t},u.prototype.getMaxTorque=function(){return this.m_maxTorque},u.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},u.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},u.prototype.getReactionForce=function(t){return r.mul(t,this.m_linearImpulse)},u.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},u.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.a,n=this.m_bodyB.c_velocity.v,h=this.m_bodyB.c_velocity.w,c=m.neo(e),_=m.neo(o);this.m_rA=m.mulVec2(c,r.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=m.mulVec2(_,r.sub(this.m_localAnchorB,this.m_localCenterB));var l=this.m_invMassA,u=this.m_invMassB,p=this.m_invIA,y=this.m_invIB,d=new a;if(d.ex.x=l+u+p*this.m_rA.y*this.m_rA.y+y*this.m_rB.y*this.m_rB.y,d.ex.y=-p*this.m_rA.x*this.m_rA.y-y*this.m_rB.x*this.m_rB.y,d.ey.x=d.ex.y,d.ey.y=l+u+p*this.m_rA.x*this.m_rA.x+y*this.m_rB.x*this.m_rB.x,this.m_linearMass=d.getInverse(),this.m_angularMass=p+y,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var f=r.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);i.subMul(l,f),s-=p*(r.cross(this.m_rA,f)+this.m_angularImpulse),n.addMul(u,f),h+=y*(r.cross(this.m_rB,f)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=h},u.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,s=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,m=this.m_invMassA,h=this.m_invMassB,c=this.m_invIA,_=this.m_invIB,l=t.dt,u=o-i,p=-this.m_angularMass*u,y=this.m_angularImpulse,d=l*this.m_maxTorque;this.m_angularImpulse=n.clamp(this.m_angularImpulse+p,-d,d),i-=c*(p=this.m_angularImpulse-y),o+=_*p;u=r.sub(r.add(s,r.cross(o,this.m_rB)),r.add(e,r.cross(i,this.m_rA))),p=r.neg(a.mulVec2(this.m_linearMass,u)),y=this.m_linearImpulse;this.m_linearImpulse.add(p);d=l*this.m_maxForce;this.m_linearImpulse.lengthSquared()>d*d&&(this.m_linearImpulse.normalize(),this.m_linearImpulse.mul(d)),p=r.sub(this.m_linearImpulse,y),e.subMul(m,p),i-=c*r.cross(this.m_rA,p),s.addMul(h,p),o+=_*r.cross(this.m_rB,p),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=s,this.m_bodyB.c_velocity.w=o},u.prototype.solvePositionConstraints=function(t){return!0}})),h.register("iMop6",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=y;var s=h("bVyf9"),o=h("ecDm3"),n=h("9MRkU"),r=h("aah62"),a=h("8o39l");h("fki3m"),h("5MFA1"),h("hMh4F");var m=h("aVWN5");h("8gqWb"),h("6a2BC"),h("fpvSw"),h("e8qxR");var c=h("jrVnt"),_=h("8kh7u"),l=h("1G4C1"),u=h("ivu2P");y.TYPE="gear-joint",c.TYPES[y.TYPE]=y,y._super=c,y.prototype=Object.create(y._super.prototype);var p={ratio:1};function y(t,e,n,h,_,d){if(!(this instanceof y))return new y(t,e,n,h,_,d);var f,v;t=o(t,p),c.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=y.TYPE,i&&s.assert(h.m_type===l.TYPE||h.m_type===u.TYPE),i&&s.assert(_.m_type===l.TYPE||_.m_type===u.TYPE),this.m_joint1=h||t.joint1,this.m_joint2=_||t.joint2,this.m_ratio=r.isFinite(d)?d:t.ratio,this.m_type1=this.m_joint1.getType(),this.m_type2=this.m_joint2.getType(),this.m_bodyC=this.m_joint1.getBodyA(),this.m_bodyA=this.m_joint1.getBodyB();var A=this.m_bodyA.m_xf,x=this.m_bodyA.m_sweep.a,b=this.m_bodyC.m_xf,g=this.m_bodyC.m_sweep.a;if(this.m_type1===l.TYPE){var B=this.m_joint1;this.m_localAnchorC=B.m_localAnchorA,this.m_localAnchorA=B.m_localAnchorB,this.m_referenceAngleA=B.m_referenceAngle,this.m_localAxisC=a.zero(),f=x-g-this.m_referenceAngleA}else{var w=this.m_joint1;this.m_localAnchorC=w.m_localAnchorA,this.m_localAnchorA=w.m_localAnchorB,this.m_referenceAngleA=w.m_referenceAngle,this.m_localAxisC=w.m_localXAxisA;var M=this.m_localAnchorC,S=m.mulTVec2(b.q,a.add(m.mul(A.q,this.m_localAnchorA),a.sub(A.p,b.p)));f=a.dot(S,this.m_localAxisC)-a.dot(M,this.m_localAxisC)}this.m_bodyD=this.m_joint2.getBodyA(),this.m_bodyB=this.m_joint2.getBodyB();var C=this.m_bodyB.m_xf,I=this.m_bodyB.m_sweep.a,V=this.m_bodyD.m_xf,T=this.m_bodyD.m_sweep.a;if(this.m_type2===l.TYPE){B=this.m_joint2;this.m_localAnchorD=B.m_localAnchorA,this.m_localAnchorB=B.m_localAnchorB,this.m_referenceAngleB=B.m_referenceAngle,this.m_localAxisD=a.zero(),v=I-T-this.m_referenceAngleB}else{w=this.m_joint2;this.m_localAnchorD=w.m_localAnchorA,this.m_localAnchorB=w.m_localAnchorB,this.m_referenceAngleB=w.m_referenceAngle,this.m_localAxisD=w.m_localXAxisA;var P=this.m_localAnchorD,z=m.mulTVec2(V.q,a.add(m.mul(C.q,this.m_localAnchorB),a.sub(C.p,V.p)));v=a.dot(z,this.m_localAxisD)-a.dot(P,this.m_localAxisD)}this.m_constant=f+this.m_ratio*v,this.m_impulse=0,this.m_lcA,this.m_lcB,this.m_lcC,this.m_lcD,this.m_mA,this.m_mB,this.m_mC,this.m_mD,this.m_iA,this.m_iB,this.m_iC,this.m_iD,this.m_JvAC,this.m_JvBD,this.m_JwA,this.m_JwB,this.m_JwC,this.m_JwD,this.m_mass}y.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,joint1:this.m_joint1,joint2:this.m_joint2,ratio:this.m_ratio}},y._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(_,t.bodyA,e),t.bodyB=i(_,t.bodyB,e),t.joint1=i(c,t.joint1,e),t.joint2=i(c,t.joint2,e),new y(t)},y.prototype.getJoint1=function(){return this.m_joint1},y.prototype.getJoint2=function(){return this.m_joint2},y.prototype.setRatio=function(t){i&&s.assert(r.isFinite(t)),this.m_ratio=t},y.prototype.getRatio=function(){return this.m_ratio},y.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},y.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},y.prototype.getReactionForce=function(t){return a.mul(this.m_impulse,this.m_JvAC).mul(t)},y.prototype.getReactionTorque=function(t){return t*(this.m_impulse*this.m_JwA)},y.prototype.initVelocityConstraints=function(t){this.m_lcA=this.m_bodyA.m_sweep.localCenter,this.m_lcB=this.m_bodyB.m_sweep.localCenter,this.m_lcC=this.m_bodyC.m_sweep.localCenter,this.m_lcD=this.m_bodyD.m_sweep.localCenter,this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.a,n=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,h=this.m_bodyC.c_position.a,c=this.m_bodyC.c_velocity.v,_=this.m_bodyC.c_velocity.w,u=this.m_bodyD.c_position.a,p=this.m_bodyD.c_velocity.v,y=this.m_bodyD.c_velocity.w,d=m.neo(e),f=m.neo(o),v=m.neo(h),A=m.neo(u);if(this.m_mass=0,this.m_type1==l.TYPE)this.m_JvAC=a.zero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{var x=m.mulVec2(v,this.m_localAxisC),b=m.mulSub(v,this.m_localAnchorC,this.m_lcC),g=m.mulSub(d,this.m_localAnchorA,this.m_lcA);this.m_JvAC=x,this.m_JwC=a.cross(b,x),this.m_JwA=a.cross(g,x),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_type2==l.TYPE)this.m_JvBD=a.zero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{x=m.mulVec2(A,this.m_localAxisD);var B=m.mulSub(A,this.m_localAnchorD,this.m_lcD),w=m.mulSub(f,this.m_localAnchorB,this.m_lcB);this.m_JvBD=a.mul(this.m_ratio,x),this.m_JwD=this.m_ratio*a.cross(B,x),this.m_JwB=this.m_ratio*a.cross(w,x),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,t.warmStarting?(i.addMul(this.m_mA*this.m_impulse,this.m_JvAC),s+=this.m_iA*this.m_impulse*this.m_JwA,n.addMul(this.m_mB*this.m_impulse,this.m_JvBD),r+=this.m_iB*this.m_impulse*this.m_JwB,c.subMul(this.m_mC*this.m_impulse,this.m_JvAC),_-=this.m_iC*this.m_impulse*this.m_JwC,p.subMul(this.m_mD*this.m_impulse,this.m_JvBD),y-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,this.m_bodyA.c_velocity.v.set(i),this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v.set(n),this.m_bodyB.c_velocity.w=r,this.m_bodyC.c_velocity.v.set(c),this.m_bodyC.c_velocity.w=_,this.m_bodyD.c_velocity.v.set(p),this.m_bodyD.c_velocity.w=y},y.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,s=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,n=this.m_bodyC.c_velocity.v,r=this.m_bodyC.c_velocity.w,m=this.m_bodyD.c_velocity.v,h=this.m_bodyD.c_velocity.w,c=a.dot(this.m_JvAC,e)-a.dot(this.m_JvAC,n)+a.dot(this.m_JvBD,s)-a.dot(this.m_JvBD,m);c+=this.m_JwA*i-this.m_JwC*r+(this.m_JwB*o-this.m_JwD*h);var _=-this.m_mass*c;this.m_impulse+=_,e.addMul(this.m_mA*_,this.m_JvAC),i+=this.m_iA*_*this.m_JwA,s.addMul(this.m_mB*_,this.m_JvBD),o+=this.m_iB*_*this.m_JwB,n.subMul(this.m_mC*_,this.m_JvAC),r-=this.m_iC*_*this.m_JwC,m.subMul(this.m_mD*_,this.m_JvBD),h-=this.m_iD*_*this.m_JwD,this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v.set(s),this.m_bodyB.c_velocity.w=o,this.m_bodyC.c_velocity.v.set(n),this.m_bodyC.c_velocity.w=r,this.m_bodyD.c_velocity.v.set(m),this.m_bodyD.c_velocity.w=h},y.prototype.solvePositionConstraints=function(t){var e,i,s,o,r,h,c,_,u=this.m_bodyA.c_position.c,p=this.m_bodyA.c_position.a,y=this.m_bodyB.c_position.c,d=this.m_bodyB.c_position.a,f=this.m_bodyC.c_position.c,v=this.m_bodyC.c_position.a,A=this.m_bodyD.c_position.c,x=this.m_bodyD.c_position.a,b=m.neo(p),g=m.neo(d),B=m.neo(v),w=m.neo(x),M=0;if(this.m_type1==l.TYPE)s=a.zero(),r=1,c=1,M+=this.m_iA+this.m_iC,e=p-v-this.m_referenceAngleA;else{var S=m.mulVec2(B,this.m_localAxisC),C=m.mulSub(B,this.m_localAnchorC,this.m_lcC),I=m.mulSub(b,this.m_localAnchorA,this.m_lcA);s=S,c=a.cross(C,S),r=a.cross(I,S),M+=this.m_mC+this.m_mA+this.m_iC*c*c+this.m_iA*r*r;var V=a.sub(this.m_localAnchorC,this.m_lcC),T=m.mulTVec2(B,a.add(I,a.sub(u,f)));e=a.dot(a.sub(T,V),this.m_localAxisC)}if(this.m_type2==l.TYPE)o=a.zero(),h=this.m_ratio,_=this.m_ratio,M+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),i=d-x-this.m_referenceAngleB;else{S=m.mulVec2(w,this.m_localAxisD);var P=m.mulSub(w,this.m_localAnchorD,this.m_lcD),z=m.mulSub(g,this.m_localAnchorB,this.m_lcB);o=a.mul(this.m_ratio,S),_=this.m_ratio*a.cross(P,S),h=this.m_ratio*a.cross(z,S),M+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*_*_+this.m_iB*h*h;var E=a.sub(this.m_localAnchorD,this.m_lcD),F=m.mulTVec2(w,a.add(z,a.sub(y,A)));i=a.dot(F,this.m_localAxisD)-a.dot(E,this.m_localAxisD)}var q=e+this.m_ratio*i-this.m_constant,L=0;return M>0&&(L=-q/M),u.addMul(this.m_mA*L,s),p+=this.m_iA*L*r,y.addMul(this.m_mB*L,o),d+=this.m_iB*L*h,f.subMul(this.m_mC*L,s),v-=this.m_iC*L*c,A.subMul(this.m_mD*L,o),x-=this.m_iD*L*_,this.m_bodyA.c_position.c.set(u),this.m_bodyA.c_position.a=p,this.m_bodyB.c_position.c.set(y),this.m_bodyB.c_position.a=d,this.m_bodyC.c_position.c.set(f),this.m_bodyC.c_position.a=v,this.m_bodyD.c_position.c.set(A),this.m_bodyD.c_position.a=x,0<n.linearSlop}})),h.register("1G4C1",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=d;var s=h("bVyf9"),o=h("ecDm3"),n=h("9MRkU"),r=h("aah62"),a=h("8o39l"),m=h("fki3m"),c=h("5MFA1"),_=h("hMh4F"),l=h("aVWN5");h("8gqWb"),h("6a2BC"),h("fpvSw"),h("e8qxR");var u=h("jrVnt"),p=h("8kh7u");d.TYPE="revolute-joint",u.TYPES[d.TYPE]=d,d._super=u,d.prototype=Object.create(d._super.prototype);var y={lowerAngle:0,upperAngle:0,maxMotorTorque:0,motorSpeed:0,enableLimit:!1,enableMotor:!1};function d(t,e,i,s){if(!(this instanceof d))return new d(t,e,i,s);t=o(t,y),u.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=d.TYPE,this.m_localAnchorA=a.clone(s?e.getLocalPoint(s):t.localAnchorA||a.zero()),this.m_localAnchorB=a.clone(s?i.getLocalPoint(s):t.localAnchorB||a.zero()),this.m_referenceAngle=r.isFinite(t.referenceAngle)?t.referenceAngle:i.getAngle()-e.getAngle(),this.m_impulse=m(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new _,this.m_motorMass,this.m_limitState=0}d.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,lowerAngle:this.m_lowerAngle,upperAngle:this.m_upperAngle,maxMotorTorque:this.m_maxMotorTorque,motorSpeed:this.m_motorSpeed,enableLimit:this.m_enableLimit,enableMotor:this.m_enableMotor,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,referenceAngle:this.m_referenceAngle}},d._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(p,t.bodyA,e),t.bodyB=i(p,t.bodyB,e),new d(t)},d.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},d.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},d.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},d.prototype.getReferenceAngle=function(){return this.m_referenceAngle},d.prototype.getJointAngle=function(){var t=this.m_bodyA;return this.m_bodyB.m_sweep.a-t.m_sweep.a-this.m_referenceAngle},d.prototype.getJointSpeed=function(){var t=this.m_bodyA;return this.m_bodyB.m_angularVelocity-t.m_angularVelocity},d.prototype.isMotorEnabled=function(){return this.m_enableMotor},d.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},d.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},d.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},d.prototype.getMotorSpeed=function(){return this.m_motorSpeed},d.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},d.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},d.prototype.isLimitEnabled=function(){return this.m_enableLimit},d.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},d.prototype.getLowerLimit=function(){return this.m_lowerAngle},d.prototype.getUpperLimit=function(){return this.m_upperAngle},d.prototype.setLimits=function(t,e){i&&s.assert(t<=e),t==this.m_lowerAngle&&e==this.m_upperAngle||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=t,this.m_upperAngle=e)},d.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},d.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},d.prototype.getReactionForce=function(t){return a.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},d.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},d.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.a,m=this.m_bodyB.c_velocity.v,h=this.m_bodyB.c_velocity.w,c=l.neo(e),_=l.neo(o);this.m_rA=l.mulVec2(c,a.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=l.mulVec2(_,a.sub(this.m_localAnchorB,this.m_localCenterB));var u=this.m_invMassA,p=this.m_invMassB,y=this.m_invIA,d=this.m_invIB,f=y+d===0;if(this.m_mass.ex.x=u+p+this.m_rA.y*this.m_rA.y*y+this.m_rB.y*this.m_rB.y*d,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*y-this.m_rB.y*this.m_rB.x*d,this.m_mass.ez.x=-this.m_rA.y*y-this.m_rB.y*d,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=u+p+this.m_rA.x*this.m_rA.x*y+this.m_rB.x*this.m_rB.x*d,this.m_mass.ez.y=this.m_rA.x*y+this.m_rB.x*d,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=y+d,this.m_motorMass=y+d,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),(0==this.m_enableMotor||f)&&(this.m_motorImpulse=0),this.m_enableLimit&&0==f){var v=o-e-this.m_referenceAngle;r.abs(this.m_upperAngle-this.m_lowerAngle)<2*n.angularSlop?this.m_limitState=3:v<=this.m_lowerAngle?(1!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=1):v>=this.m_upperAngle?(2!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=2):(this.m_limitState=0,this.m_impulse.z=0)}else this.m_limitState=0;if(t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var A=a.neo(this.m_impulse.x,this.m_impulse.y);i.subMul(u,A),s-=y*(a.cross(this.m_rA,A)+this.m_motorImpulse+this.m_impulse.z),m.addMul(p,A),h+=d*(a.cross(this.m_rB,A)+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v=m,this.m_bodyB.c_velocity.w=h},d.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,s=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,n=this.m_invMassA,h=this.m_invMassB,c=this.m_invIA,_=this.m_invIB,l=c+_===0;if(this.m_enableMotor&&3!=this.m_limitState&&0==l){var u=o-i-this.m_motorSpeed,p=-this.m_motorMass*u,y=this.m_motorImpulse,d=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=r.clamp(this.m_motorImpulse+p,-d,d),i-=c*(p=this.m_motorImpulse-y),o+=_*p}if(this.m_enableLimit&&0!=this.m_limitState&&0==l){var f=a.zero();f.addCombine(1,s,1,a.cross(o,this.m_rB)),f.subCombine(1,e,1,a.cross(i,this.m_rA));var v=o-i;u=m(f.x,f.y,v),p=m.neg(this.m_mass.solve33(u));if(3==this.m_limitState)this.m_impulse.add(p);else if(1==this.m_limitState){if(this.m_impulse.z+p.z<0){var A=a.combine(-1,f,this.m_impulse.z,a.neo(this.m_mass.ez.x,this.m_mass.ez.y)),x=this.m_mass.solve22(A);p.x=x.x,p.y=x.y,p.z=-this.m_impulse.z,this.m_impulse.x+=x.x,this.m_impulse.y+=x.y,this.m_impulse.z=0}else this.m_impulse.add(p)}else if(2==this.m_limitState){if(this.m_impulse.z+p.z>0){A=a.combine(-1,f,this.m_impulse.z,a.neo(this.m_mass.ez.x,this.m_mass.ez.y)),x=this.m_mass.solve22(A);p.x=x.x,p.y=x.y,p.z=-this.m_impulse.z,this.m_impulse.x+=x.x,this.m_impulse.y+=x.y,this.m_impulse.z=0}else this.m_impulse.add(p)}var b=a.neo(p.x,p.y);e.subMul(n,b),i-=c*(a.cross(this.m_rA,b)+p.z),s.addMul(h,b),o+=_*(a.cross(this.m_rB,b)+p.z)}else{(u=a.zero()).addCombine(1,s,1,a.cross(o,this.m_rB)),u.subCombine(1,e,1,a.cross(i,this.m_rA));p=this.m_mass.solve22(a.neg(u));this.m_impulse.x+=p.x,this.m_impulse.y+=p.y,e.subMul(n,p),i-=c*a.cross(this.m_rA,p),s.addMul(h,p),o+=_*a.cross(this.m_rB,p)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=s,this.m_bodyB.c_velocity.w=o},d.prototype.solvePositionConstraints=function(t){var e,i=this.m_bodyA.c_position.c,s=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,m=this.m_bodyB.c_position.a,h=l.neo(s),_=l.neo(m),u=0,p=this.m_invIA+this.m_invIB==0;if(this.m_enableLimit&&0!=this.m_limitState&&0==p){var y=m-s-this.m_referenceAngle,d=0;if(3==this.m_limitState){var f=r.clamp(y-this.m_lowerAngle,-n.maxAngularCorrection,n.maxAngularCorrection);d=-this.m_motorMass*f,u=r.abs(f)}else if(1==this.m_limitState){u=-(f=y-this.m_lowerAngle),f=r.clamp(f+n.angularSlop,-n.maxAngularCorrection,0),d=-this.m_motorMass*f}else if(2==this.m_limitState){u=f=y-this.m_upperAngle,f=r.clamp(f-n.angularSlop,0,n.maxAngularCorrection),d=-this.m_motorMass*f}s-=this.m_invIA*d,m+=this.m_invIB*d}h.set(s),_.set(m);var v=l.mulVec2(h,a.sub(this.m_localAnchorA,this.m_localCenterA)),A=l.mulVec2(_,a.sub(this.m_localAnchorB,this.m_localCenterB));(f=a.zero()).addCombine(1,o,1,A),f.subCombine(1,i,1,v),e=f.length();var x=this.m_invMassA,b=this.m_invMassB,g=this.m_invIA,B=this.m_invIB,w=new c;w.ex.x=x+b+g*v.y*v.y+B*A.y*A.y,w.ex.y=-g*v.x*v.y-B*A.x*A.y,w.ey.x=w.ex.y,w.ey.y=x+b+g*v.x*v.x+B*A.x*A.x;var M=a.neg(w.solve(f));return i.subMul(x,M),s-=g*a.cross(v,M),o.addMul(b,M),m+=B*a.cross(A,M),this.m_bodyA.c_position.c.set(i),this.m_bodyA.c_position.a=s,this.m_bodyB.c_position.c.set(o),this.m_bodyB.c_position.a=m,e<=n.linearSlop&&u<=n.angularSlop}})),h.register("ivu2P",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=d;var s=h("bVyf9"),o=h("ecDm3"),n=h("9MRkU"),r=h("aah62"),a=h("8o39l"),m=h("fki3m"),c=h("5MFA1"),_=h("hMh4F"),l=h("aVWN5");h("8gqWb"),h("6a2BC"),h("fpvSw"),h("e8qxR");var u=h("jrVnt"),p=h("8kh7u");d.TYPE="prismatic-joint",u.TYPES[d.TYPE]=d,d._super=u,d.prototype=Object.create(d._super.prototype);var y={enableLimit:!1,lowerTranslation:0,upperTranslation:0,enableMotor:!1,maxMotorForce:0,motorSpeed:0};function d(t,e,i,s,n){if(!(this instanceof d))return new d(t,e,i,s,n);t=o(t,y),u.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=d.TYPE,this.m_localAnchorA=a.clone(s?e.getLocalPoint(s):t.localAnchorA||a.zero()),this.m_localAnchorB=a.clone(s?i.getLocalPoint(s):t.localAnchorB||a.zero()),this.m_localXAxisA=a.clone(n?e.getLocalVector(n):t.localAxisA||a.neo(1,0)),this.m_localXAxisA.normalize(),this.m_localYAxisA=a.cross(1,this.m_localXAxisA),this.m_referenceAngle=r.isFinite(t.referenceAngle)?t.referenceAngle:i.getAngle()-e.getAngle(),this.m_impulse=m(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=0,this.m_axis=a.zero(),this.m_perp=a.zero(),this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_axis,this.m_perp,this.m_s1,this.m_s2,this.m_a1,this.m_a2,this.m_K=new _,this.m_motorMass}d.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,lowerTranslation:this.m_lowerTranslation,upperTranslation:this.m_upperTranslation,maxMotorForce:this.m_maxMotorForce,motorSpeed:this.m_motorSpeed,enableLimit:this.m_enableLimit,enableMotor:this.m_enableMotor,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,localAxisA:this.m_localXAxisA,referenceAngle:this.m_referenceAngle}},d._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(p,t.bodyA,e),t.bodyB=i(p,t.bodyB,e),t.localAxisA=a(t.localAxisA),new d(t)},d.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB),t.localAxisA&&(this.m_localXAxisA.set(t.localAxisA),this.m_localYAxisA.set(a.cross(1,t.localAxisA)))},d.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},d.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},d.prototype.getLocalAxisA=function(){return this.m_localXAxisA},d.prototype.getReferenceAngle=function(){return this.m_referenceAngle},d.prototype.getJointTranslation=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_bodyB.getWorldPoint(this.m_localAnchorB),i=a.sub(e,t),s=this.m_bodyA.getWorldVector(this.m_localXAxisA);return a.dot(i,s)},d.prototype.getJointSpeed=function(){var t=this.m_bodyA,e=this.m_bodyB,i=l.mulVec2(t.m_xf.q,a.sub(this.m_localAnchorA,t.m_sweep.localCenter)),s=l.mulVec2(e.m_xf.q,a.sub(this.m_localAnchorB,e.m_sweep.localCenter)),o=a.add(t.m_sweep.c,i),n=a.add(e.m_sweep.c,s),r=a.sub(n,o),m=l.mulVec2(t.m_xf.q,this.m_localXAxisA),h=t.m_linearVelocity,c=e.m_linearVelocity,_=t.m_angularVelocity,u=e.m_angularVelocity;return a.dot(r,a.cross(_,m))+a.dot(m,a.sub(a.addCross(c,u,s),a.addCross(h,_,i)))},d.prototype.isLimitEnabled=function(){return this.m_enableLimit},d.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},d.prototype.getLowerLimit=function(){return this.m_lowerTranslation},d.prototype.getUpperLimit=function(){return this.m_upperTranslation},d.prototype.setLimits=function(t,e){i&&s.assert(t<=e),t==this.m_lowerTranslation&&e==this.m_upperTranslation||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e,this.m_impulse.z=0)},d.prototype.isMotorEnabled=function(){return this.m_enableMotor},d.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},d.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},d.prototype.setMaxMotorForce=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorForce=t},d.prototype.getMaxMotorForce=function(){return this.m_maxMotorForce},d.prototype.getMotorSpeed=function(){return this.m_motorSpeed},d.prototype.getMotorForce=function(t){return t*this.m_motorImpulse},d.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},d.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},d.prototype.getReactionForce=function(t){return a.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis).mul(t)},d.prototype.getReactionTorque=function(t){return t*this.m_impulse.y},d.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,s=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,m=this.m_bodyB.c_position.c,h=this.m_bodyB.c_position.a,c=this.m_bodyB.c_velocity.v,_=this.m_bodyB.c_velocity.w,u=l.neo(i),p=l.neo(h),y=l.mulVec2(u,a.sub(this.m_localAnchorA,this.m_localCenterA)),d=l.mulVec2(p,a.sub(this.m_localAnchorB,this.m_localCenterB)),f=a.zero();f.addCombine(1,m,1,d),f.subCombine(1,e,1,y);var v=this.m_invMassA,A=this.m_invMassB,x=this.m_invIA,b=this.m_invIB;this.m_axis=l.mulVec2(u,this.m_localXAxisA),this.m_a1=a.cross(a.add(f,y),this.m_axis),this.m_a2=a.cross(d,this.m_axis),this.m_motorMass=v+A+x*this.m_a1*this.m_a1+b*this.m_a2*this.m_a2,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),this.m_perp=l.mulVec2(u,this.m_localYAxisA),this.m_s1=a.cross(a.add(f,y),this.m_perp),this.m_s2=a.cross(d,this.m_perp);a.cross(y,this.m_perp);var g=v+A+x*this.m_s1*this.m_s1+b*this.m_s2*this.m_s2,B=x*this.m_s1+b*this.m_s2,w=x*this.m_s1*this.m_a1+b*this.m_s2*this.m_a2,M=x+b;0==M&&(M=1);var S=x*this.m_a1+b*this.m_a2,C=v+A+x*this.m_a1*this.m_a1+b*this.m_a2*this.m_a2;if(this.m_K.ex.set(g,B,w),this.m_K.ey.set(B,M,S),this.m_K.ez.set(w,S,C),this.m_enableLimit){var I=a.dot(this.m_axis,f);r.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*n.linearSlop?this.m_limitState=3:I<=this.m_lowerTranslation?1!=this.m_limitState&&(this.m_limitState=1,this.m_impulse.z=0):I>=this.m_upperTranslation?2!=this.m_limitState&&(this.m_limitState=2,this.m_impulse.z=0):(this.m_limitState=0,this.m_impulse.z=0)}else this.m_limitState=0,this.m_impulse.z=0;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var V=a.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis),T=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,P=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;s.subMul(v,V),o-=x*T,c.addMul(A,V),_+=b*P}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(s),this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v.set(c),this.m_bodyB.c_velocity.w=_},d.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,s=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,n=this.m_invMassA,h=this.m_invMassB,c=this.m_invIA,_=this.m_invIB;if(this.m_enableMotor&&3!=this.m_limitState){var l=a.dot(this.m_axis,a.sub(s,e))+this.m_a2*o-this.m_a1*i,u=this.m_motorMass*(this.m_motorSpeed-l),p=this.m_motorImpulse,y=t.dt*this.m_maxMotorForce;this.m_motorImpulse=r.clamp(this.m_motorImpulse+u,-y,y),u=this.m_motorImpulse-p;var d=a.mul(u,this.m_axis),f=u*this.m_a1,v=u*this.m_a2;e.subMul(n,d),i-=c*f,s.addMul(h,d),o+=_*v}var A=a.zero();if(A.x+=a.dot(this.m_perp,s)+this.m_s2*o,A.x-=a.dot(this.m_perp,e)+this.m_s1*i,A.y=o-i,this.m_enableLimit&&0!=this.m_limitState){var x=0;x+=a.dot(this.m_axis,s)+this.m_a2*o,x-=a.dot(this.m_axis,e)+this.m_a1*i;l=m(A.x,A.y,x);var b=m(this.m_impulse),g=this.m_K.solve33(m.neg(l));this.m_impulse.add(g),1==this.m_limitState?this.m_impulse.z=r.max(this.m_impulse.z,0):2==this.m_limitState&&(this.m_impulse.z=r.min(this.m_impulse.z,0));var B=a.combine(-1,A,-(this.m_impulse.z-b.z),a.neo(this.m_K.ez.x,this.m_K.ez.y)),w=a.add(this.m_K.solve22(B),a.neo(b.x,b.y));this.m_impulse.x=w.x,this.m_impulse.y=w.y,g=m.sub(this.m_impulse,b);d=a.combine(g.x,this.m_perp,g.z,this.m_axis),f=g.x*this.m_s1+g.y+g.z*this.m_a1,v=g.x*this.m_s2+g.y+g.z*this.m_a2;e.subMul(n,d),i-=c*f,s.addMul(h,d),o+=_*v}else{g=this.m_K.solve22(a.neg(A));this.m_impulse.x+=g.x,this.m_impulse.y+=g.y;d=a.mul(g.x,this.m_perp),f=g.x*this.m_s1+g.y,v=g.x*this.m_s2+g.y;e.subMul(n,d),i-=c*f,s.addMul(h,d),o+=_*v}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=s,this.m_bodyB.c_velocity.w=o},d.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,s=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,h=l.neo(i),u=l.neo(o),p=this.m_invMassA,y=this.m_invMassB,d=this.m_invIA,f=this.m_invIB,v=l.mulVec2(h,a.sub(this.m_localAnchorA,this.m_localCenterA)),A=l.mulVec2(u,a.sub(this.m_localAnchorB,this.m_localCenterB)),x=a.sub(a.add(s,A),a.add(e,v)),b=l.mulVec2(h,this.m_localXAxisA),g=a.cross(a.add(x,v),b),B=a.cross(A,b),w=l.mulVec2(h,this.m_localYAxisA),M=a.cross(a.add(x,v),w),S=a.cross(A,w),C=m(),I=a.zero();I.x=a.dot(w,x),I.y=o-i-this.m_referenceAngle;var V=r.abs(I.x),T=r.abs(I.y),P=n.linearSlop,z=n.maxLinearCorrection,E=!1,F=0;if(this.m_enableLimit){var q=a.dot(b,x);r.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*P?(F=r.clamp(q,-z,z),V=r.max(V,r.abs(q)),E=!0):q<=this.m_lowerTranslation?(F=r.clamp(q-this.m_lowerTranslation+P,-z,0),V=r.max(V,this.m_lowerTranslation-q),E=!0):q>=this.m_upperTranslation&&(F=r.clamp(q-this.m_upperTranslation-P,0,z),V=r.max(V,q-this.m_upperTranslation),E=!0)}if(E){var L=p+y+d*M*M+f*S*S,D=d*M+f*S,R=d*M*g+f*S*B;0==(U=d+f)&&(U=1);var k=d*g+f*B,j=p+y+d*g*g+f*B*B;(G=new _).ex.set(L,D,R),G.ey.set(D,U,k),G.ez.set(R,k,j);var O=m();O.x=I.x,O.y=I.y,O.z=F,C=G.solve33(m.neg(O))}else{var U,G;L=p+y+d*M*M+f*S*S,D=d*M+f*S;0==(U=d+f)&&(U=1),(G=new c).ex.set(L,D),G.ey.set(D,U);var N=G.solve(a.neg(I));C.x=N.x,C.y=N.y,C.z=0}var Y=a.combine(C.x,w,C.z,b),W=C.x*M+C.y+C.z*g,J=C.x*S+C.y+C.z*B;return e.subMul(p,Y),i-=d*W,s.addMul(y,Y),o+=f*J,this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c=s,this.m_bodyB.c_position.a=o,V<=n.linearSlop&&T<=n.angularSlop}})),h.register("2JiZ1",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=u;var s=h("bVyf9"),o=h("ecDm3");h("9MRkU");var n=h("aah62"),r=h("8o39l");h("fki3m");var a=h("5MFA1");h("hMh4F");var m=h("aVWN5");h("8gqWb"),h("6a2BC"),h("fpvSw"),h("e8qxR");var c=h("jrVnt"),_=h("8kh7u");u.TYPE="motor-joint",c.TYPES[u.TYPE]=u,u._super=c,u.prototype=Object.create(u._super.prototype);var l={maxForce:1,maxTorque:1,correctionFactor:.3};function u(t,e,i){if(!(this instanceof u))return new u(t,e,i);t=o(t,l),c.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=u.TYPE,this.m_linearOffset=n.isFinite(t.linearOffset)?t.linearOffset:e.getLocalPoint(i.getPosition()),this.m_angularOffset=n.isFinite(t.angularOffset)?t.angularOffset:i.getAngle()-e.getAngle(),this.m_linearImpulse=r.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_correctionFactor=t.correctionFactor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_linearError,this.m_angularError,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}u.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,maxForce:this.m_maxForce,maxTorque:this.m_maxTorque,correctionFactor:this.m_correctionFactor,linearOffset:this.m_linearOffset,angularOffset:this.m_angularOffset}},u._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(_,t.bodyA,e),t.bodyB=i(_,t.bodyB,e),new u(t)},u.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},u.prototype.setMaxForce=function(t){i&&s.assert(n.isFinite(t)&&t>=0),this.m_maxForce=t},u.prototype.getMaxForce=function(){return this.m_maxForce},u.prototype.setMaxTorque=function(t){i&&s.assert(n.isFinite(t)&&t>=0),this.m_maxTorque=t},u.prototype.getMaxTorque=function(){return this.m_maxTorque},u.prototype.setCorrectionFactor=function(t){i&&s.assert(n.isFinite(t)&&0<=t&&t<=1),this.m_correctionFactor=t},u.prototype.getCorrectionFactor=function(){return this.m_correctionFactor},u.prototype.setLinearOffset=function(t){t.x==this.m_linearOffset.x&&t.y==this.m_linearOffset.y||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_linearOffset=t)},u.prototype.getLinearOffset=function(){return this.m_linearOffset},u.prototype.setAngularOffset=function(t){t!=this.m_angularOffset&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_angularOffset=t)},u.prototype.getAngularOffset=function(){return this.m_angularOffset},u.prototype.getAnchorA=function(){return this.m_bodyA.getPosition()},u.prototype.getAnchorB=function(){return this.m_bodyB.getPosition()},u.prototype.getReactionForce=function(t){return r.mul(t,this.m_linearImpulse)},u.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},u.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,s=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_position.c,h=this.m_bodyB.c_position.a,c=this.m_bodyB.c_velocity.v,_=this.m_bodyB.c_velocity.w,l=m.neo(i),u=m.neo(h);this.m_rA=m.mulVec2(l,r.neg(this.m_localCenterA)),this.m_rB=m.mulVec2(u,r.neg(this.m_localCenterB));var p=this.m_invMassA,y=this.m_invMassB,d=this.m_invIA,f=this.m_invIB,v=new a;if(v.ex.x=p+y+d*this.m_rA.y*this.m_rA.y+f*this.m_rB.y*this.m_rB.y,v.ex.y=-d*this.m_rA.x*this.m_rA.y-f*this.m_rB.x*this.m_rB.y,v.ey.x=v.ex.y,v.ey.y=p+y+d*this.m_rA.x*this.m_rA.x+f*this.m_rB.x*this.m_rB.x,this.m_linearMass=v.getInverse(),this.m_angularMass=d+f,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),this.m_linearError=r.zero(),this.m_linearError.addCombine(1,n,1,this.m_rB),this.m_linearError.subCombine(1,e,1,this.m_rA),this.m_linearError.sub(m.mulVec2(l,this.m_linearOffset)),this.m_angularError=h-i-this.m_angularOffset,t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var A=r.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);s.subMul(p,A),o-=d*(r.cross(this.m_rA,A)+this.m_angularImpulse),c.addMul(y,A),_+=f*(r.cross(this.m_rB,A)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=s,this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v=c,this.m_bodyB.c_velocity.w=_},u.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,s=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,m=this.m_invMassA,h=this.m_invMassB,c=this.m_invIA,_=this.m_invIB,l=t.dt,u=t.inv_dt,p=o-i+u*this.m_correctionFactor*this.m_angularError,y=-this.m_angularMass*p,d=this.m_angularImpulse,f=l*this.m_maxTorque;this.m_angularImpulse=n.clamp(this.m_angularImpulse+y,-f,f),i-=c*(y=this.m_angularImpulse-d),o+=_*y,(p=r.zero()).addCombine(1,s,1,r.cross(o,this.m_rB)),p.subCombine(1,e,1,r.cross(i,this.m_rA)),p.addMul(u*this.m_correctionFactor,this.m_linearError);y=r.neg(a.mulVec2(this.m_linearMass,p)),d=r.clone(this.m_linearImpulse);this.m_linearImpulse.add(y);f=l*this.m_maxForce;this.m_linearImpulse.clamp(f),y=r.sub(this.m_linearImpulse,d),e.subMul(m,y),i-=c*r.cross(this.m_rA,y),s.addMul(h,y),o+=_*r.cross(this.m_rB,y),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=s,this.m_bodyB.c_velocity.w=o},u.prototype.solvePositionConstraints=function(t){return!0}})),h.register("b6L5O",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=p;var s=h("bVyf9"),o=h("ecDm3"),n=h("aah62"),r=h("8o39l");h("fki3m");var a=h("5MFA1");h("hMh4F");var m=h("aVWN5");h("8gqWb");var c=h("6a2BC");h("fpvSw"),h("e8qxR");var _=h("jrVnt"),l=h("8kh7u");p.TYPE="mouse-joint",_.TYPES[p.TYPE]=p,p._super=_,p.prototype=Object.create(p._super.prototype);var u={maxForce:0,frequencyHz:5,dampingRatio:.7};function p(t,e,m,h){if(!(this instanceof p))return new p(t,e,m,h);t=o(t,u),_.call(this,t,e,m),e=this.m_bodyA,m=this.m_bodyB,this.m_type=p.TYPE,i&&s.assert(n.isFinite(t.maxForce)&&t.maxForce>=0),i&&s.assert(n.isFinite(t.frequencyHz)&&t.frequencyHz>=0),i&&s.assert(n.isFinite(t.dampingRatio)&&t.dampingRatio>=0),this.m_targetA=h?r.clone(h):t.target||r.zero(),this.m_localAnchorB=c.mulTVec2(m.getTransform(),this.m_targetA),this.m_maxForce=t.maxForce,this.m_impulse=r.zero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_beta=0,this.m_gamma=0,this.m_rB=r.zero(),this.m_localCenterB=r.zero(),this.m_invMassB=0,this.m_invIB=0,this.mass=new a,this.m_C=r.zero()}p.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,target:this.m_targetA,maxForce:this.m_maxForce,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,_localAnchorB:this.m_localAnchorB}},p._deserialize=function(t,e,i){(t=Object.assign({},t)).bodyA=i(l,t.bodyA,e),t.bodyB=i(l,t.bodyB,e),t.target=r(t.target);var s=new p(t);return t._localAnchorB&&(s.m_localAnchorB=t._localAnchorB),s},p.prototype.setTarget=function(t){0==this.m_bodyB.isAwake()&&this.m_bodyB.setAwake(!0),this.m_targetA=r.clone(t)},p.prototype.getTarget=function(){return this.m_targetA},p.prototype.setMaxForce=function(t){this.m_maxForce=t},p.getMaxForce=function(){return this.m_maxForce},p.prototype.setFrequency=function(t){this.m_frequencyHz=t},p.prototype.getFrequency=function(){return this.m_frequencyHz},p.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},p.prototype.getDampingRatio=function(){return this.m_dampingRatio},p.prototype.getAnchorA=function(){return r.clone(this.m_targetA)},p.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},p.prototype.getReactionForce=function(t){return r.mul(t,this.m_impulse)},p.prototype.getReactionTorque=function(t){return 0*t},p.prototype.shiftOrigin=function(t){this.m_targetA.sub(t)},p.prototype.initVelocityConstraints=function(t){this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyB.c_position,o=this.m_bodyB.c_velocity,h=e.c,c=e.a,_=o.v,l=o.w,u=m.neo(c),p=this.m_bodyB.getMass(),y=2*n.PI*this.m_frequencyHz,d=2*p*this.m_dampingRatio*y,f=p*(y*y),v=t.dt;i&&s.assert(d+v*f>n.EPSILON),this.m_gamma=v*(d+v*f),0!=this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=v*f*this.m_gamma,this.m_rB=m.mulVec2(u,r.sub(this.m_localAnchorB,this.m_localCenterB));var A=new a;A.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,A.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,A.ey.x=A.ex.y,A.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,this.m_mass=A.getInverse(),this.m_C.set(h),this.m_C.addCombine(1,this.m_rB,-1,this.m_targetA),this.m_C.mul(this.m_beta),l*=.98,t.warmStarting?(this.m_impulse.mul(t.dtRatio),_.addMul(this.m_invMassB,this.m_impulse),l+=this.m_invIB*r.cross(this.m_rB,this.m_impulse)):this.m_impulse.setZero(),o.v.set(_),o.w=l},p.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyB.c_velocity,i=r.clone(e.v),s=e.w,o=r.cross(s,this.m_rB);o.add(i),o.addCombine(1,this.m_C,this.m_gamma,this.m_impulse),o.neg();var n=a.mulVec2(this.m_mass,o),m=r.clone(this.m_impulse);this.m_impulse.add(n);var h=t.dt*this.m_maxForce;this.m_impulse.clamp(h),n=r.sub(this.m_impulse,m),i.addMul(this.m_invMassB,n),s+=this.m_invIB*r.cross(this.m_rB,n),e.v.set(i),e.w=s},p.prototype.solvePositionConstraints=function(t){return!0}})),h.register("jdg48",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG;var i="undefined"!=typeof ASSERT&&ASSERT;t.exports=u;var s=h("bVyf9"),o=h("ecDm3"),n=h("9MRkU"),r=h("aah62"),a=h("8o39l");h("fki3m"),h("5MFA1"),h("hMh4F");var m=h("aVWN5");h("8gqWb"),h("6a2BC"),h("fpvSw"),h("e8qxR");var c=h("jrVnt"),_=h("8kh7u");u.TYPE="pulley-joint",u.MIN_PULLEY_LENGTH=2,c.TYPES[u.TYPE]=u,u._super=c,u.prototype=Object.create(u._super.prototype);var l={collideConnected:!0};function u(t,e,n,m,h,_,p,y){if(!(this instanceof u))return new u(t,e,n,m,h,_,p,y);t=o(t,l),c.call(this,t,e,n),e=this.m_bodyA,n=this.m_bodyB,this.m_type=u.TYPE,this.m_groundAnchorA=m||(t.groundAnchorA||a.neo(-1,1)),this.m_groundAnchorB=h||(t.groundAnchorB||a.neo(1,1)),this.m_localAnchorA=_?e.getLocalPoint(_):t.localAnchorA||a.neo(-1,0),this.m_localAnchorB=p?n.getLocalPoint(p):t.localAnchorB||a.neo(1,0),this.m_lengthA=r.isFinite(t.lengthA)?t.lengthA:a.distance(_,m),this.m_lengthB=r.isFinite(t.lengthB)?t.lengthB:a.distance(p,h),this.m_ratio=r.isFinite(y)?y:t.ratio,i&&s.assert(y>r.EPSILON),this.m_constant=this.m_lengthA+this.m_ratio*this.m_lengthB,this.m_impulse=0,this.m_uA,this.m_uB,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}u.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,groundAnchorA:this.m_groundAnchorA,groundAnchorB:this.m_groundAnchorB,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,lengthA:this.m_lengthA,lengthB:this.m_lengthB,ratio:this.m_ratio}},u._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(_,t.bodyA,e),t.bodyB=i(_,t.bodyB,e),new u(t)},u.prototype.getGroundAnchorA=function(){return this.m_groundAnchorA},u.prototype.getGroundAnchorB=function(){return this.m_groundAnchorB},u.prototype.getLengthA=function(){return this.m_lengthA},u.prototype.getLengthB=function(){return this.m_lengthB},u.prototype.getRatio=function(){return this.m_ratio},u.prototype.getCurrentLengthA=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_groundAnchorA;return a.distance(t,e)},u.prototype.getCurrentLengthB=function(){var t=this.m_bodyB.getWorldPoint(this.m_localAnchorB),e=this.m_groundAnchorB;return a.distance(t,e)},u.prototype.shiftOrigin=function(t){this.m_groundAnchorA.sub(t),this.m_groundAnchorB.sub(t)},u.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},u.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},u.prototype.getReactionForce=function(t){return a.mul(this.m_impulse,this.m_uB).mul(t)},u.prototype.getReactionTorque=function(t){return 0},u.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,s=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.c,h=this.m_bodyB.c_position.a,c=this.m_bodyB.c_velocity.v,_=this.m_bodyB.c_velocity.w,l=m.neo(i),u=m.neo(h);this.m_rA=m.mulVec2(l,a.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=m.mulVec2(u,a.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_uA=a.sub(a.add(e,this.m_rA),this.m_groundAnchorA),this.m_uB=a.sub(a.add(r,this.m_rB),this.m_groundAnchorB);var p=this.m_uA.length(),y=this.m_uB.length();p>10*n.linearSlop?this.m_uA.mul(1/p):this.m_uA.setZero(),y>10*n.linearSlop?this.m_uB.mul(1/y):this.m_uB.setZero();var d=a.cross(this.m_rA,this.m_uA),f=a.cross(this.m_rB,this.m_uB),v=this.m_invMassA+this.m_invIA*d*d,A=this.m_invMassB+this.m_invIB*f*f;if(this.m_mass=v+this.m_ratio*this.m_ratio*A,this.m_mass>0&&(this.m_mass=1/this.m_mass),t.warmStarting){this.m_impulse*=t.dtRatio;var x=a.mul(-this.m_impulse,this.m_uA),b=a.mul(-this.m_ratio*this.m_impulse,this.m_uB);s.addMul(this.m_invMassA,x),o+=this.m_invIA*a.cross(this.m_rA,x),c.addMul(this.m_invMassB,b),_+=this.m_invIB*a.cross(this.m_rB,b)}else this.m_impulse=0;this.m_bodyA.c_velocity.v=s,this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v=c,this.m_bodyB.c_velocity.w=_},u.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,s=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,n=a.add(e,a.cross(i,this.m_rA)),r=a.add(s,a.cross(o,this.m_rB)),m=-a.dot(this.m_uA,n)-this.m_ratio*a.dot(this.m_uB,r),h=-this.m_mass*m;this.m_impulse+=h;var c=a.mul(-h,this.m_uA),_=a.mul(-this.m_ratio*h,this.m_uB);e.addMul(this.m_invMassA,c),i+=this.m_invIA*a.cross(this.m_rA,c),s.addMul(this.m_invMassB,_),o+=this.m_invIB*a.cross(this.m_rB,_),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=s,this.m_bodyB.c_velocity.w=o},u.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,s=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,h=m.neo(i),c=m.neo(o),_=m.mulVec2(h,a.sub(this.m_localAnchorA,this.m_localCenterA)),l=m.mulVec2(c,a.sub(this.m_localAnchorB,this.m_localCenterB)),u=a.sub(a.add(e,this.m_rA),this.m_groundAnchorA),p=a.sub(a.add(s,this.m_rB),this.m_groundAnchorB),y=u.length(),d=p.length();y>10*n.linearSlop?u.mul(1/y):u.setZero(),d>10*n.linearSlop?p.mul(1/d):p.setZero();var f=a.cross(_,u),v=a.cross(l,p),A=this.m_invMassA+this.m_invIA*f*f,x=this.m_invMassB+this.m_invIB*v*v,b=A+this.m_ratio*this.m_ratio*x;b>0&&(b=1/b);var g=this.m_constant-y-this.m_ratio*d,B=r.abs(g),w=-b*g,M=a.mul(-w,u),S=a.mul(-this.m_ratio*w,p);return e.addMul(this.m_invMassA,M),i+=this.m_invIA*a.cross(_,M),s.addMul(this.m_invMassB,S),o+=this.m_invIB*a.cross(l,S),this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c=s,this.m_bodyB.c_position.a=o,B<n.linearSlop}})),h.register("4q8Xc",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=_;var i=h("ecDm3"),s=h("9MRkU"),o=h("aah62"),n=h("8o39l");h("fki3m"),h("5MFA1"),h("hMh4F");var r=h("aVWN5");h("8gqWb"),h("6a2BC"),h("fpvSw"),h("e8qxR");var a=h("jrVnt"),m=h("8kh7u");_.TYPE="rope-joint",a.TYPES[_.TYPE]=_,_._super=a,_.prototype=Object.create(_._super.prototype);var c={maxLength:0};function _(t,e,s,o){if(!(this instanceof _))return new _(t,e,s,o);t=i(t,c),a.call(this,t,e,s),e=this.m_bodyA,s=this.m_bodyB,this.m_type=_.TYPE,this.m_localAnchorA=o?e.getLocalPoint(o):t.localAnchorA||n.neo(-1,0),this.m_localAnchorB=o?s.getLocalPoint(o):t.localAnchorB||n.neo(1,0),this.m_maxLength=t.maxLength,this.m_mass=0,this.m_impulse=0,this.m_length=0,this.m_state=0,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}_.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,maxLength:this.m_maxLength}},_._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(m,t.bodyA,e),t.bodyB=i(m,t.bodyB,e),new _(t)},_.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},_.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},_.prototype.setMaxLength=function(t){this.m_maxLength=t},_.prototype.getMaxLength=function(){return this.m_maxLength},_.prototype.getLimitState=function(){return this.m_state},_.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},_.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},_.prototype.getReactionForce=function(t){return n.mul(this.m_impulse,this.m_u).mul(t)},_.prototype.getReactionTorque=function(t){return 0},_.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,o=this.m_bodyA.c_velocity.v,a=this.m_bodyA.c_velocity.w,m=this.m_bodyB.c_position.c,h=this.m_bodyB.c_position.a,c=this.m_bodyB.c_velocity.v,_=this.m_bodyB.c_velocity.w,l=r.neo(i),u=r.neo(h);this.m_rA=r.mulSub(l,this.m_localAnchorA,this.m_localCenterA),this.m_rB=r.mulSub(u,this.m_localAnchorB,this.m_localCenterB),this.m_u=n.zero(),this.m_u.addCombine(1,m,1,this.m_rB),this.m_u.subCombine(1,e,1,this.m_rA),this.m_length=this.m_u.length();var p=this.m_length-this.m_maxLength;if(this.m_state=p>0?2:0,!(this.m_length>s.linearSlop))return this.m_u.setZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.mul(1/this.m_length);var y=n.cross(this.m_rA,this.m_u),d=n.cross(this.m_rB,this.m_u),f=this.m_invMassA+this.m_invIA*y*y+this.m_invMassB+this.m_invIB*d*d;if(this.m_mass=0!=f?1/f:0,t.warmStarting){this.m_impulse*=t.dtRatio;var v=n.mul(this.m_impulse,this.m_u);o.subMul(this.m_invMassA,v),a-=this.m_invIA*n.cross(this.m_rA,v),c.addMul(this.m_invMassB,v),_+=this.m_invIB*n.cross(this.m_rB,v)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(o),this.m_bodyA.c_velocity.w=a,this.m_bodyB.c_velocity.v.set(c),this.m_bodyB.c_velocity.w=_},_.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,s=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,a=n.addCross(e,i,this.m_rA),m=n.addCross(s,r,this.m_rB),h=this.m_length-this.m_maxLength,c=n.dot(this.m_u,n.sub(m,a));h<0&&(c+=t.inv_dt*h);var _=-this.m_mass*c,l=this.m_impulse;this.m_impulse=o.min(0,this.m_impulse+_),_=this.m_impulse-l;var u=n.mul(_,this.m_u);e.subMul(this.m_invMassA,u),i-=this.m_invIA*n.cross(this.m_rA,u),s.addMul(this.m_invMassB,u),r+=this.m_invIB*n.cross(this.m_rB,u),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=s,this.m_bodyB.c_velocity.w=r},_.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,a=this.m_bodyB.c_position.c,m=this.m_bodyB.c_position.a,h=r.neo(i),c=r.neo(m),_=r.mulSub(h,this.m_localAnchorA,this.m_localCenterA),l=r.mulSub(c,this.m_localAnchorB,this.m_localCenterB),u=n.zero();u.addCombine(1,a,1,l),u.subCombine(1,e,1,_);var p=u.normalize(),y=p-this.m_maxLength;y=o.clamp(y,0,s.maxLinearCorrection);var d=-this.m_mass*y,f=n.mul(d,u);return e.subMul(this.m_invMassA,f),i-=this.m_invIA*n.cross(_,f),a.addMul(this.m_invMassB,f),m+=this.m_invIB*n.cross(l,f),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(a),this.m_bodyB.c_position.a=m,p-this.m_maxLength<s.linearSlop}})),h.register("37QqC",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=u;var i=h("ecDm3"),s=h("9MRkU"),o=h("aah62"),n=h("8o39l"),r=h("fki3m");h("5MFA1");var a=h("hMh4F"),m=h("aVWN5");h("8gqWb"),h("6a2BC"),h("fpvSw"),h("e8qxR");var c=h("jrVnt"),_=h("8kh7u");u.TYPE="weld-joint",c.TYPES[u.TYPE]=u,u._super=c,u.prototype=Object.create(u._super.prototype);var l={frequencyHz:0,dampingRatio:0};function u(t,e,s,m){if(!(this instanceof u))return new u(t,e,s,m);t=i(t,l),c.call(this,t,e,s),e=this.m_bodyA,s=this.m_bodyB,this.m_type=u.TYPE,this.m_localAnchorA=n.clone(m?e.getLocalPoint(m):t.localAnchorA||n.zero()),this.m_localAnchorB=n.clone(m?s.getLocalPoint(m):t.localAnchorB||n.zero()),this.m_referenceAngle=o.isFinite(t.referenceAngle)?t.referenceAngle:s.getAngle()-e.getAngle(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=r(),this.m_bias=0,this.m_gamma=0,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new a}u.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,referenceAngle:this.m_referenceAngle}},u._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(_,t.bodyA,e),t.bodyB=i(_,t.bodyB,e),new u(t)},u.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB)},u.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},u.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},u.prototype.getReferenceAngle=function(){return this.m_referenceAngle},u.prototype.setFrequency=function(t){this.m_frequencyHz=t},u.prototype.getFrequency=function(){return this.m_frequencyHz},u.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},u.prototype.getDampingRatio=function(){return this.m_dampingRatio},u.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},u.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},u.prototype.getReactionForce=function(t){return n.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},u.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},u.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,s=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.a,h=this.m_bodyB.c_velocity.v,c=this.m_bodyB.c_velocity.w,_=m.neo(e),l=m.neo(r);this.m_rA=m.mulVec2(_,n.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=m.mulVec2(l,n.sub(this.m_localAnchorB,this.m_localCenterB));var u=this.m_invMassA,p=this.m_invMassB,y=this.m_invIA,d=this.m_invIB,f=new a;if(f.ex.x=u+p+this.m_rA.y*this.m_rA.y*y+this.m_rB.y*this.m_rB.y*d,f.ey.x=-this.m_rA.y*this.m_rA.x*y-this.m_rB.y*this.m_rB.x*d,f.ez.x=-this.m_rA.y*y-this.m_rB.y*d,f.ex.y=f.ey.x,f.ey.y=u+p+this.m_rA.x*this.m_rA.x*y+this.m_rB.x*this.m_rB.x*d,f.ez.y=this.m_rA.x*y+this.m_rB.x*d,f.ex.z=f.ez.x,f.ey.z=f.ez.y,f.ez.z=y+d,this.m_frequencyHz>0){f.getInverse22(this.m_mass);var v=y+d,A=v>0?1/v:0,x=r-e-this.m_referenceAngle,b=2*o.PI*this.m_frequencyHz,g=2*A*this.m_dampingRatio*b,B=A*b*b,w=t.dt;this.m_gamma=w*(g+w*B),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=x*w*B*this.m_gamma,v+=this.m_gamma,this.m_mass.ez.z=0!=v?1/v:0}else 0==f.ez.z?(f.getInverse22(this.m_mass),this.m_gamma=0,this.m_bias=0):(f.getSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0);if(t.warmStarting){this.m_impulse.mul(t.dtRatio);var M=n.neo(this.m_impulse.x,this.m_impulse.y);i.subMul(u,M),s-=y*(n.cross(this.m_rA,M)+this.m_impulse.z),h.addMul(p,M),c+=d*(n.cross(this.m_rB,M)+this.m_impulse.z)}else this.m_impulse.setZero();this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=s,this.m_bodyB.c_velocity.v=h,this.m_bodyB.c_velocity.w=c},u.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,s=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,m=this.m_invMassA,h=this.m_invMassB,c=this.m_invIA,_=this.m_invIB;if(this.m_frequencyHz>0){var l=o-i,u=-this.m_mass.ez.z*(l+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=u,i-=c*u,o+=_*u,(d=n.zero()).addCombine(1,s,1,n.cross(o,this.m_rB)),d.subCombine(1,e,1,n.cross(i,this.m_rA));var p=n.neg(a.mulVec2(this.m_mass,d));this.m_impulse.x+=p.x,this.m_impulse.y+=p.y;var y=n.clone(p);e.subMul(m,y),i-=c*n.cross(this.m_rA,y),s.addMul(h,y),o+=_*n.cross(this.m_rB,y)}else{var d;(d=n.zero()).addCombine(1,s,1,n.cross(o,this.m_rB)),d.subCombine(1,e,1,n.cross(i,this.m_rA));l=o-i;var f=r(d.x,d.y,l),v=r.neg(a.mulVec3(this.m_mass,f));this.m_impulse.add(v);y=n.neo(v.x,v.y);e.subMul(m,y),i-=c*(n.cross(this.m_rA,y)+v.z),s.addMul(h,y),o+=_*(n.cross(this.m_rB,y)+v.z)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=s,this.m_bodyB.c_velocity.w=o},u.prototype.solvePositionConstraints=function(t){var e,i,h=this.m_bodyA.c_position.c,c=this.m_bodyA.c_position.a,_=this.m_bodyB.c_position.c,l=this.m_bodyB.c_position.a,u=m.neo(c),p=m.neo(l),y=this.m_invMassA,d=this.m_invMassB,f=this.m_invIA,v=this.m_invIB,A=m.mulVec2(u,n.sub(this.m_localAnchorA,this.m_localCenterA)),x=m.mulVec2(p,n.sub(this.m_localAnchorB,this.m_localCenterB)),b=new a;if(b.ex.x=y+d+A.y*A.y*f+x.y*x.y*v,b.ey.x=-A.y*A.x*f-x.y*x.x*v,b.ez.x=-A.y*f-x.y*v,b.ex.y=b.ey.x,b.ey.y=y+d+A.x*A.x*f+x.x*x.x*v,b.ez.y=A.x*f+x.x*v,b.ex.z=b.ez.x,b.ey.z=b.ez.y,b.ez.z=f+v,this.m_frequencyHz>0){(B=n.zero()).addCombine(1,_,1,x),B.subCombine(1,h,1,A),e=B.length(),i=0;var g=n.neg(b.solve22(B));h.subMul(y,g),c-=f*n.cross(A,g),_.addMul(d,g),l+=v*n.cross(x,g)}else{var B;(B=n.zero()).addCombine(1,_,1,x),B.subCombine(1,h,1,A);var w=l-c-this.m_referenceAngle;e=B.length(),i=o.abs(w);var M=r(B.x,B.y,w),S=r();if(b.ez.z>0)S=r.neg(b.solve33(M));else{var C=n.neg(b.solve22(B));S.set(C.x,C.y,0)}g=n.neo(S.x,S.y);h.subMul(y,g),c-=f*(n.cross(A,g)+S.z),_.addMul(d,g),l+=v*(n.cross(x,g)+S.z)}return this.m_bodyA.c_position.c=h,this.m_bodyA.c_position.a=c,this.m_bodyB.c_position.c=_,this.m_bodyB.c_position.a=l,e<=s.linearSlop&&i<=s.angularSlop}})),h.register("36lY2",(function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=_;var i=h("ecDm3"),s=h("9MRkU"),o=h("aah62"),n=h("8o39l");h("fki3m"),h("5MFA1"),h("hMh4F");var r=h("aVWN5");h("8gqWb"),h("6a2BC"),h("fpvSw"),h("e8qxR");var a=h("jrVnt"),m=h("8kh7u");_.TYPE="wheel-joint",a.TYPES[_.TYPE]=_,_._super=a,_.prototype=Object.create(_._super.prototype);var c={enableMotor:!1,maxMotorTorque:0,motorSpeed:0,frequencyHz:2,dampingRatio:.7};function _(t,e,s,o,r){if(!(this instanceof _))return new _(t,e,s,o,r);t=i(t,c),a.call(this,t,e,s),e=this.m_bodyA,s=this.m_bodyB,this.m_type=_.TYPE,this.m_localAnchorA=n.clone(o?e.getLocalPoint(o):t.localAnchorA||n.zero()),this.m_localAnchorB=n.clone(o?s.getLocalPoint(o):t.localAnchorB||n.zero()),this.m_localXAxisA=n.clone(r?e.getLocalVector(r):t.localAxisA||t.localAxis||n.neo(1,0)),this.m_localYAxisA=n.cross(1,this.m_localXAxisA),this.m_mass=0,this.m_impulse=0,this.m_motorMass=0,this.m_motorImpulse=0,this.m_springMass=0,this.m_springImpulse=0,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableMotor=t.enableMotor,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_bias=0,this.m_gamma=0,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_ax=n.zero(),this.m_ay=n.zero(),this.m_sAx,this.m_sBx,this.m_sAy,this.m_sBy}_.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,enableMotor:this.m_enableMotor,maxMotorTorque:this.m_maxMotorTorque,motorSpeed:this.m_motorSpeed,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,localAxisA:this.m_localXAxisA}},_._deserialize=function(t,e,i){return(t=Object.assign({},t)).bodyA=i(m,t.bodyA,e),t.bodyB=i(m,t.bodyB,e),new _(t)},_.prototype._setAnchors=function(t){t.anchorA?this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(t.anchorA)):t.localAnchorA&&this.m_localAnchorA.set(t.localAnchorA),t.anchorB?this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(t.anchorB)):t.localAnchorB&&this.m_localAnchorB.set(t.localAnchorB),t.localAxisA&&(this.m_localXAxisA.set(t.localAxisA),this.m_localYAxisA.set(n.cross(1,t.localAxisA)))},_.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},_.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},_.prototype.getLocalAxisA=function(){return this.m_localXAxisA},_.prototype.getJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.getWorldPoint(this.m_localAnchorA),s=e.getWorldPoint(this.m_localAnchorB),o=n.sub(s,i),r=t.getWorldVector(this.m_localXAxisA);return n.dot(o,r)},_.prototype.getJointSpeed=function(){var t=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-t},_.prototype.isMotorEnabled=function(){return this.m_enableMotor},_.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},_.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},_.prototype.getMotorSpeed=function(){return this.m_motorSpeed},_.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},_.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},_.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},_.prototype.setSpringFrequencyHz=function(t){this.m_frequencyHz=t},_.prototype.getSpringFrequencyHz=function(){return this.m_frequencyHz},_.prototype.setSpringDampingRatio=function(t){this.m_dampingRatio=t},_.prototype.getSpringDampingRatio=function(){return this.m_dampingRatio},_.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},_.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},_.prototype.getReactionForce=function(t){return n.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax).mul(t)},_.prototype.getReactionTorque=function(t){return t*this.m_motorImpulse},_.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_invMassA,i=this.m_invMassB,s=this.m_invIA,a=this.m_invIB,m=this.m_bodyA.c_position.c,h=this.m_bodyA.c_position.a,c=this.m_bodyA.c_velocity.v,_=this.m_bodyA.c_velocity.w,l=this.m_bodyB.c_position.c,u=this.m_bodyB.c_position.a,p=this.m_bodyB.c_velocity.v,y=this.m_bodyB.c_velocity.w,d=r.neo(h),f=r.neo(u),v=r.mulVec2(d,n.sub(this.m_localAnchorA,this.m_localCenterA)),A=r.mulVec2(f,n.sub(this.m_localAnchorB,this.m_localCenterB));if((B=n.zero()).addCombine(1,l,1,A),B.subCombine(1,m,1,v),this.m_ay=r.mulVec2(d,this.m_localYAxisA),this.m_sAy=n.cross(n.add(B,v),this.m_ay),this.m_sBy=n.cross(A,this.m_ay),this.m_mass=e+i+s*this.m_sAy*this.m_sAy+a*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_frequencyHz>0){this.m_ax=r.mulVec2(d,this.m_localXAxisA),this.m_sAx=n.cross(n.add(B,v),this.m_ax),this.m_sBx=n.cross(A,this.m_ax);var x=e+i+s*this.m_sAx*this.m_sAx+a*this.m_sBx*this.m_sBx;if(x>0){this.m_springMass=1/x;var b=n.dot(B,this.m_ax),g=2*o.PI*this.m_frequencyHz,B=2*this.m_springMass*this.m_dampingRatio*g,w=this.m_springMass*g*g,M=t.dt;this.m_gamma=M*(B+M*w),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=b*M*w*this.m_gamma,this.m_springMass=x+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}}else this.m_springImpulse=0;if(this.m_enableMotor?(this.m_motorMass=s+a,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),t.warmStarting){this.m_impulse*=t.dtRatio,this.m_springImpulse*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var S=n.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax),C=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,I=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse;c.subMul(this.m_invMassA,S),_-=this.m_invIA*C,p.addMul(this.m_invMassB,S),y+=this.m_invIB*I}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(c),this.m_bodyA.c_velocity.w=_,this.m_bodyB.c_velocity.v.set(p),this.m_bodyB.c_velocity.w=y},_.prototype.solveVelocityConstraints=function(t){var e=this.m_invMassA,i=this.m_invMassB,s=this.m_invIA,r=this.m_invIB,a=this.m_bodyA.c_velocity.v,m=this.m_bodyA.c_velocity.w,h=this.m_bodyB.c_velocity.v,c=this.m_bodyB.c_velocity.w,_=n.dot(this.m_ax,h)-n.dot(this.m_ax,a)+this.m_sBx*c-this.m_sAx*m,l=-this.m_springMass*(_+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=l;var u=n.mul(l,this.m_ax),p=l*this.m_sAx,y=l*this.m_sBx;a.subMul(e,u),m-=s*p,h.addMul(i,u);_=(c+=r*y)-m-this.m_motorSpeed,l=-this.m_motorMass*_;var d=this.m_motorImpulse,f=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=o.clamp(this.m_motorImpulse+l,-f,f),m-=s*(l=this.m_motorImpulse-d),c+=r*l;_=n.dot(this.m_ay,h)-n.dot(this.m_ay,a)+this.m_sBy*c-this.m_sAy*m,l=-this.m_mass*_;this.m_impulse+=l;u=n.mul(l,this.m_ay),p=l*this.m_sAy,y=l*this.m_sBy;a.subMul(e,u),m-=s*p,h.addMul(i,u),c+=r*y,this.m_bodyA.c_velocity.v.set(a),this.m_bodyA.c_velocity.w=m,this.m_bodyB.c_velocity.v.set(h),this.m_bodyB.c_velocity.w=c},_.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,a=this.m_bodyB.c_position.c,m=this.m_bodyB.c_position.a,h=r.neo(i),c=r.neo(m),_=r.mulVec2(h,n.sub(this.m_localAnchorA,this.m_localCenterA)),l=r.mulVec2(c,n.sub(this.m_localAnchorB,this.m_localCenterB)),u=n.zero();u.addCombine(1,a,1,l),u.subCombine(1,e,1,_);var p,y=r.mulVec2(h,this.m_localYAxisA),d=n.cross(n.add(u,_),y),f=n.cross(l,y),v=n.dot(u,y),A=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy;p=0!=A?-v/A:0;var x=n.mul(p,y),b=p*d,g=p*f;return e.subMul(this.m_invMassA,x),i-=this.m_invIA*b,a.addMul(this.m_invMassB,x),m+=this.m_invIB*g,this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(a),this.m_bodyB.c_position.a=m,o.abs(v)<=s.linearSlop}})),e={},h("51SVy"),h("aah62"),i=h("8o39l"),h("fki3m"),h("5MFA1"),h("hMh4F"),h("6a2BC"),h("aVWN5"),h("l2alD"),h("eacC4"),h("gGjtn"),h("8kh7u"),h("f6rGq"),h("jrVnt"),s=h("hvlqD"),h("jYuki"),h("h0PS0"),h("hg1KF"),h("gv5vF"),o=h("80gHp");"undefined"!=typeof DEBUG&&DEBUG;var c="undefined"!=typeof ASSERT&&ASSERT,_=h("bVyf9");h("aah62");var l=h("6a2BC"),u=h("8o39l");h("9MRkU"),h("eacC4");var p=h("f6rGq"),y=h("hyFEM"),d=h("jYuki");function f(t,e,i,s,o){t.pointCount=0;var n=l.mulVec2(i,e.m_p),r=l.mulVec2(o,s.m_p),a=u.distanceSquared(r,n),m=e.m_radius+s.m_radius;a>m*m||(t.type=y.e_circles,t.localPoint.set(e.m_p),t.localNormal.setZero(),t.pointCount=1,t.points[0].localPoint.set(s.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=y.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=y.e_vertex)}p.addType(d.TYPE,d.TYPE,(function(t,e,i,s,o,n,r){c&&_.assert(i.getType()==d.TYPE),c&&_.assert(n.getType()==d.TYPE),f(t,i.getShape(),e,n.getShape(),o)}));"undefined"!=typeof DEBUG&&DEBUG;var v="undefined"!=typeof ASSERT&&ASSERT;_=h("bVyf9");h("aah62");l=h("6a2BC"),u=h("8o39l");h("aVWN5"),h("9MRkU"),h("eacC4");p=h("f6rGq"),y=h("hyFEM");var A=h("h0PS0"),x=h("gv5vF");d=h("jYuki");function b(t,e,i,s,o){t.pointCount=0;var n=l.mulTVec2(i,l.mulVec2(o,s.m_p)),r=e.m_vertex1,a=e.m_vertex2,m=u.sub(a,r),h=u.dot(m,u.sub(a,n)),c=u.dot(m,u.sub(n,r)),p=e.m_radius+s.m_radius;if(c<=0){var d=u.clone(r),f=u.sub(n,d);if(u.dot(f,f)>p*p)return;if(e.m_hasVertex0){var A=e.m_vertex0,x=r,b=u.sub(x,A);if(u.dot(b,u.sub(x,n))>0)return}return t.type=y.e_circles,t.localNormal.setZero(),t.localPoint.set(d),t.pointCount=1,t.points[0].localPoint.set(s.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=y.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=y.e_vertex)}if(h<=0){d=u.clone(a),f=u.sub(n,d);if(u.dot(f,f)>p*p)return;if(e.m_hasVertex3){var g=e.m_vertex3,B=a,w=u.sub(g,B);if(u.dot(w,u.sub(n,B))>0)return}return t.type=y.e_circles,t.localNormal.setZero(),t.localPoint.set(d),t.pointCount=1,t.points[0].localPoint.set(s.m_p),t.points[0].id.cf.indexA=1,t.points[0].id.cf.typeA=y.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=y.e_vertex)}var M=u.dot(m,m);v&&_.assert(M>0);d=u.combine(h/M,r,c/M,a),f=u.sub(n,d);if(!(u.dot(f,f)>p*p)){var S=u.neo(-m.y,m.x);u.dot(S,u.sub(n,r))<0&&S.set(-S.x,-S.y),S.normalize(),t.type=y.e_faceA,t.localNormal=S,t.localPoint.set(r),t.pointCount=1,t.points[0].localPoint.set(s.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=y.e_face,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=y.e_vertex}}p.addType(A.TYPE,d.TYPE,(function(t,e,i,s,o,n,r){v&&_.assert(i.getType()==A.TYPE),v&&_.assert(n.getType()==d.TYPE);var a=i.getShape(),m=n.getShape();b(t,a,e,m,o)})),p.addType(x.TYPE,d.TYPE,(function(t,e,i,s,o,n,r){v&&_.assert(i.getType()==x.TYPE),v&&_.assert(n.getType()==d.TYPE);var a=i.getShape(),m=new A;a.getChildEdge(m,s);var h=m,c=n.getShape();b(t,h,e,c,o)})),e.CollidePolygons=h("4XiWY");"undefined"!=typeof DEBUG&&DEBUG;var g="undefined"!=typeof ASSERT&&ASSERT,B=(_=h("bVyf9"),h("aah62"));l=h("6a2BC");h("aVWN5");u=h("8o39l");h("l2alD"),h("9MRkU");y=h("hyFEM"),p=h("f6rGq");h("eacC4");d=h("jYuki");var w=h("hg1KF");p.addType(w.TYPE,d.TYPE,(function(t,e,i,s,o,n,r){g&&_.assert(i.getType()==w.TYPE),g&&_.assert(n.getType()==d.TYPE),function(t,e,i,s,o){t.pointCount=0;for(var n=l.mulVec2(o,s.m_p),r=l.mulTVec2(i,n),a=0,m=-1/0,h=e.m_radius+s.m_radius,c=e.m_count,_=e.m_vertices,p=e.m_normals,d=0;d<c;++d){var f=u.dot(p[d],u.sub(r,_[d]));if(f>h)return;f>m&&(m=f,a=d)}var v=a,A=v+1<c?v+1:0,x=_[v],b=_[A];if(m<B.EPSILON)return t.pointCount=1,t.type=y.e_faceA,t.localNormal.set(p[a]),t.localPoint.setCombine(.5,x,.5,b),t.points[0].localPoint=s.m_p,t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=y.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=y.e_vertex);var g=u.dot(u.sub(r,x),u.sub(b,x)),w=u.dot(u.sub(r,b),u.sub(x,b));if(g<=0){if(u.distanceSquared(r,x)>h*h)return;t.pointCount=1,t.type=y.e_faceA,t.localNormal.setCombine(1,r,-1,x),t.localNormal.normalize(),t.localPoint=x,t.points[0].localPoint.set(s.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=y.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=y.e_vertex}else if(w<=0){if(u.distanceSquared(r,b)>h*h)return;t.pointCount=1,t.type=y.e_faceA,t.localNormal.setCombine(1,r,-1,b),t.localNormal.normalize(),t.localPoint.set(b),t.points[0].localPoint.set(s.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=y.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=y.e_vertex}else{var M=u.mid(x,b);if((m=u.dot(r,p[v])-u.dot(M,p[v]))>h)return;t.pointCount=1,t.type=y.e_faceA,t.localNormal.set(p[v]),t.localPoint.set(M),t.points[0].localPoint.set(s.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=y.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=y.e_vertex}}(t,i.getShape(),e,n.getShape(),o)}));"undefined"!=typeof DEBUG&&DEBUG;var M="undefined"!=typeof ASSERT&&ASSERT,S=(_=h("bVyf9"),B=h("aah62"),l=h("6a2BC"),u=h("8o39l"),h("aVWN5")),C=h("9MRkU");h("eacC4");p=h("f6rGq"),y=h("hyFEM"),A=h("h0PS0"),x=h("gv5vF"),w=h("hg1KF");p.addType(A.TYPE,w.TYPE,(function(t,e,i,s,o,n,r){M&&_.assert(i.getType()==A.TYPE),M&&_.assert(n.getType()==w.TYPE),E(t,i.getShape(),e,n.getShape(),o)})),p.addType(x.TYPE,w.TYPE,(function(t,e,i,s,o,n,r){M&&_.assert(i.getType()==x.TYPE),M&&_.assert(n.getType()==w.TYPE);var a=i.getShape(),m=new A;a.getChildEdge(m,s),E(t,m,e,n.getShape(),o)}));function I(){this.type,this.index,this.separation}var V=new I,T=new I,P=new function(){this.vertices=[],this.normals=[],this.count=0},z=new function(){this.i1,this.i2,this.v1,this.v2,this.normal=u.zero(),this.sideNormal1=u.zero(),this.sideOffset1,this.sideNormal2=u.zero(),this.sideOffset2};function E(t,e,i,s,o){var n=l.mulTXf(i,o),r=l.mulVec2(n,s.m_centroid),a=e.m_vertex0,m=e.m_vertex1,h=e.m_vertex2,c=e.m_vertex3,_=e.m_hasVertex0,p=e.m_hasVertex3,d=u.sub(h,m);d.normalize();var f,v=u.neo(d.y,-d.x),A=u.dot(v,u.sub(r,m)),x=0,b=0,g=!1,w=!1;if(_){var M=u.sub(m,a);M.normalize();var I=u.neo(M.y,-M.x);g=u.cross(M,d)>=0,x=u.dot(I,r)-u.dot(I,a)}if(p){var E=u.sub(c,h);E.normalize();var F=u.neo(E.y,-E.x);w=u.cross(d,E)>0,b=u.dot(F,r)-u.dot(F,h)}var q=u.zero(),L=u.zero(),D=u.zero();_&&p?g&&w?(f=x>=0||A>=0||b>=0)?(q.set(v),L.set(I),D.set(F)):(q.setMul(-1,v),L.setMul(-1,v),D.setMul(-1,v)):g?(f=x>=0||A>=0&&b>=0)?(q.set(v),L.set(I),D.set(v)):(q.setMul(-1,v),L.setMul(-1,F),D.setMul(-1,v)):w?(f=b>=0||x>=0&&A>=0)?(q.set(v),L.set(v),D.set(F)):(q.setMul(-1,v),L.setMul(-1,v),D.setMul(-1,I)):(f=x>=0&&A>=0&&b>=0)?(q.set(v),L.set(v),D.set(v)):(q.setMul(-1,v),L.setMul(-1,F),D.setMul(-1,I)):_?g?(f=x>=0||A>=0)?(q.set(v),L.set(I),D.setMul(-1,v)):(q.setMul(-1,v),L.set(v),D.setMul(-1,v)):(f=x>=0&&A>=0)?(q.set(v),L.set(v),D.setMul(-1,v)):(q.setMul(-1,v),L.set(v),D.setMul(-1,I)):p?w?(f=A>=0||b>=0)?(q.set(v),L.setMul(-1,v),D.set(F)):(q.setMul(-1,v),L.setMul(-1,v),D.set(v)):(f=A>=0&&b>=0)?(q.set(v),L.setMul(-1,v),D.set(v)):(q.setMul(-1,v),L.setMul(-1,F),D.set(v)):(f=A>=0)?(q.set(v),L.setMul(-1,v),D.setMul(-1,v)):(q.setMul(-1,v),L.set(v),D.set(v)),P.count=s.m_count;for(var R=0;R<s.m_count;++R)P.vertices[R]=l.mulVec2(n,s.m_vertices[R]),P.normals[R]=S.mulVec2(n.q,s.m_normals[R]);var k=2*C.polygonRadius;t.pointCount=0,V.type=1,V.index=f?0:1,V.separation=1/0;for(R=0;R<P.count;++R){(O=u.dot(q,u.sub(P.vertices[R],m)))<V.separation&&(V.separation=O)}if(-1!=V.type&&!(V.separation>k)){T.type=-1,T.index=-1,T.separation=-1/0;var j=u.neo(-q.y,q.x);for(R=0;R<P.count;++R){var O,U=u.neg(P.normals[R]),G=u.dot(U,u.sub(P.vertices[R],m)),N=u.dot(U,u.sub(P.vertices[R],h));if((O=B.min(G,N))>k){T.type=2,T.index=R,T.separation=O;break}if(u.dot(U,j)>=0){if(u.dot(u.sub(U,D),q)<-C.angularSlop)continue}else if(u.dot(u.sub(U,L),q)<-C.angularSlop)continue;O>T.separation&&(T.type=2,T.index=R,T.separation=O)}if(!(-1!=T.type&&T.separation>k)){var Y;Y=-1==T.type?V:T.separation>.98*V.separation+.001?T:V;var W=[new y.clipVertex,new y.clipVertex];if(1==Y.type){t.type=y.e_faceA;var J=0,H=u.dot(q,P.normals[0]);for(R=1;R<P.count;++R){var Z=u.dot(q,P.normals[R]);Z<H&&(H=Z,J=R)}var K=J,X=K+1<P.count?K+1:0;W[0].v=P.vertices[K],W[0].id.cf.indexA=0,W[0].id.cf.indexB=K,W[0].id.cf.typeA=y.e_face,W[0].id.cf.typeB=y.e_vertex,W[1].v=P.vertices[X],W[1].id.cf.indexA=0,W[1].id.cf.indexB=X,W[1].id.cf.typeA=y.e_face,W[1].id.cf.typeB=y.e_vertex,f?(z.i1=0,z.i2=1,z.v1=m,z.v2=h,z.normal.set(v)):(z.i1=1,z.i2=0,z.v1=h,z.v2=m,z.normal.setMul(-1,v))}else t.type=y.e_faceB,W[0].v=m,W[0].id.cf.indexA=0,W[0].id.cf.indexB=Y.index,W[0].id.cf.typeA=y.e_vertex,W[0].id.cf.typeB=y.e_face,W[1].v=h,W[1].id.cf.indexA=0,W[1].id.cf.indexB=Y.index,W[1].id.cf.typeA=y.e_vertex,W[1].id.cf.typeB=y.e_face,z.i1=Y.index,z.i2=z.i1+1<P.count?z.i1+1:0,z.v1=P.vertices[z.i1],z.v2=P.vertices[z.i2],z.normal.set(P.normals[z.i1]);z.sideNormal1.set(z.normal.y,-z.normal.x),z.sideNormal2.setMul(-1,z.sideNormal1),z.sideOffset1=u.dot(z.sideNormal1,z.v1),z.sideOffset2=u.dot(z.sideNormal2,z.v2);var Q=[new y.clipVertex,new y.clipVertex],$=[new y.clipVertex,new y.clipVertex];if(!(y.clipSegmentToLine(Q,W,z.sideNormal1,z.sideOffset1,z.i1)<C.maxManifoldPoints||y.clipSegmentToLine($,Q,z.sideNormal2,z.sideOffset2,z.i2)<C.maxManifoldPoints)){1==Y.type?(t.localNormal=u.clone(z.normal),t.localPoint=u.clone(z.v1)):(t.localNormal=u.clone(s.m_normals[z.i1]),t.localPoint=u.clone(s.m_vertices[z.i1]));var tt=0;for(R=0;R<C.maxManifoldPoints;++R){if(u.dot(z.normal,u.sub($[R].v,z.v1))<=k){var et=t.points[tt];1==Y.type?(et.localPoint=l.mulT(n,$[R].v),et.id=$[R].id):(et.localPoint=$[R].v,et.id.cf.typeA=$[R].id.cf.typeB,et.id.cf.typeB=$[R].id.cf.typeA,et.id.cf.indexA=$[R].id.cf.indexB,et.id.cf.indexB=$[R].id.cf.indexA),++tt}}t.pointCount=tt}}}}h("3GiIT"),h("ch2Tm"),h("iMop6"),h("2JiZ1"),h("b6L5O"),h("ivu2P"),h("jdg48"),h("1G4C1"),h("4q8Xc"),h("37QqC"),h("36lY2"),n=h("9MRkU"),e.Sweep=h("8gqWb"),e.stats=h("enKkk"),e.Manifold=h("hyFEM"),e.Distance=h("6KczB"),e.TimeOfImpact=h("hYw2e"),e.DynamicTree=h("gs8T1"),e.Settings=n;var F={};t(F,"create",(()=>D)),t(F,"clone",(()=>R)),t(F,"copy",(()=>k)),t(F,"fromValues",(()=>j)),t(F,"set",(()=>O)),t(F,"identity",(()=>U)),t(F,"transpose",(()=>G)),t(F,"invert",(()=>N)),t(F,"adjoint",(()=>Y)),t(F,"determinant",(()=>W)),t(F,"multiply",(()=>J)),t(F,"translate",(()=>H)),t(F,"scale",(()=>Z)),t(F,"rotate",(()=>K)),t(F,"rotateX",(()=>X)),t(F,"rotateY",(()=>Q)),t(F,"rotateZ",(()=>$)),t(F,"fromTranslation",(()=>tt)),t(F,"fromScaling",(()=>et)),t(F,"fromRotation",(()=>it)),t(F,"fromXRotation",(()=>st)),t(F,"fromYRotation",(()=>ot)),t(F,"fromZRotation",(()=>nt)),t(F,"fromRotationTranslation",(()=>rt)),t(F,"fromQuat2",(()=>at)),t(F,"getTranslation",(()=>mt)),t(F,"getScaling",(()=>ht)),t(F,"getRotation",(()=>ct)),t(F,"fromRotationTranslationScale",(()=>_t)),t(F,"fromRotationTranslationScaleOrigin",(()=>lt)),t(F,"fromQuat",(()=>ut)),t(F,"frustum",(()=>pt)),t(F,"perspectiveNO",(()=>yt)),t(F,"perspective",(()=>dt)),t(F,"perspectiveZO",(()=>ft)),t(F,"perspectiveFromFieldOfView",(()=>vt)),t(F,"orthoNO",(()=>At)),t(F,"ortho",(()=>xt)),t(F,"orthoZO",(()=>bt)),t(F,"lookAt",(()=>gt)),t(F,"targetTo",(()=>Bt)),t(F,"str",(()=>wt)),t(F,"frob",(()=>Mt)),t(F,"add",(()=>St)),t(F,"subtract",(()=>Ct)),t(F,"multiplyScalar",(()=>It)),t(F,"multiplyScalarAndAdd",(()=>Vt)),t(F,"exactEquals",(()=>Tt)),t(F,"equals",(()=>Pt)),t(F,"mul",(()=>zt)),t(F,"sub",(()=>Et));var q="undefined"!=typeof Float32Array?Float32Array:Array,L=Math.random;Math.PI;function D(){var t=new q(16);return q!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function R(t){var e=new q(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function k(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function j(t,e,i,s,o,n,r,a,m,h,c,_,l,u,p,y){var d=new q(16);return d[0]=t,d[1]=e,d[2]=i,d[3]=s,d[4]=o,d[5]=n,d[6]=r,d[7]=a,d[8]=m,d[9]=h,d[10]=c,d[11]=_,d[12]=l,d[13]=u,d[14]=p,d[15]=y,d}function O(t,e,i,s,o,n,r,a,m,h,c,_,l,u,p,y,d){return t[0]=e,t[1]=i,t[2]=s,t[3]=o,t[4]=n,t[5]=r,t[6]=a,t[7]=m,t[8]=h,t[9]=c,t[10]=_,t[11]=l,t[12]=u,t[13]=p,t[14]=y,t[15]=d,t}function U(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function G(t,e){if(t===e){var i=e[1],s=e[2],o=e[3],n=e[6],r=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=n,t[11]=e[14],t[12]=o,t[13]=r,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function N(t,e){var i=e[0],s=e[1],o=e[2],n=e[3],r=e[4],a=e[5],m=e[6],h=e[7],c=e[8],_=e[9],l=e[10],u=e[11],p=e[12],y=e[13],d=e[14],f=e[15],v=i*a-s*r,A=i*m-o*r,x=i*h-n*r,b=s*m-o*a,g=s*h-n*a,B=o*h-n*m,w=c*y-_*p,M=c*d-l*p,S=c*f-u*p,C=_*d-l*y,I=_*f-u*y,V=l*f-u*d,T=v*V-A*I+x*C+b*S-g*M+B*w;return T?(T=1/T,t[0]=(a*V-m*I+h*C)*T,t[1]=(o*I-s*V-n*C)*T,t[2]=(y*B-d*g+f*b)*T,t[3]=(l*g-_*B-u*b)*T,t[4]=(m*S-r*V-h*M)*T,t[5]=(i*V-o*S+n*M)*T,t[6]=(d*x-p*B-f*A)*T,t[7]=(c*B-l*x+u*A)*T,t[8]=(r*I-a*S+h*w)*T,t[9]=(s*S-i*I-n*w)*T,t[10]=(p*g-y*x+f*v)*T,t[11]=(_*x-c*g-u*v)*T,t[12]=(a*M-r*C-m*w)*T,t[13]=(i*C-s*M+o*w)*T,t[14]=(y*A-p*b-d*v)*T,t[15]=(c*b-_*A+l*v)*T,t):null}function Y(t,e){var i=e[0],s=e[1],o=e[2],n=e[3],r=e[4],a=e[5],m=e[6],h=e[7],c=e[8],_=e[9],l=e[10],u=e[11],p=e[12],y=e[13],d=e[14],f=e[15];return t[0]=a*(l*f-u*d)-_*(m*f-h*d)+y*(m*u-h*l),t[1]=-(s*(l*f-u*d)-_*(o*f-n*d)+y*(o*u-n*l)),t[2]=s*(m*f-h*d)-a*(o*f-n*d)+y*(o*h-n*m),t[3]=-(s*(m*u-h*l)-a*(o*u-n*l)+_*(o*h-n*m)),t[4]=-(r*(l*f-u*d)-c*(m*f-h*d)+p*(m*u-h*l)),t[5]=i*(l*f-u*d)-c*(o*f-n*d)+p*(o*u-n*l),t[6]=-(i*(m*f-h*d)-r*(o*f-n*d)+p*(o*h-n*m)),t[7]=i*(m*u-h*l)-r*(o*u-n*l)+c*(o*h-n*m),t[8]=r*(_*f-u*y)-c*(a*f-h*y)+p*(a*u-h*_),t[9]=-(i*(_*f-u*y)-c*(s*f-n*y)+p*(s*u-n*_)),t[10]=i*(a*f-h*y)-r*(s*f-n*y)+p*(s*h-n*a),t[11]=-(i*(a*u-h*_)-r*(s*u-n*_)+c*(s*h-n*a)),t[12]=-(r*(_*d-l*y)-c*(a*d-m*y)+p*(a*l-m*_)),t[13]=i*(_*d-l*y)-c*(s*d-o*y)+p*(s*l-o*_),t[14]=-(i*(a*d-m*y)-r*(s*d-o*y)+p*(s*m-o*a)),t[15]=i*(a*l-m*_)-r*(s*l-o*_)+c*(s*m-o*a),t}function W(t){var e=t[0],i=t[1],s=t[2],o=t[3],n=t[4],r=t[5],a=t[6],m=t[7],h=t[8],c=t[9],_=t[10],l=t[11],u=t[12],p=t[13],y=t[14],d=t[15];return(e*r-i*n)*(_*d-l*y)-(e*a-s*n)*(c*d-l*p)+(e*m-o*n)*(c*y-_*p)+(i*a-s*r)*(h*d-l*u)-(i*m-o*r)*(h*y-_*u)+(s*m-o*a)*(h*p-c*u)}function J(t,e,i){var s=e[0],o=e[1],n=e[2],r=e[3],a=e[4],m=e[5],h=e[6],c=e[7],_=e[8],l=e[9],u=e[10],p=e[11],y=e[12],d=e[13],f=e[14],v=e[15],A=i[0],x=i[1],b=i[2],g=i[3];return t[0]=A*s+x*a+b*_+g*y,t[1]=A*o+x*m+b*l+g*d,t[2]=A*n+x*h+b*u+g*f,t[3]=A*r+x*c+b*p+g*v,A=i[4],x=i[5],b=i[6],g=i[7],t[4]=A*s+x*a+b*_+g*y,t[5]=A*o+x*m+b*l+g*d,t[6]=A*n+x*h+b*u+g*f,t[7]=A*r+x*c+b*p+g*v,A=i[8],x=i[9],b=i[10],g=i[11],t[8]=A*s+x*a+b*_+g*y,t[9]=A*o+x*m+b*l+g*d,t[10]=A*n+x*h+b*u+g*f,t[11]=A*r+x*c+b*p+g*v,A=i[12],x=i[13],b=i[14],g=i[15],t[12]=A*s+x*a+b*_+g*y,t[13]=A*o+x*m+b*l+g*d,t[14]=A*n+x*h+b*u+g*f,t[15]=A*r+x*c+b*p+g*v,t}function H(t,e,i){var s,o,n,r,a,m,h,c,_,l,u,p,y=i[0],d=i[1],f=i[2];return e===t?(t[12]=e[0]*y+e[4]*d+e[8]*f+e[12],t[13]=e[1]*y+e[5]*d+e[9]*f+e[13],t[14]=e[2]*y+e[6]*d+e[10]*f+e[14],t[15]=e[3]*y+e[7]*d+e[11]*f+e[15]):(s=e[0],o=e[1],n=e[2],r=e[3],a=e[4],m=e[5],h=e[6],c=e[7],_=e[8],l=e[9],u=e[10],p=e[11],t[0]=s,t[1]=o,t[2]=n,t[3]=r,t[4]=a,t[5]=m,t[6]=h,t[7]=c,t[8]=_,t[9]=l,t[10]=u,t[11]=p,t[12]=s*y+a*d+_*f+e[12],t[13]=o*y+m*d+l*f+e[13],t[14]=n*y+h*d+u*f+e[14],t[15]=r*y+c*d+p*f+e[15]),t}function Z(t,e,i){var s=i[0],o=i[1],n=i[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function K(t,e,i,s){var o,n,r,a,m,h,c,_,l,u,p,y,d,f,v,A,x,b,g,B,w,M,S,C,I=s[0],V=s[1],T=s[2],P=Math.hypot(I,V,T);return P<1e-6?null:(I*=P=1/P,V*=P,T*=P,o=Math.sin(i),r=1-(n=Math.cos(i)),a=e[0],m=e[1],h=e[2],c=e[3],_=e[4],l=e[5],u=e[6],p=e[7],y=e[8],d=e[9],f=e[10],v=e[11],A=I*I*r+n,x=V*I*r+T*o,b=T*I*r-V*o,g=I*V*r-T*o,B=V*V*r+n,w=T*V*r+I*o,M=I*T*r+V*o,S=V*T*r-I*o,C=T*T*r+n,t[0]=a*A+_*x+y*b,t[1]=m*A+l*x+d*b,t[2]=h*A+u*x+f*b,t[3]=c*A+p*x+v*b,t[4]=a*g+_*B+y*w,t[5]=m*g+l*B+d*w,t[6]=h*g+u*B+f*w,t[7]=c*g+p*B+v*w,t[8]=a*M+_*S+y*C,t[9]=m*M+l*S+d*C,t[10]=h*M+u*S+f*C,t[11]=c*M+p*S+v*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function X(t,e,i){var s=Math.sin(i),o=Math.cos(i),n=e[4],r=e[5],a=e[6],m=e[7],h=e[8],c=e[9],_=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*o+h*s,t[5]=r*o+c*s,t[6]=a*o+_*s,t[7]=m*o+l*s,t[8]=h*o-n*s,t[9]=c*o-r*s,t[10]=_*o-a*s,t[11]=l*o-m*s,t}function Q(t,e,i){var s=Math.sin(i),o=Math.cos(i),n=e[0],r=e[1],a=e[2],m=e[3],h=e[8],c=e[9],_=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*o-h*s,t[1]=r*o-c*s,t[2]=a*o-_*s,t[3]=m*o-l*s,t[8]=n*s+h*o,t[9]=r*s+c*o,t[10]=a*s+_*o,t[11]=m*s+l*o,t}function $(t,e,i){var s=Math.sin(i),o=Math.cos(i),n=e[0],r=e[1],a=e[2],m=e[3],h=e[4],c=e[5],_=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*o+h*s,t[1]=r*o+c*s,t[2]=a*o+_*s,t[3]=m*o+l*s,t[4]=h*o-n*s,t[5]=c*o-r*s,t[6]=_*o-a*s,t[7]=l*o-m*s,t}function tt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function et(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function it(t,e,i){var s,o,n,r=i[0],a=i[1],m=i[2],h=Math.hypot(r,a,m);return h<1e-6?null:(r*=h=1/h,a*=h,m*=h,s=Math.sin(e),n=1-(o=Math.cos(e)),t[0]=r*r*n+o,t[1]=a*r*n+m*s,t[2]=m*r*n-a*s,t[3]=0,t[4]=r*a*n-m*s,t[5]=a*a*n+o,t[6]=m*a*n+r*s,t[7]=0,t[8]=r*m*n+a*s,t[9]=a*m*n-r*s,t[10]=m*m*n+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function st(t,e){var i=Math.sin(e),s=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ot(t,e){var i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function nt(t,e){var i=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rt(t,e,i){var s=e[0],o=e[1],n=e[2],r=e[3],a=s+s,m=o+o,h=n+n,c=s*a,_=s*m,l=s*h,u=o*m,p=o*h,y=n*h,d=r*a,f=r*m,v=r*h;return t[0]=1-(u+y),t[1]=_+v,t[2]=l-f,t[3]=0,t[4]=_-v,t[5]=1-(c+y),t[6]=p+d,t[7]=0,t[8]=l+f,t[9]=p-d,t[10]=1-(c+u),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function at(t,e){var i=new q(3),s=-e[0],o=-e[1],n=-e[2],r=e[3],a=e[4],m=e[5],h=e[6],c=e[7],_=s*s+o*o+n*n+r*r;return _>0?(i[0]=2*(a*r+c*s+m*n-h*o)/_,i[1]=2*(m*r+c*o+h*s-a*n)/_,i[2]=2*(h*r+c*n+a*o-m*s)/_):(i[0]=2*(a*r+c*s+m*n-h*o),i[1]=2*(m*r+c*o+h*s-a*n),i[2]=2*(h*r+c*n+a*o-m*s)),rt(t,e,i),t}function mt(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function ht(t,e){var i=e[0],s=e[1],o=e[2],n=e[4],r=e[5],a=e[6],m=e[8],h=e[9],c=e[10];return t[0]=Math.hypot(i,s,o),t[1]=Math.hypot(n,r,a),t[2]=Math.hypot(m,h,c),t}function ct(t,e){var i=new q(3);ht(i,e);var s=1/i[0],o=1/i[1],n=1/i[2],r=e[0]*s,a=e[1]*o,m=e[2]*n,h=e[4]*s,c=e[5]*o,_=e[6]*n,l=e[8]*s,u=e[9]*o,p=e[10]*n,y=r+c+p,d=0;return y>0?(d=2*Math.sqrt(y+1),t[3]=.25*d,t[0]=(_-u)/d,t[1]=(l-m)/d,t[2]=(a-h)/d):r>c&&r>p?(d=2*Math.sqrt(1+r-c-p),t[3]=(_-u)/d,t[0]=.25*d,t[1]=(a+h)/d,t[2]=(l+m)/d):c>p?(d=2*Math.sqrt(1+c-r-p),t[3]=(l-m)/d,t[0]=(a+h)/d,t[1]=.25*d,t[2]=(_+u)/d):(d=2*Math.sqrt(1+p-r-c),t[3]=(a-h)/d,t[0]=(l+m)/d,t[1]=(_+u)/d,t[2]=.25*d),t}function _t(t,e,i,s){var o=e[0],n=e[1],r=e[2],a=e[3],m=o+o,h=n+n,c=r+r,_=o*m,l=o*h,u=o*c,p=n*h,y=n*c,d=r*c,f=a*m,v=a*h,A=a*c,x=s[0],b=s[1],g=s[2];return t[0]=(1-(p+d))*x,t[1]=(l+A)*x,t[2]=(u-v)*x,t[3]=0,t[4]=(l-A)*b,t[5]=(1-(_+d))*b,t[6]=(y+f)*b,t[7]=0,t[8]=(u+v)*g,t[9]=(y-f)*g,t[10]=(1-(_+p))*g,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function lt(t,e,i,s,o){var n=e[0],r=e[1],a=e[2],m=e[3],h=n+n,c=r+r,_=a+a,l=n*h,u=n*c,p=n*_,y=r*c,d=r*_,f=a*_,v=m*h,A=m*c,x=m*_,b=s[0],g=s[1],B=s[2],w=o[0],M=o[1],S=o[2],C=(1-(y+f))*b,I=(u+x)*b,V=(p-A)*b,T=(u-x)*g,P=(1-(l+f))*g,z=(d+v)*g,E=(p+A)*B,F=(d-v)*B,q=(1-(l+y))*B;return t[0]=C,t[1]=I,t[2]=V,t[3]=0,t[4]=T,t[5]=P,t[6]=z,t[7]=0,t[8]=E,t[9]=F,t[10]=q,t[11]=0,t[12]=i[0]+w-(C*w+T*M+E*S),t[13]=i[1]+M-(I*w+P*M+F*S),t[14]=i[2]+S-(V*w+z*M+q*S),t[15]=1,t}function ut(t,e){var i=e[0],s=e[1],o=e[2],n=e[3],r=i+i,a=s+s,m=o+o,h=i*r,c=s*r,_=s*a,l=o*r,u=o*a,p=o*m,y=n*r,d=n*a,f=n*m;return t[0]=1-_-p,t[1]=c+f,t[2]=l-d,t[3]=0,t[4]=c-f,t[5]=1-h-p,t[6]=u+y,t[7]=0,t[8]=l+d,t[9]=u-y,t[10]=1-h-_,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pt(t,e,i,s,o,n,r){var a=1/(i-e),m=1/(o-s),h=1/(n-r);return t[0]=2*n*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*m,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(o+s)*m,t[10]=(r+n)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n*2*h,t[15]=0,t}function yt(t,e,i,s,o){var n,r=1/Math.tan(e/2);return t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(n=1/(s-o),t[10]=(o+s)*n,t[14]=2*o*s*n):(t[10]=-1,t[14]=-2*s),t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var dt=yt;function ft(t,e,i,s,o){var n,r=1/Math.tan(e/2);return t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(n=1/(s-o),t[10]=o*n,t[14]=o*s*n):(t[10]=-1,t[14]=-s),t}function vt(t,e,i,s){var o=Math.tan(e.upDegrees*Math.PI/180),n=Math.tan(e.downDegrees*Math.PI/180),r=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),m=2/(r+a),h=2/(o+n);return t[0]=m,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=-(r-a)*m*.5,t[9]=(o-n)*h*.5,t[10]=s/(i-s),t[11]=-1,t[12]=0,t[13]=0,t[14]=s*i/(i-s),t[15]=0,t}function At(t,e,i,s,o,n,r){var a=1/(e-i),m=1/(s-o),h=1/(n-r);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*m,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+i)*a,t[13]=(o+s)*m,t[14]=(r+n)*h,t[15]=1,t}var xt=At;function bt(t,e,i,s,o,n,r){var a=1/(e-i),m=1/(s-o),h=1/(n-r);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*m,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=h,t[11]=0,t[12]=(e+i)*a,t[13]=(o+s)*m,t[14]=n*h,t[15]=1,t}function gt(t,e,i,s){var o,n,r,a,m,h,c,_,l,u,p=e[0],y=e[1],d=e[2],f=s[0],v=s[1],A=s[2],x=i[0],b=i[1],g=i[2];return Math.abs(p-x)<1e-6&&Math.abs(y-b)<1e-6&&Math.abs(d-g)<1e-6?U(t):(c=p-x,_=y-b,l=d-g,o=v*(l*=u=1/Math.hypot(c,_,l))-A*(_*=u),n=A*(c*=u)-f*l,r=f*_-v*c,(u=Math.hypot(o,n,r))?(o*=u=1/u,n*=u,r*=u):(o=0,n=0,r=0),a=_*r-l*n,m=l*o-c*r,h=c*n-_*o,(u=Math.hypot(a,m,h))?(a*=u=1/u,m*=u,h*=u):(a=0,m=0,h=0),t[0]=o,t[1]=a,t[2]=c,t[3]=0,t[4]=n,t[5]=m,t[6]=_,t[7]=0,t[8]=r,t[9]=h,t[10]=l,t[11]=0,t[12]=-(o*p+n*y+r*d),t[13]=-(a*p+m*y+h*d),t[14]=-(c*p+_*y+l*d),t[15]=1,t)}function Bt(t,e,i,s){var o=e[0],n=e[1],r=e[2],a=s[0],m=s[1],h=s[2],c=o-i[0],_=n-i[1],l=r-i[2],u=c*c+_*_+l*l;u>0&&(c*=u=1/Math.sqrt(u),_*=u,l*=u);var p=m*l-h*_,y=h*c-a*l,d=a*_-m*c;return(u=p*p+y*y+d*d)>0&&(p*=u=1/Math.sqrt(u),y*=u,d*=u),t[0]=p,t[1]=y,t[2]=d,t[3]=0,t[4]=_*d-l*y,t[5]=l*p-c*d,t[6]=c*y-_*p,t[7]=0,t[8]=c,t[9]=_,t[10]=l,t[11]=0,t[12]=o,t[13]=n,t[14]=r,t[15]=1,t}function wt(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Mt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function St(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function Ct(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function It(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function Vt(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t[6]=e[6]+i[6]*s,t[7]=e[7]+i[7]*s,t[8]=e[8]+i[8]*s,t[9]=e[9]+i[9]*s,t[10]=e[10]+i[10]*s,t[11]=e[11]+i[11]*s,t[12]=e[12]+i[12]*s,t[13]=e[13]+i[13]*s,t[14]=e[14]+i[14]*s,t[15]=e[15]+i[15]*s,t}function Tt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Pt(t,e){var i=t[0],s=t[1],o=t[2],n=t[3],r=t[4],a=t[5],m=t[6],h=t[7],c=t[8],_=t[9],l=t[10],u=t[11],p=t[12],y=t[13],d=t[14],f=t[15],v=e[0],A=e[1],x=e[2],b=e[3],g=e[4],B=e[5],w=e[6],M=e[7],S=e[8],C=e[9],I=e[10],V=e[11],T=e[12],P=e[13],z=e[14],E=e[15];return Math.abs(i-v)<=1e-6*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(s-A)<=1e-6*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(o-x)<=1e-6*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(n-b)<=1e-6*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-g)<=1e-6*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(a-B)<=1e-6*Math.max(1,Math.abs(a),Math.abs(B))&&Math.abs(m-w)<=1e-6*Math.max(1,Math.abs(m),Math.abs(w))&&Math.abs(h-M)<=1e-6*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(c-S)<=1e-6*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(_-C)<=1e-6*Math.max(1,Math.abs(_),Math.abs(C))&&Math.abs(l-I)<=1e-6*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(u-V)<=1e-6*Math.max(1,Math.abs(u),Math.abs(V))&&Math.abs(p-T)<=1e-6*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(y-P)<=1e-6*Math.max(1,Math.abs(y),Math.abs(P))&&Math.abs(d-z)<=1e-6*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(f-E)<=1e-6*Math.max(1,Math.abs(f),Math.abs(E))}var zt=J,Et=Ct,Ft={};function qt(){var t=new q(3);return q!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Lt(t){var e=new q(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Dt(t){var e=t[0],i=t[1],s=t[2];return Math.hypot(e,i,s)}function Rt(t,e,i){var s=new q(3);return s[0]=t,s[1]=e,s[2]=i,s}function kt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function jt(t,e,i,s){return t[0]=e,t[1]=i,t[2]=s,t}function Ot(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function Ut(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function Gt(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function Nt(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function Yt(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Wt(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function Jt(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function Ht(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function Zt(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Kt(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function Xt(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t}function Qt(t,e){var i=e[0]-t[0],s=e[1]-t[1],o=e[2]-t[2];return Math.hypot(i,s,o)}function $t(t,e){var i=e[0]-t[0],s=e[1]-t[1],o=e[2]-t[2];return i*i+s*s+o*o}function te(t){var e=t[0],i=t[1],s=t[2];return e*e+i*i+s*s}function ee(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function ie(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function se(t,e){var i=e[0],s=e[1],o=e[2],n=i*i+s*s+o*o;return n>0&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function oe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ne(t,e,i){var s=e[0],o=e[1],n=e[2],r=i[0],a=i[1],m=i[2];return t[0]=o*m-n*a,t[1]=n*r-s*m,t[2]=s*a-o*r,t}function re(t,e,i,s){var o=e[0],n=e[1],r=e[2];return t[0]=o+s*(i[0]-o),t[1]=n+s*(i[1]-n),t[2]=r+s*(i[2]-r),t}function ae(t,e,i,s,o,n){var r=n*n,a=r*(2*n-3)+1,m=r*(n-2)+n,h=r*(n-1),c=r*(3-2*n);return t[0]=e[0]*a+i[0]*m+s[0]*h+o[0]*c,t[1]=e[1]*a+i[1]*m+s[1]*h+o[1]*c,t[2]=e[2]*a+i[2]*m+s[2]*h+o[2]*c,t}function me(t,e,i,s,o,n){var r=1-n,a=r*r,m=n*n,h=a*r,c=3*n*a,_=3*m*r,l=m*n;return t[0]=e[0]*h+i[0]*c+s[0]*_+o[0]*l,t[1]=e[1]*h+i[1]*c+s[1]*_+o[1]*l,t[2]=e[2]*h+i[2]*c+s[2]*_+o[2]*l,t}function he(t,e){e=e||1;var i=2*L()*Math.PI,s=2*L()-1,o=Math.sqrt(1-s*s)*e;return t[0]=Math.cos(i)*o,t[1]=Math.sin(i)*o,t[2]=s*e,t}function ce(t,e,i){var s=e[0],o=e[1],n=e[2],r=i[3]*s+i[7]*o+i[11]*n+i[15];return r=r||1,t[0]=(i[0]*s+i[4]*o+i[8]*n+i[12])/r,t[1]=(i[1]*s+i[5]*o+i[9]*n+i[13])/r,t[2]=(i[2]*s+i[6]*o+i[10]*n+i[14])/r,t}function _e(t,e,i){var s=e[0],o=e[1],n=e[2];return t[0]=s*i[0]+o*i[3]+n*i[6],t[1]=s*i[1]+o*i[4]+n*i[7],t[2]=s*i[2]+o*i[5]+n*i[8],t}function le(t,e,i){var s=i[0],o=i[1],n=i[2],r=i[3],a=e[0],m=e[1],h=e[2],c=o*h-n*m,_=n*a-s*h,l=s*m-o*a,u=o*l-n*_,p=n*c-s*l,y=s*_-o*c,d=2*r;return c*=d,_*=d,l*=d,u*=2,p*=2,y*=2,t[0]=a+c+u,t[1]=m+_+p,t[2]=h+l+y,t}function ue(t,e,i,s){var o=[],n=[];return o[0]=e[0]-i[0],o[1]=e[1]-i[1],o[2]=e[2]-i[2],n[0]=o[0],n[1]=o[1]*Math.cos(s)-o[2]*Math.sin(s),n[2]=o[1]*Math.sin(s)+o[2]*Math.cos(s),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function pe(t,e,i,s){var o=[],n=[];return o[0]=e[0]-i[0],o[1]=e[1]-i[1],o[2]=e[2]-i[2],n[0]=o[2]*Math.sin(s)+o[0]*Math.cos(s),n[1]=o[1],n[2]=o[2]*Math.cos(s)-o[0]*Math.sin(s),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function ye(t,e,i,s){var o=[],n=[];return o[0]=e[0]-i[0],o[1]=e[1]-i[1],o[2]=e[2]-i[2],n[0]=o[0]*Math.cos(s)-o[1]*Math.sin(s),n[1]=o[0]*Math.sin(s)+o[1]*Math.cos(s),n[2]=o[2],t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t}function de(t,e){var i=t[0],s=t[1],o=t[2],n=e[0],r=e[1],a=e[2],m=Math.sqrt(i*i+s*s+o*o)*Math.sqrt(n*n+r*r+a*a),h=m&&oe(t,e)/m;return Math.acos(Math.min(Math.max(h,-1),1))}function fe(t){return t[0]=0,t[1]=0,t[2]=0,t}function ve(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Ae(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function xe(t,e){var i=t[0],s=t[1],o=t[2],n=e[0],r=e[1],a=e[2];return Math.abs(i-n)<=1e-6*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(s-r)<=1e-6*Math.max(1,Math.abs(s),Math.abs(r))&&Math.abs(o-a)<=1e-6*Math.max(1,Math.abs(o),Math.abs(a))}t(Ft,"create",(()=>qt)),t(Ft,"clone",(()=>Lt)),t(Ft,"length",(()=>Dt)),t(Ft,"fromValues",(()=>Rt)),t(Ft,"copy",(()=>kt)),t(Ft,"set",(()=>jt)),t(Ft,"add",(()=>Ot)),t(Ft,"subtract",(()=>Ut)),t(Ft,"multiply",(()=>Gt)),t(Ft,"divide",(()=>Nt)),t(Ft,"ceil",(()=>Yt)),t(Ft,"floor",(()=>Wt)),t(Ft,"min",(()=>Jt)),t(Ft,"max",(()=>Ht)),t(Ft,"round",(()=>Zt)),t(Ft,"scale",(()=>Kt)),t(Ft,"scaleAndAdd",(()=>Xt)),t(Ft,"distance",(()=>Qt)),t(Ft,"squaredDistance",(()=>$t)),t(Ft,"squaredLength",(()=>te)),t(Ft,"negate",(()=>ee)),t(Ft,"inverse",(()=>ie)),t(Ft,"normalize",(()=>se)),t(Ft,"dot",(()=>oe)),t(Ft,"cross",(()=>ne)),t(Ft,"lerp",(()=>re)),t(Ft,"hermite",(()=>ae)),t(Ft,"bezier",(()=>me)),t(Ft,"random",(()=>he)),t(Ft,"transformMat4",(()=>ce)),t(Ft,"transformMat3",(()=>_e)),t(Ft,"transformQuat",(()=>le)),t(Ft,"rotateX",(()=>ue)),t(Ft,"rotateY",(()=>pe)),t(Ft,"rotateZ",(()=>ye)),t(Ft,"angle",(()=>de)),t(Ft,"zero",(()=>fe)),t(Ft,"str",(()=>ve)),t(Ft,"exactEquals",(()=>Ae)),t(Ft,"equals",(()=>xe)),t(Ft,"sub",(()=>ge)),t(Ft,"mul",(()=>Be)),t(Ft,"div",(()=>we)),t(Ft,"dist",(()=>Me)),t(Ft,"sqrDist",(()=>Se)),t(Ft,"len",(()=>Ce)),t(Ft,"sqrLen",(()=>Ie)),t(Ft,"forEach",(()=>Ve));var be,ge=Ut,Be=Gt,we=Nt,Me=Qt,Se=$t,Ce=Dt,Ie=te,Ve=(be=qt(),function(t,e,i,s,o,n){var r,a;for(e||(e=3),i||(i=0),a=s?Math.min(s*e+i,t.length):t.length,r=i;r<a;r+=e)be[0]=t[r],be[1]=t[r+1],be[2]=t[r+2],o(be,be,n),t[r]=be[0],t[r+1]=be[1],t[r+2]=be[2];return t});let Te;function Pe(t){const e=document.getElementById(t);if(!e)return console.log(`Failed to get a canvas element with the name: "${t}"`),!1;return Te=e.getContext("webgl",{alpha:!1,premultipliedAlpha:!1}),!0}function ze(t,e){const i=Te.createShader(Te.VERTEX_SHADER);Te.shaderSource(i,t),Te.compileShader(i);let s=Te.getShaderParameter(i,Te.COMPILE_STATUS);if(!s)return console.log("vert: "+Te.getShaderInfoLog(i)),null;const o=Te.createShader(Te.FRAGMENT_SHADER);if(Te.shaderSource(o,e),Te.compileShader(o),s=Te.getShaderParameter(i,Te.COMPILE_STATUS),!s)return console.log("frag: "+Te.getShaderInfoLog(o)),null;const n=Te.createProgram();return Te.attachShader(n,i),Te.attachShader(n,o),Te.bindAttribLocation(n,0,"aPosition"),Te.linkProgram(n),s=Te.getProgramParameter(n,Te.LINK_STATUS),s?(Te.useProgram(n),n):(console.log("link: "+Te.getProgramInfoLog(n)),null)}const Ee=Ft.fromValues(200,350,0),Fe=Ft.fromValues(380,50,1),qe=[],Le=[];qe.push(Ft.fromValues(100,200,0)),Le.push(Ft.fromValues(100,30,1)),qe.push(Ft.fromValues(300,100,0)),Le.push(Ft.fromValues(100,30,1));const De=Ft.fromValues(200,25,10),Re=Ft.fromValues(50,50,1);let ke,je;const Oe=s(i(0,35)),Ue=F.create(),Ge=F.create(),Ne=F.create();let Ye,We,Je,He,Ze,Ke=new class{keys={};constructor(){document.addEventListener("keydown",(t=>{this.onKeyChange(t,!0)}),!0),document.addEventListener("keyup",(t=>{this.onKeyChange(t,!1)}),!1)}pressed(t){return this.keys[t]}onKeyChange(t,e){this.keys[t.key]=e}};function Xe(){requestAnimationFrame(Xe),Je=Date.now(),He=(Je-Ze)/1e3,Ze=Je,Oe.step(He,6,2),je=ke.getLinearVelocity(),(Ke.pressed("ArrowUp")||Ke.pressed("w")||Ke.pressed(" "))&&(je.y=-15),(Ke.pressed("ArrowLeft")||Ke.pressed("a"))&&(je.x=-5),(Ke.pressed("ArrowRight")||Ke.pressed("d"))&&(je.x=5),ke.setLinearVelocity(je),De[0]=30*ke.getPosition().x,De[1]=30*ke.getPosition().y,Oe.clearForces(),Te.clear(Te.COLOR_BUFFER_BIT),Te.uniform3fv(We,[.45,.815,.443]),F.identity(Ge),F.translate(Ge,Ge,Ee),F.scale(Ge,Ge,Fe),F.mul(Ne,Ue,Ge),Te.uniformMatrix4fv(Ye,!1,Ne),Te.drawArrays(Te.TRIANGLES,0,6),Te.uniform3fv(We,[1,.776,.4]),F.identity(Ge),F.translate(Ge,Ge,De),F.scale(Ge,Ge,Re),F.mul(Ne,Ue,Ge),Te.uniformMatrix4fv(Ye,!1,Ne),Te.drawArrays(Te.TRIANGLES,0,6);for(let t=0;t<qe.length;t++)Te.uniform3fv(We,[.45,.815,.443]),F.identity(Ge),F.translate(Ge,Ge,qe[t]),F.scale(Ge,Ge,Le[t]),F.mul(Ne,Ue,Ge),Te.uniformMatrix4fv(Ye,!1,Ne),Te.drawArrays(Te.TRIANGLES,0,6)}!async function(){if(!Pe("renderCanvas"))return;let t=await fetch("assets/shaders/default.vert");const e=await t.text();t=await fetch("assets/shaders/default.frag");const s=await t.text(),n=ze(e,s);if(!n)return;Te.useProgram(n),Ye=Te.getUniformLocation(n,"uMvpMatrix");const r=F.create();F.ortho(r,0,400,400,0,100,-100);const a=F.create();F.lookAt(a,[0,0,90],[0,0,0],[0,1,0]),F.mul(Ue,r,a),We=Te.getUniformLocation(n,"uColor");const m=Te.createBuffer();Te.bindBuffer(Te.ARRAY_BUFFER,m),Te.bufferData(Te.ARRAY_BUFFER,new Float32Array([-.5,-.5,0,-.5,.5,0,.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),Te.STATIC_DRAW),Te.vertexAttribPointer(0,3,Te.FLOAT,!1,0,0),Te.enableVertexAttribArray(0),Te.clearColor(.862,.98,.972,1);let h=i(Ee[0]/30,Ee[1]/30);const c=Oe.createBody({position:h,type:"static"});let _=Fe[0]/30/2,l=Fe[1]/30/2;const u=o(_,l);c.createFixture(u,{friction:.9}),h=i(De[0]/30,De[1]/30),ke=Oe.createBody({position:h,type:"dynamic"}),_=Re[0]/30/2,l=Re[1]/30/2;const p=o(_,l);ke.createFixture(p,{friction:.9}),ke.setFixedRotation(!0);for(let t=0;t<qe.length;t++){const e=i(qe[t][0]/30,qe[t][1]/30),s=Oe.createBody({position:e,type:"static"}),n=Le[t][0]/30/2,r=Le[t][1]/30/2,a=o(n,r);s.createFixture(a,{friction:.9})}Ze=Date.now(),Xe()}();
//# sourceMappingURL=index.df69b08d.js.map
