<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, width=device-width">
    <title>Deploy SDL3 app on Android</title>
    <link rel="stylesheet" href="/libs/bootstrap@5.3.3/bootstrap.min.css">
    <link rel="stylesheet" href="/libs/highlightjs@11.9.0/styles/base16/ia-dark.min.css">
    <script src="/libs/highlightjs@11.9.0/highlight.min.js"></script>
    <script src="/libs/highlightjs@11.9.0/languages/cmake.min.js"></script>
    <style>
        .hljs-ln-line {
            padding-left: 10px;
        }

        .hljs-ln-numbers {
            text-align: right;
            border-right: 1px solid #CCC;
            margin-right: 10px;
        }

        .hljs-ln-n {
            padding-right: 5px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h3>Deploy SDL3 app on Android</h3>

        <ul>
            <li>Android SDK, NDK 23, JDK must be installed</li>
            <li>Download the "sdlcross-SDL3" template example here: <a href="https://github.com/madebr/sdlcross" target="_blank">https://github.com/madebr/sdlcross</a> (choose the SDL3 branch and select: Code > Download ZIP). Unzip somewhere</li>
            <li>Go to <a href="https://github.com/madebr/SDL/actions/runs/10201751044" target="_blank">this link</a>. Download the "android" archive in the Artifacts section. Unzip it</li>
            <li>You will find the "SDL3-3.1.2.aar" file there</li>
            <li>Note. You can find the "INSTALL.md" guide in the "SDL3-3.1.2.aar" archive but you don't need to study it for the current tutorial</li>
            <li>As the "INSTALL.md" guide says to copy "SDL3-3.1.2.aar" to "sdlcross-SDL3/app/libs" folder</li>
            <li>Open the "sdlcross-SDL3/app/build.gradle". Choose what ABI you want to use. For example, "arm64-v8a" for new devices, "armeabi-v7a" is for an old ones, "x86" and "x86_64" - for the Android emulator:</li>
<pre><code class="language-cmake">cmake {
    arguments '-DANDROID_STL=c++_shared', '-DWITH_IMAGE=OFF', '-DWITH_MIXER=OFF'
    // abiFilters 'armeabi-v7a', 'arm64-v8a', 'x86', 'x86_64'
    abiFilters 'armeabi-v7a'
}
</code></pre>
            <li>Open the command line inside of the "sdlcross-SDL3" template root folder</li>
            <li>Copy and paste the following command: <span style="color: red;">gradlew assembleDebug</span></li>
            <li>It requires 6m 52s for the first build and 7 seconds for the next builds when you change a code in the "main.c" file</li>
            <li>The generated APK file will be here: "sdlcross-SDL3/app/build/outputs/apk/debug/app-debug.apk" - 3.8 MB</li>
            <li>The following command is for installing APK-file that connected via USB-cable: <span style="color: red;">gradlew installDebug</span></li>
        </ul>

        <p>Based <a href="https://discord.com/channels/405784877305298944/1062483238695739522/1276009070566047744" target="_blank">on the Discord discussion</a></p>

        <p>Note. You can build "SDL3.aar" by yourself from the SDL3 sources:</p>

        <ul>
            <li>The newest Python version must be installed. I use Python 3.12. Maybe you can use 3.10 and 3.11 but 3.8 cannot be used. I now nothing about 3.9</li>
            <li>Note. You can use a few versions of Python on your computer. For example, I use Python 3.8 because <a href="https://pypi.org/project/Box2D/">PyBox2D</a> cannot work with 3.9 at this moment. I downloaded <a href="https://www.python.org/downloads/release/python-3125/">Windows embeddable package</a>. I download the "Window embeddable package", renamed python.exe to python312.exe and added it to the Path. I can use the "python312" command in the console</li>
            <li>Clone SDL source: <span style="color: red;">git clone https://github.com/libsdl-org/SDL.git</span></li>
            <li>Note. I used this commit: <a href="https://github.com/libsdl-org/SDL/commit/8bcfdb0c925a11a8f4b47ab589e5c37458337787">8bcfdb0</a> from Aug 23, 2024. You can read how to use the specific commit [here on the Stack Overflow](https://stackoverflow.com/a/14091182/4159530)</li>
            <li>Open the console terminal and go to the root of the SDL folder</li>
            <li>Run: <span style="color: red;">python build-scripts/build-release.py  --create android --project SDL3 --force</span></li>
            <li>The "aar" file will be generated here: SDL/dist/SDL3-3.1.2.aar'</li>
            <li>Note. You can disable "fresh" in the "build-scripts/build-release.py" by comment it for faster turn-a-round, and forcing a build:</li>
<pre><code>cmake_args = [
    "cmake",
    "-S", str(self.root),
    "-B", str(build_dir),
    #"--fresh",
    f'''-DCMAKE_C_FLAGS="-ffile-prefix-map={self.root}=/src/{self.
</code></pre>
        </ul>

        <p>Based <a href="https://discord.com/channels/405784877305298944/1062483238695739522/1276232633637928996" target="_blank">on the Discord discussion</a></p>
    </div>

    <script>
        hljs.highlightAll();
        hljs.initLineNumbersOnLoad();
    </script>
</body>

</html>