{"version":3,"file":"index.js","sources":["../../src/webgl-context.js","../../src/index.js"],"sourcesContent":["export let gl = null;\r\n\r\nexport function initWebGLContext(canvasName) {\r\n    const canvas = document.getElementById(canvasName);\r\n    if (canvas === null) {\r\n        console.log(`Failed to get a canvas element with the name \"${canvasName}\"`);\r\n        return false;\r\n    }\r\n    gl = canvas.getContext(\"webgl\", { alpha: false, premultipliedAlpha: false });\r\n    return true;\r\n}\r\n","import { gl, initWebGLContext } from \"./webgl-context.js\";\r\n\r\nfunction init() {\r\n    console.log(\"------------------init------------------\");\r\n    if (!initWebGLContext(\"renderCanvas\")) return;\r\n\r\n    gl.clearColor(0.2, 0.2, 0.2, 1.0);\r\n\r\n    const vertexShaderSource =\r\n        `\r\n            attribute vec2 aPosition;\r\n            \r\n            void main()\r\n            {\r\n                gl_Position = vec4(aPosition, 0.0, 1.0);\r\n            }`;\r\n\r\n    const fragmentShaderSource =\r\n        `\r\n            precision mediump float;\r\n            \r\n            void main()\r\n            {\r\n                gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n            }`;\r\n\r\n    const vShader = gl.createShader(gl.VERTEX_SHADER);\r\n    gl.shaderSource(vShader, vertexShaderSource);\r\n    gl.compileShader(vShader);\r\n\r\n    const fShader = gl.createShader(gl.FRAGMENT_SHADER);\r\n    gl.shaderSource(fShader, fragmentShaderSource);\r\n    gl.compileShader(fShader);\r\n\r\n    const program = gl.createProgram();\r\n    gl.attachShader(program, vShader);\r\n    gl.attachShader(program, fShader);\r\n    gl.linkProgram(program);\r\n    gl.useProgram(program);\r\n\r\n    const vertices = new Float32Array([\r\n        0, 0.5,\r\n        -0.5, -0.5,\r\n        0.5, -0.5\r\n    ]);\r\n\r\n    const vbo = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\r\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\r\n\r\n    const aPositionLocation = gl.getAttribLocation(program, \"aPosition\");\r\n    gl.vertexAttribPointer(aPositionLocation, 2, gl.FLOAT, false, 0, 0);\r\n    gl.enableVertexAttribArray(aPositionLocation);\r\n\r\n    window.onresize = () => {\r\n        const w = gl.canvas.clientWidth;\r\n        const h = gl.canvas.clientHeight;\r\n        gl.canvas.width = w;\r\n        gl.canvas.height = h;\r\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\r\n        draw();\r\n    };\r\n    window.onresize(null);\r\n\r\n    gl.canvas.onclick = (event) => {\r\n        const rect = event.target.getBoundingClientRect();\r\n        const x = event.clientX - rect.left;\r\n        const y = rect.bottom - event.clientY - 1;\r\n\r\n        draw();\r\n\r\n        const pixels = new Uint8Array(4);\r\n        gl.readPixels(x, y, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\r\n        const output = `${(pixels[0] / 255.0).toFixed(2)} ${(pixels[1] / 255.0).toFixed(2)} ${(pixels[2] / 255.0).toFixed(2)} `;\r\n        // console.log(\r\n        //     (pixels[0] / 255.0).toFixed(2),\r\n        //     (pixels[1] / 255.0).toFixed(2),\r\n        //     (pixels[2] / 255.0).toFixed(2));\r\n        console.log(output);\r\n    };\r\n}\r\n\r\nfunction draw() {\r\n    gl.clear(gl.COLOR_BUFFER_BIT);\r\n    gl.drawArrays(gl.TRIANGLES, 0, 3);\r\n}\r\n\r\ninit();\r\n"],"names":[],"mappings":"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"}